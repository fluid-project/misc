(function(A){A.each({focus:"focusin",blur:"focusout"},function(C,B){A.event.special[B]={setup:function(){if(A.browser.msie){return false}this.addEventListener(C,A.event.special[B].handler,true)},teardown:function(){if(A.browser.msie){return false}this.removeEventListener(C,A.event.special[B].handler,true)},handler:function(D){arguments[0]=A.event.fix(D);arguments[0].type=B;return A.event.handle.apply(this,arguments)}}});A.extend(A.fn,{delegate:function(D,C,B){return this.bind(D,function(E){var F=A(E.target);if(F.is(C)){return B.apply(F,arguments)}})},triggerEvent:function(B,C){return this.triggerHandler(B,[jQuery.event.fix({type:B,target:C})])}})})(jQuery);var fluid_1_2=fluid_1_2||{};var fluid=fluid||fluid_1_2;(function(A,B){B.version="Infusion 1.2";B.environment={fluid:B};var C=window||{};B.fail=function(J){B.setLogging(true);B.log(J.message?J.message:J);throw new Error(J)};B.wrap=function(J){return((!J||J.jquery)?J:A(J))};B.unwrap=function(J){return J&&J.jquery&&J.length===1?J[0]:J};B.keyForValue=function(L,K){for(var J in L){if(L[J]===K){return J}}return null};B.findKeyInObject=B.keyForValue;B.clear=function(K){if(K instanceof Array){K.length=0}else{for(var J in K){delete K[J]}}};B.identity=function(J){return J};B.container=function(K){var J=K;if(typeof K==="string"||K.nodeType&&(K.nodeType===1||K.nodeType===9)){J=A(K)}if(!J||!J.jquery||J.length!==1){if(typeof (K)!=="string"){K=J.selector}B.fail({name:"NotOne",message:"A single container element was not found for selector "+K})}return J};B.dumpEl=B.identity;B.renderTimestamp=B.identity;var F={};var G={};B.defaults=function(){var M=0;var K=F;if(typeof arguments[0]==="boolean"){K=G;M=1}var J=arguments[M];var L=arguments[M+1];if(L!==undefined){K[J]=L;return L}return K[J]};B.createDomBinder=function(K,M){var L={},N={};function O(Q,P){return B.allocateSimpleId(P)+"-"+Q}function J(R,Q,P){L[O(R,Q)]=P}N.locate=function(R,T){var P,Q,S;P=M[R];Q=T?T:K;if(!Q){B.fail("DOM binder invoked for selector "+R+" without container")}if(!P){return Q}if(typeof (P)==="function"){S=A(P.call(null,B.unwrap(Q)))}else{S=A(P,Q)}if(S.get(0)===document){S=[]}if(!S.selector){S.selector=P;S.context=Q}S.selectorName=R;J(R,Q,S);return S};N.fastLocate=function(Q,T){var P=T?T:K;var R=O(Q,P);var S=L[R];return S?S:N.locate(Q,T)};N.clear=function(){L={}};N.refresh=function(S,T){var Q=T?T:K;if(typeof S==="string"){S=[S]}if(Q.length===undefined){Q=[Q]}for(var R=0;R<S.length;++R){for(var P=0;P<Q.length;++P){N.locate(S[R],Q[P])}}};return N};B.isArrayable=function(J){return typeof (J)!=="string"&&typeof (J.length)==="number"};B.mergeListeners=function(L,O){if(O){for(var K in O){var P=O[K];var Q=K.indexOf(".");var N;if(Q!==-1){N=K.substring(Q+1);K=K.substring(0,Q)}if(!L[K]){L[K]=B.event.getEventFirer()}var M=L[K];if(typeof (P)==="function"){M.addListener(P,N)}else{if(P&&B.isArrayable(P)){for(var J=0;J<P.length;++J){M.addListener(P[J],N)}}}}}};B.instantiateFirers=function(M,J){M.events={};if(J.events){for(var L in J.events){var K=J.events[L];M.events[L]=B.event.getEventFirer(K==="unicast",K==="preventable")}}B.mergeListeners(M.events,J.listeners)};B.mergeComponentOptions=function(K,J,M){var L=B.defaults(J);K.options=B.merge(L?L.mergePolicy:null,{},L,M)};B.expectFilledSelector=function(J,K){if(J&&J.length===0&&J.jquery){B.fail(K+': selector "'+J.selector+'" with name '+J.selectorName+" returned no results in context "+B.dumpEl(J.context))}};B.initView=function(K,J,M){var L={};B.expectFilledSelector(J,'Error instantiating component with name "'+K);B.mergeComponentOptions(L,K,M);if(J){L.container=B.container(J);B.initDomBinder(L)}B.instantiateFirers(L,L.options);return L};B.COMPONENT_OPTIONS={};B.VALUE={};B.emptySubcomponent=function(J){var L={};J=A.makeArray(J);for(var K=0;K<J.length;++K){L[J[K]]=function(){}}return L};B.initLittleComponent=function(K,J){var L={};B.mergeComponentOptions(L,K,J);return L};B.initSubcomponent=function(L,K,J){return B.initSubcomponents(L,K,J)[0]};B.initSubcomponents=function(P,Q,R){var S=P.options[Q];if(!S){return }var O=A.makeArray(S);var T=-1;var L=[];R=A.makeArray(R);for(var N=0;N<R.length;++N){if(R[N]===B.COMPONENT_OPTIONS){T=N}}for(N=0;N<O.length;++N){S=O[N];if(T!==-1&&S.options){R[T]=S.options}if(typeof (S)!=="function"){var M=typeof (S)==="string"?S:S.type;var J=B.defaults(true,M);B.merge("reverse",P.options,J);L[N]=M==="fluid.emptySubcomponent"?B.emptySubcomponent(S.options):B.invokeGlobalFunction(M,R,{fluid:B})}else{L[N]=S.apply(null,R)}var K=L[N]?L[N].returnedOptions:null;if(K){B.merge(P.options.mergePolicy,P.options,K);if(K.listeners){B.mergeListeners(P.events,K.listeners)}}}return L};B.initDomBinder=function(J){J.dom=B.createDomBinder(J.container,J.options.selectors);J.locate=J.dom.locate};B.isPrimitive=function(J){var K=typeof (J);return !J||K==="string"||K==="boolean"||K==="number"||K==="function"};function D(O,Q,N,J){var R=O&&typeof (O)!=="string"?O[Q]:O;if(typeof (R)==="function"){R.apply(null,N,J);return N}if(R==="replace"){B.clear(N)}for(var L in J){var S=(Q?Q+".":"")+L;var P=N[L];var M=J[L];var K=B.isPrimitive(P);if(M!==undefined){if(M!==null&&typeof M==="object"&&!M.nodeType&&!M.jquery&&M!==B.VALUE){if(K){N[L]=P=M instanceof Array?[]:{}}D(O,S,P,M)}else{if(P===null||P===undefined||R!=="reverse"){N[L]=M}}}}return N}B.merge=function(N,M){var R="";for(var L=2;L<arguments.length;++L){var J=arguments[L];if(J!==null&&J!==undefined){D(N,R,M,J)}}if(N&&typeof (N)!=="string"){for(var P in N){var Q=N[P];if(typeof (Q)==="string"&&Q!=="replace"){var K=B.model.getBeanValue(M,P);if(K===null||K===undefined){var O=B.model.getBeanValue(M,Q);B.model.setBeanValue(M,P,O)}}}}return M};B.freshContainer=function(J){return B.isArrayable(J)?[]:{}};B.copy=function(J){if(B.isPrimitive(J)){return J}return A.extend(true,B.freshContainer(J),J)};B.getGlobalValue=function(K,J){J=J||B.environment;return B.model.getBeanValue(C,K,J)};B.invokeGlobalFunction=function(K,L,J){var M=B.getGlobalValue(K,J);if(!M){B.fail("Error invoking global function: "+K+" could not be located")}else{return M.apply(null,L)}};B.registerGlobalFunction=function(J,L,K){K=K||B.environment;B.model.setBeanValue(C,J,L,K)};B.registerGlobal=B.registerGlobalFunction;B.registerNamespace=function(L,J){J=J||B.environment;var K=B.getGlobalValue(L,J);if(!K){K={};B.registerGlobal(L,K,J)}return K};B.event={};var E=1;B.event.getEventFirer=function(L,M){var K=B.log;var J={};return{addListener:function(P,O,N){if(!P){return }if(L){O="unicast"}if(!O){if(!P.$$guid){P.$$guid=E++}O=P.$$guid}J[O]={listener:P,predicate:N}},removeListener:function(N){if(typeof (N)==="string"){delete J[N]}else{if(typeof (N)==="object"&&N.$$guid){delete J[N.$$guid]}}},fire:function(){for(var P in J){var N=J[P];var Q=N.listener;if(N.predicate&&!N.predicate(Q,arguments)){continue}try{var O=Q.apply(null,arguments);if(M&&O===false){return false}}catch(R){K("FireEvent received exception "+R.message+" e "+R+" firing to listener "+P);throw (R)}}}}};B.model={};B.model.copyModel=function(K,J){B.clear(K);A.extend(true,K,J)};B.model.parseEL=function(J){return String(J).split(".")};B.model.composePath=function(J,K){return J===""?K:J+"."+K};B.model.getPenultimate=function(L,P,J,N){var K=B.model.parseEL(P);for(var M=0;M<K.length-1;++M){if(!L){return L}var O=K[M];if(J&&J[O]){L=J[O];J=null}else{if(L[O]===undefined&&N){L[O]={}}L=L[O]}}return{root:L,last:K[K.length-1]}};B.model.setBeanValue=function(K,M,N,J){var L=B.model.getPenultimate(K,M,J,true);L.root[L.last]=N};B.model.getBeanValue=function(K,M,J){if(M===""||M===null||M===undefined){return K}var L=B.model.getPenultimate(K,M,J);return L.root?L.root[L.last]:L.root};var I;B.setLogging=function(J){if(typeof J==="boolean"){I=J}else{I=false}};B.log=function(J){if(I){J=B.renderTimestamp(new Date())+":  "+J;if(typeof (console)!=="undefined"){if(console.debug){console.debug(J)}else{console.log(J)}}else{if(typeof (YAHOO)!=="undefined"){YAHOO.log(J)}else{if(typeof (opera)!=="undefined"){opera.postError(J)}}}}};B.findAncestor=function(J,K){J=B.unwrap(J);while(J){if(K(J)){return J}J=J.parentNode}};B.jById=function(M,L){L=L&&L.nodeType===9?L:document;var J=B.byId(M,L);var K=J?A(J):[];K.selector="#"+M;K.context=L;return K};B.byId=function(L,K){K=K&&K.nodeType===9?K:document;var J=K.getElementById(L);if(J){if(J.getAttribute("id")!==L){B.fail("Problem in document structure - picked up element "+B.dumpEl(J)+" for id "+L+" without this id - most likely the element has a name which conflicts with this id")}return J}else{return null}};B.getId=function(J){return B.unwrap(J).getAttribute("id")};B.allocateSimpleId=function(J){J=B.unwrap(J);if(!J.id){J.id="fluid-id-"+(E++)}return J.id};function H(O,N,M,L){var J=O[M];for(var K=0;K<L.length-1;++K){J=L[K+1](J,M)}N[M]=J}B.transform=function(M){var L=B.freshContainer(M);if(B.isArrayable(M)){for(var K=0;K<M.length;++K){H(M,L,K,arguments)}}else{for(var J in M){H(M,L,J,arguments)}}return L};B.find=function(M,L,N){for(var K=0;K<M.length;++K){var J=L(M[K],K);if(J!==null&&J!==undefined){return J}}return N};B.accumulate=function(M,L,J){for(var K=0;K<M.length;++K){J=L(M[K],J,K)}return J};B.remove_if=function(L,K){for(var J=0;J<L.length;++J){if(K(L[J],J)){L.splice(J,1);--J}}return L};B.stringTemplate=function(N,K){var M=N;for(var L in K){var J="%"+L;M=M.replace(J,K[L])}return M}})(jQuery,fluid_1_2);var fluid_1_2=fluid_1_2||{};(function(C,B){B.dom=B.dom||{};var A=function(D){if(D.node.firstChild){D.node=D.node.firstChild;D.depth+=1;return D}while(D.node){if(D.node.nextSibling){D.node=D.node.nextSibling;return D}D.node=D.node.parentNode;D.depth-=1}return D};B.dom.iterateDom=function(H,G,F){var E={node:H,depth:0};var D=H;var I;while(E.node!==null&&E.depth>=0&&E.depth<B.dom.iterateDom.DOM_BAIL_DEPTH){I=null;if(E.node.nodeType===1||F){I=G(E.node,E.depth)}if(I){if(I==="delete"){E.node.parentNode.removeChild(E.node);E.node=D}else{if(I==="stop"){return E.node}}}D=E.node;E=A(E)}};B.dom.iterateDom.DOM_BAIL_DEPTH=256;B.dom.isContainer=function(D,E){for(;E;E=E.parentNode){if(D===E){return true}}return false};B.dom.getElementText=function(F){var D=F.childNodes;
var G="";for(var E=0;E<D.length;++E){var H=D[E];if(H.nodeType==3){G=G+H.nodeValue}}return G}})(jQuery,fluid_1_2);fluid_1_2=fluid_1_2||{};(function(C,B){var D=/(\\u[\dabcdef]{4}|\\x[\dabcdef]{2})/g;B.unescapeProperties=function(F){F=F.replace(D,function(J){var K=J.substring(2);var I=parseInt(K,16);return String.fromCharCode(I)});var H=0;while(true){var E=F.indexOf("\\",H);if(E===-1){break}if(E===F.length-1){return[F.substring(0,F.length-1),true]}var G=F.charAt(E+1);if(G==="n"){G="\n"}if(G==="r"){G="\r"}if(G==="t"){G="\t"}F=F.substring(0,E)+G+F.substring(E+2);H=E+1}return[F,false]};var A=/[^\\][\s:=]/;B.parseJavaProperties=function(K){var F={};K=K.replace(/\r\n/g,"\n");K=K.replace(/\r/g,"\n");lines=K.split("\n");var L,J,E,N,I;for(var G=0;G<lines.length;++G){var M=C.trim(lines[G]);if(!M||M.charAt(0)==="#"||M.charAt(0)==="!"){continue}if(!L){E="";var H=M.search(A);if(H===-1){J=M;N=""}else{J=C.trim(M.substring(0,H+1));N=C.trim(M.substring(H+2));if(N.charAt(0)===":"||N.charAt(0)==="="){N=C.trim(N.substring(1))}}J=B.unescapeProperties(J)[0];I=B.unescapeProperties(N)}else{I=B.unescapeProperties(M)}L=I[1];if(!I[1]){F[J]=E+I[0]}else{E+=I[0]}}return F};B.formatMessage=function(G,E){if(!E){return G}if(typeof (E)==="string"){E=[E]}for(var F=0;F<E.length;++F){G=G.replace("{"+F+"}",E[F])}return G}})(jQuery,fluid_1_2);var fluid_1_2=fluid_1_2||{};var fluid=fluid||fluid_1_2;(function(B,A){A.renderTimestamp=function(C){var D=function(F,G){if(!G){G=2}var E=(F==undefined?"":F.toString());return"00000".substring(5-G+E.length)+E};return D(C.getHours())+":"+D(C.getMinutes())+":"+D(C.getSeconds())+"."+D(C.getMilliseconds(),3)};A.dumpEl=function(D){var E;if(!D){return"null"}if(D.nodeType===3||D.nodeType===8){return"[data: "+D.data+"]"}if(D.nodeType===9){return"[document: location "+D.location+"]"}if(!D.nodeType&&A.isArrayable(D)){E="[";for(var C=0;C<D.length;++C){E+=A.dumpEl(D[C]);if(C<D.length-1){E+=", "}}return E+"]"}D=B(D);E=D.get(0).tagName;if(D.attr("id")){E+="#"+D.attr("id")}if(D.attr("class")){E+="."+D.attr("class")}return E}})(jQuery,fluid_1_2);fluid_1_2=fluid_1_2||{};(function(D,C){C.VALUE={};C.BINDING_ROOT_KEY="fluid-binding-root";C.findData=function(H,G){while(H){var I=D.data(H,G);if(I){return I}H=H.parentNode}};C.bindFossils=function(H,I,G){D.data(H,C.BINDING_ROOT_KEY,{data:I,fossils:G})};C.findForm=function(G){return C.findAncestor(G,function(H){return H.nodeName.toLowerCase()==="form"})};C.value=function(L,I){var J=C.unwrap(L);var O=false;if(J.nodeType===undefined&&J.length>1){J=J[0];O=true}var K=D(J);if("input"!==J.nodeName.toLowerCase()||!/radio|checkbox/.test(J.type)){return D(J).val(I)}var H=J.name;if(H===undefined){C.fail("Cannot acquire value from node "+C.dumpEl(J)+" which does not have name attribute set")}var G;if(O){G=L}else{var G=document.getElementsByName(H);var N=C.findForm(J);G=D.grep(G,function(P){if(P.name!==H){return false}return !N||C.dom.isContainer(N,P)})}if(I!==undefined){if(typeof (I)==="boolean"){I=(I?"true":"false")}D.each(G,function(){this.checked=(I instanceof Array?D.inArray(this.value,I)!==-1:I===this.value)})}else{var M=D.map(G,function(P){return P.checked?P.value:null});return J.type==="radio"?M[0]:M}};C.applyChange=function(L,M,I){L=C.unwrap(L);if(M===undefined){M=C.value(L)}if(L.nodeType===undefined&&L.length>0){L=L[0]}var G=C.findData(L,C.BINDING_ROOT_KEY);if(!G){C.fail("Bound data could not be discovered in any node above "+C.dumpEl(L))}var H=L.name;var J=G.fossils[H];if(!J){C.fail("No fossil discovered for name "+H+" in fossil record above "+C.dumpEl(L))}if(typeof (J.oldvalue)==="boolean"){M=M[0]?true:false}var K=G.fossils[H].EL;if(I){I.fireChangeRequest({path:K,value:M,source:L.id})}else{C.model.setBeanValue(G.data,K,M)}};C.pathUtil={};var F=function(I,L,H){var J=null;if(I){J=""}var K=false;var G=L.length;for(;H<G;++H){var M=L.charAt(H);if(!K){if(M==="."){break}else{if(M==="\\"){K=true}else{if(J!==null){J+=M}}}}else{K=false;if(J!==null){I+=M}}}if(J!==null){I[0]=J}return H};var A=[];C.pathUtil.getPathSegment=function(H,G){F(A,H,G);return A[0]};C.pathUtil.getHeadPath=function(G){return C.pathUtil.getPathSegment(G,0)};C.pathUtil.getFromHeadPath=function(H){var G=F(null,H,0);return G===H.length?null:H.substring(G+1)};function E(G){return G.lastIndexOf(".")}C.pathUtil.getToTailPath=function(H){var G=E(H);return G==-1?null:H.substring(0,G)};C.pathUtil.getTailPath=function(H){var G=E(H);return C.pathUtil.getPathSegment(H,G+1)};var B=function(I,H){for(var G=0;G<H.length;++G){var J=H.charAt(G);if(J==="."||J==="\\"||J==="}"){I+="\\"}I+=J}return I};C.pathUtil.composePath=function(G,H){if(G.length!==0){G+="."}return B(G,H)};C.pathUtil.matchPath=function(G,J){var I="";while(true){if(!G){break}if(!J){return null}var H=C.pathUtil.getHeadPath(G);var K=C.pathUtil.getHeadPath(J);if(H!=="*"&&H!==K){return null}I=C.pathUtil.composePath(I,K);G=C.pathUtil.getFromHeadPath(G);J=C.pathUtil.getFromHeadPath(J)}return I};C.model.applyChangeRequest=function(H,K){if(K.type==="ADD"){C.model.setBeanValue(H,K.path,K.value)}else{if(K.type==="DELETE"){var I=C.pathUtil.getToTailPath(K.path);var G=C.pathUtil.getTailPath(K.path);var J=C.model.getBeanValue(H,J);delete J[G]}}};C.model.bindRequestChange=function(G){G.requestChange=function(K,J,H){var I={path:K,value:J,type:H};G.fireChangeRequest(I)}};C.makeChangeApplier=function(H){var I={guards:C.event.getEventFirer(false,true),modelChanged:C.event.getEventFirer(false,false)};var J={model:H};function K(L,M){return function(P,N){var O=N[M];return C.pathUtil.matchPath(P[L],O.path)}}function G(O,N,M,P){var L=K(M,P);O[N]={addListener:function(Q,S,R){S[M]=Q;I[N].addListener(S,R,L)},removeListener:function(Q){I[N].removeListener(Q)}}}G(J,"guards","guardedPathSpec",1);G(J,"modelChanged","triggerPathSpec",2);J.fireChangeRequest=function(M){if(!M.type){M.type="ADD"}var L=I.guards.fire(H,M);if(L===false){return }var N={};C.model.copyModel(N,H);C.model.applyChangeRequest(H,M);I.modelChanged.fire(H,N,M)};C.model.bindRequestChange(J);return J};C.makeSuperApplier=function(){var H=[];var G={};G.addSubApplier=function(I,J){H.push({path:I,subApplier:J})};G.fireChangeRequest=function(L){for(var K=0;K<H.length;++K){var M=H[K].path;if(L.path.indexOf(M)===0){var J=L.path.substring(M.length+1);var I=C.copy(L);I.path=J;H[K].subApplier.fireChangeRequest(I)}}};return G};C.attachModel=function(G,M,K){var I=C.model.parseEL(M);for(var L=0;L<I.length-1;++L){var H=I[L];var J=G[H];if(!J){G[H]=J={}}G=J}G[I[I.length-1]]=K};C.assembleModel=function(G){var H={};var J=C.makeSuperApplier();var I={model:H,applier:J};for(path in G){var K=G[path];C.attachModel(H,path,K.model);if(K.applier){J.addSubApplier(path,K.applier)}}return I}})(jQuery,fluid_1_2);var fluid_1_2=fluid_1_2||{};var fluid=fluid||fluid_1_2;(function(T,P){P.thatistBridge=function(l,n){var m=function(o){var q=o.split(".");var p=n;for(var t=0;t<q.length;++t){p=p[q[t]]}var s=[this];if(arguments.length===2){s=s.concat(T.makeArray(arguments[1]))}var r=p.apply(null,s);this.that=function(){return r};var u=typeof (r);return !r||u==="string"||u==="number"||u==="boolean"||r&&r.length!==undefined?r:this};T.fn[l]=m;return m};P.thatistBridge("fluid",P);P.thatistBridge("fluid_1_2",fluid_1_2);var j="fluid-keyboard-a11y";var J=function(n,l){var m=T(n).data(j);return m?m[l]:undefined};var L=function(n,l,m){T(n).each(function(){var o=T.data(this,j)||{};o[l]=m;T.data(this,j,o)})};var M="disabled";if(T.event.special.focusin){M=null;T(document).bind("focusin",function(l){M=l.target})}P.getLastFocusedElement=function(){if(M==="disabled"){P.fail("Focus manager not enabled - please include jquery.delegate.js or equivalent for support of 'focusin' event")}return M};var i=function(){return T.browser.msie?"tabIndex":"tabindex"};var U=function(l){if(l.length<=0){return false}return T(l[0]).is("a, input, button, select, area, textarea, object")};var X=function(m){if(m.length<=0){return undefined}if(!P.tabindex.hasAttr(m)){return U(m)?Number(0):undefined}var l=m.attr(i());return Number(l)};var V=function(l,m){return l.each(function(n,o){T(o).attr(i(),m)})};P.tabindex=function(m,l){m=T(m);if(l!==null&&l!==undefined){return V(m,l)}else{return X(m)}};P.tabindex.remove=function(l){l=T(l);return l.each(function(m,n){T(n).removeAttr(i())})};P.tabindex.hasAttr=function(m){m=T(m);if(m.length<=0){return false}var l=m.map(function(){var n=this.getAttributeNode(i());return n?n.specified:false});return l.length===1?l[0]:l};P.tabindex.has=function(l){l=T(l);return P.tabindex.hasAttr(l)||U(l)};var G="enablement";P.enabled=function(m,l){m=T(m);if(l===undefined){return J(m,G)!==false}else{T("*",m).each(function(){if(J(this,G)!==undefined){L(this,G,l)}else{if(/select|textarea|input/i.test(this.nodeName)){T(this).attr("disabled",!l)}}});L(m,G,l)}};P.a11y=T.a11y||{};P.a11y.orientation={HORIZONTAL:0,VERTICAL:1,BOTH:2};var D={next:T.ui.keyCode.DOWN,previous:T.ui.keyCode.UP};var Q={next:T.ui.keyCode.RIGHT,previous:T.ui.keyCode.LEFT};var B=function(l){return l.jquery?l[0]:l};var N=function(l){l.each(function(m,n){n=T(n);if(!n.fluid("tabindex.has")||n.fluid("tabindex")<0){n.fluid("tabindex",0)}})};P.tabbable=function(l){l=T(l);N(l)};var d="selectionContext";var b=-32768;var K=function(l){if(l.options.onLeaveContainer){l.options.onLeaveContainer(l.selectables[l.activeItemIndex])}else{if(l.options.onUnselect){l.options.onUnselect(l.selectables[l.activeItemIndex])}}if(!l.options.rememberSelectionState){l.activeItemIndex=b}};var F=function(l,m){if(m){m(l)}};var W=function(m,l){if(l&&m){l(m)}};var I=function(m,l){W(m,l.options.onUnselect)};var S=function(l,m){I(m.selectedElement(),m);l=B(l);var n=m.selectables.index(l);if(n===-1){return }m.activeItemIndex=n;F(l,m.options.onSelect)};var g=function(l){return function(m){T(m.target).fluid("tabindex",0);S(m.target,l);return m.stopPropagation()}};var R=function(l){return function(m){T(m.target).fluid("tabindex",l.options.selectablesTabindex);I(m.target,l);return m.stopPropagation()}};var k=function(l){var m=l.selectables;if(l.activeItemIndex>=m.length){l.activeItemIndex=0
}if(l.activeItemIndex<0&&l.activeItemIndex!==b){l.activeItemIndex=m.length-1}if(l.activeItemIndex>=0){T(m[l.activeItemIndex]).focus()}};var C=function(l){var m=l.selectedElement();if(m){m.blur()}I(l.selectedElement(),l);if(l.activeItemIndex===b){l.activeItemIndex=-1}};var O=function(l){C(l);++l.activeItemIndex;k(l)};var E=function(l){C(l);--l.activeItemIndex;k(l)};var Z=function(l,n,m){return function(o){if(o.which===n.next){O(l);o.preventDefault()}else{if(o.which===n.previous){E(l);o.preventDefault()}}}};var e=function(l){var m;if(l===P.a11y.orientation.HORIZONTAL){m=Q}else{if(l===P.a11y.orientation.VERTICAL){m=D}}return m};var h=function(l){return function(m){if(m.which!==T.ui.keyCode.TAB){return }K(l);if(m.shiftKey){l.focusIsLeavingContainer=true}}};var Y=function(l){return function(m){var o=l.options.autoSelectFirstItem;var n=typeof (o)==="function"?o():o;if(l.focusIsLeavingContainer){n=false}if(n&&m.target===l.container.get(0)){if(l.activeItemIndex===b){l.activeItemIndex=0}T(l.selectables[l.activeItemIndex]).focus()}return m.stopPropagation()}};var A=function(l){return function(m){l.focusIsLeavingContainer=false;return m.stopPropagation()}};var a=function(m,p,q){var n=T.extend(true,{},p,q);var r=e(n.direction);var l=n.selectableElements?n.selectableElements:m.find(n.selectableSelector);var o={container:m,activeItemIndex:b,selectables:l,focusIsLeavingContainer:false,options:n};o.selectablesUpdated=function(s){if(typeof (o.options.selectablesTabindex)==="number"){o.selectables.fluid("tabindex",o.options.selectablesTabindex)}o.selectables.unbind("focus."+j);o.selectables.unbind("blur."+j);o.selectables.bind("focus."+j,g(o));o.selectables.bind("blur."+j,R(o));if(s){S(s,o)}else{k(o)}};o.refresh=function(){if(!o.options.selectableSelector){throw ("Cannot refresh selectable context which was not initialised by a selector")}o.selectables=m.find(n.selectableSelector);o.selectablesUpdated()};o.selectedElement=function(){return o.activeItemIndex<0?null:o.selectables[o.activeItemIndex]};if(r){m.keydown(Z(o,r))}m.keydown(h(o));m.focus(Y(o));m.blur(A(o));o.selectablesUpdated();return o};P.selectable=function(n,l){n=T(n);var m=a(n,P.selectable.defaults,l);L(n,d,m);return m};P.selectable.select=function(m,l){T(l).focus()};P.selectable.selectNext=function(l){l=T(l);O(J(l,d))};P.selectable.selectPrevious=function(l){l=T(l);E(J(l,d))};P.selectable.currentSelection=function(m){m=T(m);var l=J(m,d);return T(l.selectedElement())};P.selectable.defaults={direction:P.a11y.orientation.VERTICAL,selectablesTabindex:-1,autoSelectFirstItem:true,rememberSelectionState:true,selectableSelector:".selectable",selectableElements:null,onSelect:null,onUnselect:null,onLeaveContainer:null};var H=function(q,m){if(!q.modifier){return true}var n=q.modifier;var o=n&&m.ctrlKey;var l=n&&m.altKey;var p=n&&m.shiftKey;return o||l||p};var f=function(l){return function(m){var p=m.target;if(!P.enabled(m.target)){return }var o=m.which?m.which:m.keyCode;if(o===l.key&&l.activateHandler&&H(l,m)){var n=T.Event("fluid-activate");T(m.target).trigger(n,[l.activateHandler]);if(n.isDefaultPrevented()){m.preventDefault()}}}};var c=function(o,r,l,m){var q=[];T(l).each(function(s,t){q.push({modifier:null,key:t,activateHandler:r})});if(m&&m.additionalBindings){q=q.concat(m.additionalBindings)}L(o,G,true);for(var n=0;n<q.length;++n){var p=q[n];o.keydown(f(p))}o.bind("fluid-activate",function(s,t){t=t||r;return t?t(s):null})};P.activatable=function(n,m,l){n=T(n);c(n,m,P.activatable.defaults.keys,l)};P.activate=function(l){T(l).trigger("fluid-activate")};P.activatable.defaults={keys:[T.ui.keyCode.ENTER,T.ui.keyCode.SPACE]}})(jQuery,fluid_1_2);XMLP=function(A){this.m_xml=A;this.m_iP=0;this.m_iState=XMLP._STATE_PROLOG;this.m_stack=[];this.m_attributes={};this.m_emitSynthetic=false};XMLP.closedTags={abbr:true,br:true,col:true,img:true,input:true,link:true,meta:true,param:true,hr:true,area:true,embed:true};XMLP._NONE=0;XMLP._ELM_B=1;XMLP._ELM_E=2;XMLP._ELM_EMP=3;XMLP._ATT=4;XMLP._TEXT=5;XMLP._ENTITY=6;XMLP._PI=7;XMLP._CDATA=8;XMLP._COMMENT=9;XMLP._DTD=10;XMLP._ERROR=11;XMLP._CONT_XML=0;XMLP._CONT_ALT=1;XMLP._ATT_NAME=0;XMLP._ATT_VAL=1;XMLP._STATE_PROLOG=1;XMLP._STATE_DOCUMENT=2;XMLP._STATE_MISC=3;XMLP._errs=[];XMLP._errs[XMLP.ERR_CLOSE_PI=0]="PI: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_DTD=1]="DTD: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_COMMENT=2]="Comment: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_CDATA=3]="CDATA: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_ELM=4]="Element: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_ENTITY=5]="Entity: missing closing sequence";XMLP._errs[XMLP.ERR_PI_TARGET=6]="PI: target is required";XMLP._errs[XMLP.ERR_ELM_EMPTY=7]="Element: cannot be both empty and closing";XMLP._errs[XMLP.ERR_ELM_NAME=8]='Element: name must immediatly follow "<"';XMLP._errs[XMLP.ERR_ELM_LT_NAME=9]='Element: "<" not allowed in element names';XMLP._errs[XMLP.ERR_ATT_VALUES=10]="Attribute: values are required and must be in quotes";XMLP._errs[XMLP.ERR_ATT_LT_NAME=11]='Element: "<" not allowed in attribute names';XMLP._errs[XMLP.ERR_ATT_LT_VALUE=12]='Attribute: "<" not allowed in attribute values';XMLP._errs[XMLP.ERR_ATT_DUP=13]="Attribute: duplicate attributes not allowed";XMLP._errs[XMLP.ERR_ENTITY_UNKNOWN=14]="Entity: unknown entity";XMLP._errs[XMLP.ERR_INFINITELOOP=15]="Infinite loop";XMLP._errs[XMLP.ERR_DOC_STRUCTURE=16]="Document: only comments, processing instructions, or whitespace allowed outside of document element";XMLP._errs[XMLP.ERR_ELM_NESTING=17]="Element: must be nested correctly";XMLP.prototype._checkStructure=function(C){var A=this.m_stack;if(XMLP._STATE_PROLOG==this.m_iState){this.m_iState=XMLP._STATE_DOCUMENT}if(XMLP._STATE_DOCUMENT===this.m_iState){if((XMLP._ELM_B==C)||(XMLP._ELM_EMP==C)){this.m_stack[A.length]=this.getName()}if((XMLP._ELM_E==C)||(XMLP._ELM_EMP==C)){if(A.length===0){return XMLP._NONE}var B=A[A.length-1];this.m_stack.length--;if(B===null||B!==this.getName()){return this._setErr(XMLP.ERR_ELM_NESTING)}}}return C};XMLP.prototype.getColumnNumber=function(){return SAXStrings.getColumnNumber(this.m_xml,this.m_iP)};XMLP.prototype.getContent=function(){return(this.m_cSrc==XMLP._CONT_XML)?this.m_xml:this.m_cAlt};XMLP.prototype.getContentBegin=function(){return this.m_cB};XMLP.prototype.getContentEnd=function(){return this.m_cE};XMLP.prototype.getLineNumber=function(){return SAXStrings.getLineNumber(this.m_xml,this.m_iP)};XMLP.prototype.getName=function(){return this.m_name};XMLP.prototype.next=function(){return this._checkStructure(this._parse())};XMLP.prototype._parse=function(){var C=this.m_iP;var A=this.m_xml;if(C===A.length){return XMLP._NONE}var D=A.charAt(C);if(D==="<"){var B=A.charAt(C+1);if(B==="?"){return this._parsePI(C+2)}else{if(B==="!"){if(C===A.indexOf("<!DOCTYPE",C)){return this._parseDTD(C+9)}else{if(C===A.indexOf("<!--",C)){return this._parseComment(C+4)}else{if(C===A.indexOf("<![CDATA[",C)){return this._parseCDATA(C+9)}}}}else{return this._parseElement(C+1)}}}else{return this._parseText(C)}};(function(){nameRegex=/([^\s\/>]+)/g;attrStartRegex=/\s*([\w:_][\w:_\-\.]*)/gm;attrValRegex=/\"([^\"]*)\"\s*/gm;attrValIERegex=/([^\>\s]+)\s*/gm;closeRegex=/\s*<\//g;XMLP.prototype._parseElement=function(M){var J,D,G;var N,E,A;D=J=this.m_xml.indexOf(">",M);if(J==-1){return this._setErr(XMLP.ERR_CLOSE_ELM)}if(this.m_xml.charAt(M)=="/"){N=XMLP._ELM_E;M++}else{N=XMLP._ELM_B}if(this.m_xml.charAt(J-1)=="/"){if(N==XMLP._ELM_E){return this._setErr(XMLP.ERR_ELM_EMPTY)}N=XMLP._ELM_EMP;D--}nameRegex.lastIndex=M;var K=nameRegex.exec(this.m_xml);if(!K){return this._setErr(XMLP.ERR_ELM_NAME)}E=K[1].toLowerCase();if("li"===E&&N!==XMLP._ELM_E&&this.m_stack.length>0&&this.m_stack[this.m_stack.length-1]==="li"&&!this.m_emitSynthetic){this.m_name="li";this.m_emitSynthetic=true;return XMLP._ELM_E}this.m_attributes={};this.m_cAlt="";if(nameRegex.lastIndex<D){this.m_iP=nameRegex.lastIndex;while(this.m_iP<D){attrStartRegex.lastIndex=this.m_iP;var C=attrStartRegex.exec(this.m_xml);if(!C){return this._setErr(XMLP.ERR_ATT_VALUES)}var H=C[1].toLowerCase();var L;if(this.m_xml.charCodeAt(attrStartRegex.lastIndex)===61){var B=this.m_xml.charCodeAt(attrStartRegex.lastIndex+1)===34?attrValRegex:attrValIERegex;B.lastIndex=attrStartRegex.lastIndex+1;C=B.exec(this.m_xml);if(!C){return this._setErr(XMLP.ERR_ATT_VALUES)}L=C[1]}else{L=H;B=attrStartRegex}if(!this.m_attributes[H]){this.m_attributes[H]=L}else{return this._setErr(XMLP.ERR_ATT_DUP)}this.m_iP=B.lastIndex}}if(E.indexOf("<")!=-1){return this._setErr(XMLP.ERR_ELM_LT_NAME)}this.m_name=E;this.m_iP=J+1;if(XMLP.closedTags[E]){closeRegex.lastIndex=J+1;var F=closeRegex.exec;if(F){var I=this.m_xml.indexOf(E,F.lastIndex);if(I===F.lastIndex){return N}else{return XMLP._ELM_EMP}}}this.m_emitSynthetic=false;return N}})();XMLP.prototype._parseCDATA=function(A){var B=this.m_xml.indexOf("]]>",A);if(B==-1){return this._setErr(XMLP.ERR_CLOSE_CDATA)}this._setContent(XMLP._CONT_XML,A,B);this.m_iP=B+3;return XMLP._CDATA};XMLP.prototype._parseComment=function(A){var B=this.m_xml.indexOf("-->",A);if(B==-1){return this._setErr(XMLP.ERR_CLOSE_COMMENT)}this._setContent(XMLP._CONT_XML,A-4,B+3);this.m_iP=B+3;return XMLP._COMMENT};XMLP.prototype._parseDTD=function(B){var E,A,C,D;E=this.m_xml.indexOf(">",B);if(E==-1){return this._setErr(XMLP.ERR_CLOSE_DTD)}C=this.m_xml.indexOf("[",B);A=((C!=-1)&&(C<E))?"]>":">";while(true){if(E==D){return this._setErr(XMLP.ERR_INFINITELOOP)}D=E;E=this.m_xml.indexOf(A,B);if(E==-1){return this._setErr(XMLP.ERR_CLOSE_DTD)}if(this.m_xml.substring(E-1,E+2)!="]]>"){break}}this.m_iP=E+A.length;return XMLP._DTD};XMLP.prototype._parsePI=function(B){var E,A,D,F,C;E=this.m_xml.indexOf("?>",B);if(E==-1){return this._setErr(XMLP.ERR_CLOSE_PI)}A=SAXStrings.indexOfNonWhitespace(this.m_xml,B,E);if(A==-1){return this._setErr(XMLP.ERR_PI_TARGET)}D=SAXStrings.indexOfWhitespace(this.m_xml,A,E);if(D==-1){D=E}F=SAXStrings.indexOfNonWhitespace(this.m_xml,D,E);if(F==-1){F=E}C=SAXStrings.lastIndexOfNonWhitespace(this.m_xml,F,E);
if(C==-1){C=E-1}this.m_name=this.m_xml.substring(A,D);this._setContent(XMLP._CONT_XML,F,C+1);this.m_iP=E+2;return XMLP._PI};XMLP.prototype._parseText=function(A){var B=this.m_xml.indexOf("<",A);if(B==-1){B=this.m_xml.length}this._setContent(XMLP._CONT_XML,A,B);this.m_iP=B;return XMLP._TEXT};XMLP.prototype._setContent=function(B){var A=arguments;if(XMLP._CONT_XML==B){this.m_cAlt=null;this.m_cB=A[1];this.m_cE=A[2]}else{this.m_cAlt=A[1];this.m_cB=0;this.m_cE=A[1].length}this.m_cSrc=B};XMLP.prototype._setErr=function(B){var A=XMLP._errs[B];this.m_cAlt=A;this.m_cB=0;this.m_cE=A.length;this.m_cSrc=XMLP._CONT_ALT;return XMLP._ERROR};SAXStrings={};SAXStrings.WHITESPACE=" \t\n\r";SAXStrings.QUOTES="\"'";SAXStrings.getColumnNumber=function(D,C){if(!D){return -1}C=C||D.length;var A=D.substring(0,C).split("\n");A.length--;var B=A.join("\n").length;return C-B};SAXStrings.getLineNumber=function(B,A){if(!B){return -1}A=A||B.length;return B.substring(0,A).split("\n").length};SAXStrings.indexOfNonWhitespace=function(E,A,C){if(!E){return -1}A=A||0;C=C||E.length;for(var B=A;B<C;++B){var D=E.charAt(B);if(D!==" "&&D!=="\t"&&D!=="\n"&&D!=="\r"){return B}}return -1};SAXStrings.indexOfWhitespace=function(D,A,C){if(!D){return -1}A=A||0;C=C||D.length;for(var B=A;B<C;B++){if(SAXStrings.WHITESPACE.indexOf(D.charAt(B))!=-1){return B}}return -1};SAXStrings.lastIndexOfNonWhitespace=function(D,A,C){if(!D){return -1}A=A||0;C=C||D.length;for(var B=C-1;B>=A;B--){if(SAXStrings.WHITESPACE.indexOf(D.charAt(B))==-1){return B}}return -1};SAXStrings.replace=function(E,A,D,C,B){if(!E){return""}A=A||0;D=D||E.length;return E.substring(A,D).split(C).join(B)};fluid_1_2=fluid_1_2||{};(function(B,C){C.parseTemplate=function(q,n,W,d,e){e=e||{};var b;var O;var f;var S=0;var L=0;var c=false;var g=-1;var o=-1;var N=e;var n;var V=false;var R=[];var Q=[];XMLLump=function(t,s){return{nestingdepth:s,lumpindex:t,parent:b}};function l(v,s,u){b.rootlump=XMLLump(0,-1);f=[b.rootlump];S=0;L=0;c=false;g=-1;o=-1;n=v;V=s;R=u;if(R){for(var t=0;t<R.length;++t){Q[t]=[];R[t].tree=C.parseSelector(R[t].selector)}}}function a(){for(var s=f.length-1;s>=0;--s){var t=f[s];if(t.rsfID!==undefined){return t}}return b.rootlump}function p(){var s=XMLLump(S,L);if(V){s.line=O.getLineNumber();s.column=O.getColumnNumber()}b.lumps[S]=s;++S;return s}function U(t,s,u){var v=t[s];if(!v){v=[];t[s]=v}v[v.length]=u}function i(s,t){if(s.indexOf("scr=contribute-")!==-1){var u=s.substring("scr=contribute-".length);U(b.collectmap,u,t)}}function T(s){return"<"+s.tagname+">"}function Y(t,s){if(!s){return false}return(" "+s+" ").indexOf(" "+t+" ")!==-1}function J(u,v){if(u.predList){for(var t=0;t<u.predList.length;++t){var s=u.predList[t];if(s.id&&v.attributemap.id!==s.id){return false}if(s.clazz&&!Y(s.clazz,v.attributemap["class"])){return false}if(s.tag&&v.tagname!==s.tag){return false}}return true}}function j(z){var w=undefined;if(R){for(var u=0;u<R.length;++u){var x=R[u];var y=Q[u];var s=y.length;if(s<x.tree.length){var t=x.tree[s];if(s>0){if(x.tree[s-1].child&&y[s-1]!==z.nestingdepth-1){continue}}var v=J(t,z);if(v){y[y.length]=z.nestingdepth;if(y.length===x.tree.length){if(w!==undefined){C.fail("Cutpoint specification error - node "+T(z)+" has already matched with rsf:id of "+w)}if(x.id===undefined||x.id===null){C.fail("Error in cutpoints list - entry at position "+u+" does not have an id set")}w=x.id}}}}}return w}function K(){if(R){for(var s=0;s<R.length;++s){var t=Q[s];if(t.length>0&&t[t.length-1]===L){t.length--}}}}function M(AA,AE){++L;if(c){c=false;var w=p();w.nestingdepth--}if(b.firstdocumentindex===-1){b.firstdocumentindex=S}var z=p();var s=f[f.length-1];z.uplump=s;var AC=O.getName();z.tagname=AC;var AD=z.attributemap=O.m_attributes;var AB=AD[C.ID_ATTRIBUTE];if(AB===undefined){AB=j(z)}for(var v in AD){var y=AD[v];if(AB===undefined){if(/href|src|codebase|action/.test(v)){AB="scr=rewrite-url"}else{if(AB===undefined&&/for|headers/.test(v)){AB="scr=null"}}}}if(AB){if(AB.charCodeAt(0)===126){AB=AB.substring(1);z.elide=true}i(AB,z);z.rsfID=AB;var u=a();if(!u.downmap){u.downmap={}}U(u.downmap,AB,z);U(b.globalmap,AB,z);var t=AB.indexOf(":");if(t!==-1){var x=AB.substring(0,t);if(!s.finallump){s.finallump={}}s.finallump[x]=z}}z.text="<"+AC+C.dumpAttributes(AD)+(AA&&!AB?"/>":">");f[f.length]=z;if(AA){if(AB){P()}else{--L;f.length--}}}function P(){K();var s=p();--L;s.text="</"+O.getName()+">";var t=f[f.length-1];t.close_tag=b.lumps[S-1];f.length--;c=true}function Z(){if(g!==-1){if(b.firstdocumentindex===-1){b.firstdocumentindex=S}var t=O.getContent().substr(g,o-g);c=false;var s=p();s.text=t;g=-1}}b=C.XMLViewTemplate();l(n,e.debugMode,d);var r=q.indexOf(C.ID_ATTRIBUTE);if(W){var k=q.indexOf(">",r);O=new XMLP(q.substring(k+1))}else{O=new XMLP(q)}parseloop:while(true){var m=O.next();switch(m){case XMLP._ELM_B:Z();M(false,"");break;case XMLP._ELM_E:Z();P();break;case XMLP._ELM_EMP:Z();M(true,"");break;case XMLP._PI:case XMLP._DTD:g=-1;continue;case XMLP._TEXT:case XMLP._ENTITY:case XMLP._CDATA:case XMLP._COMMENT:if(g===-1){g=O.m_cB}o=O.m_cE;break;case XMLP._ERROR:C.setLogging(true);var X="Error parsing template: "+O.m_cAlt+" at line "+O.getLineNumber();C.log(X);C.log("Just read: "+O.m_xml.substring(O.m_iP-30,O.m_iP));C.log("Still to read: "+O.m_xml.substring(O.m_iP,O.m_iP+30));C.fail(X);break parseloop;case XMLP._NONE:break parseloop}}Z();var h=f.length-1;if(h){C.fail("Error parsing template - unclosed tag(s) of depth "+(h)+": "+C.transform(f.splice(1,h),function(s){return T(s)}).join(", "))}return b};C.debugLump=function(K){var J=K.text;J+=" at ";J+="lump line "+K.line+" column "+K.column+" index "+K.lumpindex;J+=K.parent.href===null?"":" in file "+K.parent.href;return J};C.ID_ATTRIBUTE="rsf:id";C.getPrefix=function(K){var J=K.indexOf(":");return J===-1?K:K.substring(0,J)};C.SplitID=function(L){var K={};var J=L.indexOf(":");if(J===-1){K.prefix=L}else{K.prefix=L.substring(0,J);K.suffix=L.substring(J+1)}return K};C.XMLViewTemplate=function(){return{globalmap:{},collectmap:{},lumps:[],firstdocumentindex:-1}};C.fetchResources=function(M,P){var Q=function(S){return{success:function(T){S.resourceText=T;S.resourceKey=S.href;S.queued=false;C.fetchResources(M,P)},error:function(T,V,U){S.fetchError={status:T.status,textStatus:T.textStatus,errorThrown:U};S.queued=false;C.fetchResources(M,P)}}};var K=true;for(var O in M){var N=M[O];if(N.href&&!(N.resourceKey||N.fetchError)){if(!N.queued){var J=Q(N);var R={url:N.href,success:J.success,error:J.error};B.extend(true,R,N.options);N.queued=true;B.ajax(R)}if(N.queued){K=false}}else{if(N.nodeId&&!N.resourceText){var L=document.getElementById(N.nodeId);N.resourceText=C.dom.getElementText(L);N.resourceKey=N.nodeId}}}if(K&&!M.callbackCalled){M.callbackCalled=true;if(B.browser.mozilla){setTimeout(function(){P(M)},1)}else{P(M)}}};C.XMLEncode=function(J){return J.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};C.dumpAttributes=function(J){var L="";for(var M in J){var K=J[M];if(K!==null&&K!==undefined){L+=" "+M+'="'+K+'"'}}return L};C.aggregateMMap=function(M,L){for(var J in L){var K=M[J];if(!K){M[J]=[]}M[J]=M[J].concat(L[J])}};C.parseTemplates=function(N,P,J){var L=[];J=J||{};L.globalmap={};for(var O=0;O<P.length;++O){var M=N[P[O]];var Q=M.href.lastIndexOf("/");var K=Q===-1?"":M.href.substring(0,Q+1);var R=C.parseTemplate(M.resourceText,K,J.scanStart&&O===0,M.cutpoints,J);if(O===0){C.aggregateMMap(L.globalmap,R.globalmap)}R.href=M.href;R.baseURL=K;R.resourceKey=M.resourceKey;L[O]=R;C.aggregateMMap(L.globalmap,R.rootlump.downmap)}return L};var E="(?:[\\w\u0128-\uFFFF*_-]|\\\\.)";var D=new RegExp("^>\\s*("+E+"+)");var A=new RegExp("^("+E+"+)(#)("+E+"+)");var H=new RegExp("^s*([#.]?)("+E+"*)");var F=new RegExp("([#.]?)("+E+"+)","g");var G=new RegExp("\\s*(>)?\\s*","g");var I=new RegExp("^\\w*$");C.parseSelector=function(P){var K=[];P=B.trim(P);F.lastIndex=0;var O=0;while(true){var M=[];while(true){var S=F.exec(P);if(!S||S.index!==O){break}var N={};var R=S[2];if(S[1]===""){N.tag=R}else{if(S[1]==="#"){N.id=R}else{if(S[1]==="."){N.clazz=R}}}M[M.length]=N;O=F.lastIndex}G.lastIndex=O;var J={predList:M};var L=G.exec(P);if(!L||L.index!==O){var Q=P.substring(O);C.fail("Error in selector string - can not match child selector expression at "+Q)}if(L[1]===">"){J.child=true}K[K.length]=J;if(G.lastIndex>=P.length){break}O=G.lastIndex;F.lastIndex=G.lastIndex}return K}})(jQuery,fluid_1_2);fluid_1_2=fluid_1_2||{};(function(G,J){function O(P){return"as child of "+(P.parent.fullID?"component with full ID "+P.parent.fullID:"root")}function I(S){var U="";var Q=S;if(S.children===undefined){U=S.ID+(S.localID!==undefined?S.localID:"");Q=S.parent}while(Q.parent){var T=Q.parent;if(Q.fullID!==undefined){U=Q.fullID+U;return U}if(Q.noID===undefined){var P=Q.ID;if(P===undefined){J.fail("Error in component tree - component found with no ID "+O(T)+": please check structure")}var R=P.indexOf(":");var V=R===-1?P:P.substring(0,R);U=V+":"+(Q.localID===undefined?"":Q.localID)+":"+U}Q=T}return U}var L={};L.isBoundPrimitive=function(P){return J.isPrimitive(P)||P instanceof Array&&(P.length===0||typeof (P[0])==="string")};function B(R,Q){if(L.isBoundPrimitive(R)){return{componentType:"UIBound",value:R,ID:Q}}else{var P=F(R);if(P.ID){return{ID:Q,componentType:"UIContainer",children:[P]}}else{P.ID=Q;return P}}}function E(R){if(!(R instanceof Array)){var S=[];for(var Q in R){var T=R[Q];if(T instanceof Array){for(var P=0;P<T.length;++P){var U=B(T[P],Q);S[S.length]=U}}else{S[S.length]=B(T,Q)}}return S}else{return R}}function C(P,Q){if(P.value===undefined&&P.valuebinding!==undefined){if(!Q){J.fail("Cannot perform value fixup for valuebinding "+P.valuebinding+" since no model was supplied to rendering")}P.value=J.model.getBeanValue(Q,P.valuebinding)}}function N(Q,R,P){if(Q[R]!==undefined){if(L.isBoundPrimitive(Q[R])){Q[R]={value:Q[R]}}else{if(Q[R].messagekey){Q[R].componentType="UIMessage"}}}else{Q[R]={value:null}}C(Q[R],P)}var K={children:"UIContainer",value:"UIBound",valuebinding:"UIBound",messagekey:"UIMessage",markup:"UIVerbatim",selection:"UISelect",target:"UILink",choiceindex:"UISelectChoice",functionname:"UIInitBlock"};
L.inferComponentType=function(P){for(var Q in K){if(P[Q]!==undefined){P.componentType=K[Q];break}}if(P.componentType===undefined&&P.ID!==undefined){P.componentType="UIBound"}};function F(S,R){if(S){L.inferComponentType(S)}if(!S||S.componentType===undefined){var Q=S.decorators;if(Q){delete S.decorators}S={componentType:"UIContainer",children:S};S.decorators=Q}var P=S.componentType;if(P==="UIContainer"){S.children=E(S.children)}else{if(P==="UISelect"){N(S,"selection",R);N(S,"optionlist",R);N(S,"optionnames",R)}else{if(P==="UILink"){N(S,"target",R);N(S,"linktext",R)}else{if(P==="UIVerbatim"){N(S,"markup",R)}}}}return S}function H(Q,P){if(Q.submittingname===undefined&&Q.willinput!==false){Q.submittingname=P?P:Q.fullID}return Q.submittingname}function M(Y,V){if(Y.componentType===undefined){Y=F(Y,V)}if(Y.componentType!=="UIContainer"&&!Y.parent){Y={children:[Y]}}if(Y.children){Y.childmap={};for(var U=0;U<Y.children.length;++U){var Q=Y.children[U];if(Q.componentType===undefined){Q=F(Q,V);Y.children[U]=Q}Q.parent=Y;if(Q.ID===undefined){J.fail("Error in component tree: component found with no ID "+O(Q))}Y.childmap[Q.ID]=Q;var S=Q.ID.indexOf(":");if(S===-1){}else{var W=Q.ID.substring(0,S);var P=Y.childmap[W];if(!P){P=[];Y.childmap[W]=P}if(Q.localID===undefined&&P.length!==0){Q.localID=P.length}P[P.length]=Q}Q.fullID=I(Q);var R=Q.componentType;if(R=="UISelect"){Q.selection.fullID=Q.fullID+"-selection"}else{if(R=="UIInitBlock"){var X=Q.functionname+"(";for(var T=0;T<Q.arguments.length;++T){if(Q.arguments[T] instanceof J.ComponentReference){Q.arguments[T]=Q.parent.fullID+Q.arguments[T].reference}X+=JSON.stringify(Q.arguments[T]);if(T<Q.arguments.length-1){X+=", "}}Q.markup={value:X+")\n"};Q.componentType="UIVerbatim"}else{if(R=="UIBound"){C(Q,V)}}}M(Q,V)}}return Y}J.NULL_STRING="\u25a9null\u25a9";var D={a:"href",link:"href",img:"src",frame:"src",script:"src",style:"src",input:"src",embed:"src",form:"action",applet:"codebase",object:"codebase"};J.renderer=function(R,o,y,T){y=y||{};o=o||{};debugMode=y.debugMode;if(!y.messageLocator&&y.messageSource){y.messageLocator=J.resolveMessageSource(y.messageSource)}y.document=y.document||document;var f=T||{};var AC={};var AT={};var AN={};var p={};var q={};var AM="";var z=y;var AJ=[];var h={};var AK={};function AY(Ac,Ab,Ad){return Ac.resourceKey+Ab.fullID+Ad}function n(Ag,Ab,Ad,Ai){var Ah;var Af=Ad?Ad[Ag]:null;if(Af){for(var Ac=0;Ac<Af.length;++Ac){var Ae=Af[Ac];if(!Ah&&Ae.rsfID==Ab){Ah=Ae}if(Ae.rsfID==Ag){return Ae}}}return Ah}function AV(Ae,Ag){var Af=Ag.jointID?Ag.jointID:Ag.ID;var Ad=J.SplitID(Af);var Ab=Ad.prefix+":";var Ac=n(Af,Ab,Ae.downmap,Ag);if(Ac){return Ac}if(Ag.children){Ac=n(Af,Ab,AC,Ag);if(Ac){return Ac}}return null}function l(Ab){if(!p[Ab.href]){J.aggregateMMap(q,Ab.collectmap);p[Ab.href]=true}}function s(Ag,Ad){for(var Ae=0;Ae<Ag.children.length;++Ae){var Ah=Ag.children[Ae];if(Ah.children){var Aj=AV(Ad,Ah);if(Aj){AT[Ah.fullID]=Aj;var Ab=Aj.attributemap.id;if(Ab!==undefined){AN[AY(Ad.parent,Ag,Ab)]=Ah.fullID}l(Aj.parent);s(Ah,Aj)}}}if(Ad.downmap){for(var Ab in Ad.downmap){var Ai=Ad.downmap[Ab];for(var Ae=0;Ae<Ai.length;++Ae){var Af=Ai[Ae];var Ak=Af.attributemap.id;if(Ak!==undefined&&Af.rsfID!==undefined){var Aj=AP(Ag,Af.rsfID);if(Aj!==null){var Ac=Aj.fullID;if(Aj.componentType==="UISelect"){Ac=Ac+"-selection"}AN[AY(Ad.parent,Ag,Ak)]=Ac}}}}}}function m(Ad,Ac,Ab){AT={};AN={};p={};q={};AC=Ad;AT[Ac.fullID]=Ab;s(Ac,Ab)}function AA(Ad,Ab){if(Ab.elide){return }var Ac={};G.extend(true,Ac,Ab.attributemap);e(Ac,Ad);i(Ad,Ac);AM+="<"+Ab.tagname+" ";AM+=J.dumpAttributes(Ac);AM+=">"}function d(Ac,Ae,Ab){for(;Ae<Ab;++Ae){var Ad=Ac[Ae].text;if(Ad){AM+=Ac[Ae].text}}}function AB(Ad,Ag,Ab,Af,Ac){var Ah=Ag;while(true){if(Ag===Ad.length){break}var Ae=Ad[Ag];if(Ae.nestingdepth<Ab){break}if(Ae.rsfID!==undefined){if(!Ac){break}if(Ac&&Ae.nestingdepth>Ab+(Af?0:1)){J.log("Error in component tree - leaf component found to contain further components - at "+Ae.toString())}else{break}}++Ag}if(!Af&&(Ag==Ad.length||!Ad[Ag].rsfID)){--Ag}d(Ad,Ah,Ag);return Ag}var j={};function Y(){if(!j.iselide){AM+="<"+j.uselump.tagname}}function AU(){if(!j.iselide){AM+="</"+j.uselump.tagname+">"}}function AE(){d(j.uselump.parent.lumps,j.uselump.lumpindex+1,j.close.lumpindex+(j.iselide?0:1))}function AL(){if(!j.iselide){AM+=J.dumpAttributes(j.attrcopy)}AI()}function t(){return j.endopen.lumpindex===j.close.lumpindex&&XMLP.closedTags[j.uselump.tagname]}function AR(){if(j.iselide){AL()}else{AM+=J.dumpAttributes(j.attrcopy);var Ab=t();AM+=Ab?"/>":">";j.nextpos=Ab?j.close.lumpindex+1:j.endopen.lumpindex}}function AI(){if(t()){if(!j.iselide){AM+="/>"}}else{if(!j.iselide){AM+=">"}d(j.uselump.parent.lumps,j.endopen.lumpindex,j.close.lumpindex+(j.iselide?0:1))}}function AG(Ab){if(X(Ab)){AZ(Ab)}else{AL()}}function AX(Ab){if(j.iselide){AG(j.value)}else{if(X(Ab)){AZ(Ab)}else{AR()}}}function AZ(Ab){AM+=J.dumpAttributes(j.attrcopy);if(!j.iselide){AM+=">"}AM+=J.XMLEncode(Ab.toString());AU()}function X(Ab){return Ab!==null&&Ab!==undefined&&!W(Ab)}function W(Ab){return false}function P(Ad,Ab){if(z.urlRewriter){var Ae=z.urlRewriter(Ab);if(Ae){return Ae}}if(!z.rebaseURLs){return Ab}var Ac=Ab.indexOf(":/");if(Ab.charAt(0)==="/"||Ac!==-1&&Ac<7){return Ab}else{return z.baseURL+Ab}}function AW(Ad){AM+='<input type="hidden" ';var Ac=Ad.virtual;var Ab={};Ab[Ac?"id":"name"]=Ad.name;Ab.value=Ad.value;AM+=J.dumpAttributes(Ab);AM+=" />\n"}function S(Ab,Ac){var Ag=j.uselump.tagname;var Ae=z.applier;function Af(){J.applyChange(J.byId(Ac),undefined,Ae)}if(z.autoBind&&/input|select|textarea/.test(Ag)&&!h[Ac]){var Ad=[{jQuery:["change",Af]}];if(G.browser.msie&&Ag==="input"&&/radio|checkbox/.test(j.attrcopy.type)){Ad.push({jQuery:["click",Af]})}if(G.browser.safari&&Ag==="input"&&j.attrcopy.type==="radio"){Ad.push({jQuery:["keyup",Af]})}v(Ab,Ad,j.attrcopy,Ac)}}function k(Ab,Ad){if(Ab){var Ac=Ad?Ad:Ab;if(f&&Ac.submittingname&&Ac.valuebinding){f[Ac.submittingname]={name:Ac.submittingname,EL:Ac.valuebinding,oldvalue:Ac.value};S(Ab,Ab.fullID)}if(Ab.fossilizedbinding){AW(Ab.fossilizedbinding)}if(Ab.fossilizedshaper){AW(Ab.fossilizedshaper)}}}function c(Ab){if(!h[Ab.selection.fullID]){h[Ab.selection.fullID]=true;k(Ab.selection);k(Ab.optionlist);k(Ab.optionnames)}}function x(Ab,Ad){var Ac=Ab.selection;return Ac.value&&typeof (Ac.value)!=="string"&&typeof (Ac.value.length)==="number"?G.inArray(Ad,Ac.value,Ad)!==-1:Ac.value===Ad}function AO(Ab,Ac){Ab=Ab.parent;while(Ac.indexOf("..::")===0){Ac=Ac.substring(4);Ab=Ab.parent}return Ab.childmap[Ac]}function AS(Ac){var Ae=[];if(Ac.type){Ae[0]=Ac}else{for(var Ad in Ac){if(Ad==="$"){Ad="jQuery"}var Af=Ac[Ad];var Ab={type:Ad};if(Ad==="jQuery"){Ab.func=Af[0];Ab.args=Af.slice(1)}else{if(Ad==="addClass"||Ad==="removeClass"){Ab.classes=Af}else{if(Ad==="attrs"){Ab.attributes=Af}else{if(Ad==="identify"){Ab.key=Af}}}}Ae[Ae.length]=Ab}}return Ae}function v(Af,Aj,Ac,Ah){z.idMap=z.idMap||{};for(var Ae=0;Ae<Aj.length;++Ae){var Ad=Aj[Ae];var Ag=Ad.type;if(!Ag){var Ai=AS(Ad);v(Af,Ai,Ac,Ah);continue}if(Ag==="$"){Ag=Ad.type="jQuery"}if(Ag==="jQuery"||Ag==="event"||Ag==="fluid"){var Ab=e(Ac,Af,true,Ah);Ad.id=Ab;AJ[AJ.length]=Ad}else{if(Ag==="attrs"){G.extend(true,Ac,Ad.attributes)}else{if(Ag==="addClass"||Ag==="removeClass"){var Ak={nodeType:1,className:Ac["class"]||""};G(Ak)[Ag](Ad.classes);Ac["class"]=Ak.className}else{if(Ag==="identify"){var Ab=e(Ac,Af,true,Ah);z.idMap[Ad.key]=Ab}else{J.log("Unrecognised decorator of type "+Ag+" found at component of ID "+Ah)}}}}}}function i(Ab,Ac){if(!Ab.decorators){return }if(Ab.decorators.length===undefined){Ab.decorators=AS(Ab.decorators)}v(Ab,Ab.decorators,Ac)}function AF(Ab){if(!Ab){return Ab}return J.transform(Ab,function(Ac,Ad){N(Ab,Ad,z.model);return Ab[Ad].value})}function AQ(Ac){if(Ac.componentType==="UIMessage"){Ac.componentType="UIBound";if(!z.messageLocator){Ac.value="[No messageLocator is configured in options - please consult documentation on options.messageSource]"}else{N(Ac,"messagekey",z.model);var Ab=AF(Ac.args);Ac.value=z.messageLocator(Ac.messagekey.value,Ab)}}}function r(Ao){var Ag=j.attrcopy;var Ab=j.uselump.parent.lumps;var Ai=j.uselump.lumpindex;AQ(Ao);var Am=Ao.componentType;var Ar=j.uselump.tagname;i(Ao,Ag);function Ad(Av,Aw){J.fail("Error in component tree - UISelectChoice with id "+Av.fullID+Aw)}if(Am==="UIBound"||Am==="UISelectChoice"){var Aj;if(Ao.choiceindex!==undefined){if(Ao.parentFullID){Aj=getAbsoluteComponent(view,Ao.parentFullID);if(!Aj){Ad(Ao," has parentFullID of "+Ao.parentFullID+" which cannot be resolved")}}else{if(Ao.parentRelativeID!==undefined){Aj=AO(Ao,Ao.parentRelativeID);if(!Aj){Ad(Ao," has parentRelativeID of "+Ao.parentRelativeID+" which cannot be resolved")}}else{Ad(Ao," does not have either parentFullID or parentRelativeID set")}}H(Aj.selection);c(Aj)}var Af=Aj?Aj.selection.submittingname:Ao.submittingname;if(Ar==="input"||Ar==="textarea"){if(!Aj){Af=H(Ao)}if(Af!==undefined){Ag.name=Af}}k(Ao,Aj?Aj.selection:null);if(typeof (Ao.value)==="boolean"||Ag.type==="radio"||Ag.type==="checkbox"){var Ah;var Aq=Ao.value;if(Ao.choiceindex!==undefined){if(!Aj.optionlist.value){J.fail("Error in component tree - selection control with full ID "+Aj.fullID+" has no values")}Ah=Aj.optionlist.value[Ao.choiceindex];Aq=x(Aj,Ah)}if(X(Aq)){if(Aq){Ag.checked="checked"}else{delete Ag.checked}}Ag.value=Ah?Ah:"true";AG(null)}else{if(Ao.value instanceof Array){AE()}else{var An=Aj?Aj[Ar==="textarea"||Ar==="input"?"optionlist":"optionnames"].value[Ao.choiceindex]:Ao.value;if(Ar==="textarea"){if(W(An)&&Ao.willinput){An=""}AG(An)}else{if(Ar==="input"){if(Ao.willinput||X(An)){Ag.value=An}AG(null)}else{delete Ag.name;AX(An)}}}}}else{if(Am==="UISelect"){S(Ao,Ao.selection.fullID);var Au=Ar==="select";var Ae=false;if(Ao.selection.value instanceof Array){Ae=true;if(Au){Ag.multiple="multiple"}}H(Ao.selection,Ag.id);if(Au){if(Ao.selection.willinput!==false){Ag.name=Ao.selection.submittingname}}AM+=J.dumpAttributes(Ag);if(Au){AM+=">";var Ac=Ao.optionlist.value;var Al=Ao.optionnames===null||Ao.optionnames===undefined||!Ao.optionnames.value?Ac:Ao.optionnames.value;
if(!Al||!Al.length){J.fail("Error in component tree - UISelect component with fullID "+Ao.fullID+" does not have optionnames set")}for(var Ap=0;Ap<Al.length;++Ap){AM+='<option value="';var An=Ac[Ap];if(An===null){An=J.NULL_STRING}AM+=J.XMLEncode(An);if(x(Ao,An)){AM+='" selected="selected'}AM+='">';AM+=J.XMLEncode(Al[Ap]);AM+="</option>\n"}AU()}else{AI()}c(Ao)}else{if(Am==="UILink"){var Ak=D[Ar];if(Ak){AQ(Ao.target);var At=Ao.target.value;if(!X(At)){At=Ag[Ak]}At=P(j.uselump.parent,At);Ag[Ak]=At}var An;if(Ao.linktext){AQ(Ao.linktext);var An=Ao.linktext.value}if(!X(An)){AR()}else{AG(An)}}else{if(Ao.markup!==undefined){AQ(Ao.markup);var As=Ao.markup.value;if(As===null){AM+=J.dumpAttributes(Ag);AM+=">";AE()}else{if(!j.iselide){AM+=J.dumpAttributes(Ag);AM+=">"}AM+=As;AU()}}else{}}}}}function e(Ae,Ad,Ac,Ag){if(!Ac){delete Ae["rsf:id"]}if(Ag!==undefined){Ae.id=Ag}else{if(Ae.id||Ac){Ae.id=Ad.fullID}}var Af=1;var Ab=Ae.id;while(z.document.getElementById(Ae.id)){Ae.id=Ab+"-"+(Af++)}return Ae.id}function V(Ab){var Af;var Ad=j.attrcopy["for"];if(Ad!==undefined){Af="for"}else{Ad=j.attrcopy.headers;if(Ad!==undefined){Af="headers"}}if(!Af){return }var Ae=j.uselump.tagname;if(Af==="for"&&Ae!=="label"){return }if(Af==="headers"&&Ae!=="td"&&Ae!=="th"){return }var Ac=AN[AY(j.uselump.parent,Ab,Ad)];if(Ac!==undefined){j.attrcopy[Af]=Ac}}function AH(Ab){AM+=("<!-- "+J.XMLEncode(Ab)+"-->")}function Z(Ab){AM+='<span style="background-color:#FF466B;color:white;padding:1px;">';AM+=Ab;AM+="</span><br/>"}function w(Ab){var Ac=Ab.fullID;return !Ac?"component tree root":"full path "+Ac}function g(Ac,Al,Ah){var Aj=Ah.lumpindex;var Ap=Ah.parent.lumps;var Ai=-1;var Ak=Ap[Aj+1];var Ab=Ah.close_tag;Ai=Ab.lumpindex+1;var Ag=Ah.downmap?Ah.downmap["payload-component"]:null;var Ao=Ag?Ag[0]:null;var An=Ah.rsfID.charCodeAt(0)===126;var Af=Ak;var Aq=Ab;var Ae=Ah;var Ad={};G.extend(true,Ad,(Ao===null?Ah:Ao).attributemap);j.attrcopy=Ad;j.uselump=Ae;j.endopen=Af;j.close=Aq;j.nextpos=Ai;j.iselide=An;V(Ac);if(Al===null){if(Ah.rsfID.indexOf("scr=")===(An?1:0)){var Am=Ah.rsfID.substring(4+(An?1:0));if(Am==="ignore"){Ai=j.close.lumpindex+1}else{if(Am==="rewrite-url"){Al={componentType:"UILink",target:{}}}else{Y();AR();Ai=j.endopen.lumpindex}}}}if(Al!==null){if(Ao){j.endopen=Ap[Ao.lumpindex+1];j.close=Ao.close_tag;j.uselump=Ao;d(Ap,Aj,Ao.lumpindex);Aj=Ao.lumpindex}e(Ad,Al);Y();r(Al);if(Ao!==null){if(j.nextpos===Ai){d(Ap,j.close.lumpindex+1,Ab.lumpindex+1)}}Ai=j.nextpos}return Ai}function b(Ae,Ab){var Ad=Ab.parent;var Ac=Ad.lumps[Ab.lumpindex+1];if(Ae.children!==undefined){AA(Ae,Ab)}else{g(Ae.parent,Ae,Ab)}AD(Ae,Ab,Ac)}function AP(Ae,Af,Ad){if(Af.indexOf("msg=")===0){var Ab=Af.substring(4);return{componentType:"UIMessage",messagekey:Ab}}while(Ae){var Ac=Ae.childmap[Af];if(Ac){return Ac}Ae=Ae.parent}return null}function Aa(Ac,Ad){var Ab;while(Ac){Ab=Ac.childmap[Ad];if(Ab){break}Ac=Ac.parent}return Ab}function u(Ad,Ae){var Ac=J.SplitID(Ae.ID);var Ab=Ad.downmap[Ae.ID];if(Ab===null){Ab=Ad.downmap[Ac.prefix+":"]}return Ab===null?null:Ab[0]}function AD(Ag,Av,Am){var Ap=Am.lumpindex;var As=Av.nestingdepth;var Ah=Av.parent;if(debugMode){var At={}}while(true){Ap=AB(Ah.lumps,Ap,As,!Av.elide,false);if(Ap===Ah.lumps.length){break}var Ak=Ah.lumps[Ap];var Al=Ak.rsfID;if(Ak.nestingdepth<As||Al===undefined){break}if(Al.charCodeAt(0)===126){Al=Al.substring(1)}if(Al.indexOf(":")!==-1){var An=J.getPrefix(Al);var Ab=Aa(Ag,An);var Ad=Ak.uplump.finallump[An];var Ae=Ad.close_tag;if(Ab){for(var Ao=0;Ao<Ab.length;++Ao){var Ac=Ab[Ao];if(Ac.children){if(debugMode){At[Ac.fullID]=true}var Aq=AT[Ac.fullID];if(Aq){if(debugMode){AH("Branching for "+Ac.fullID+" from "+J.debugLump(Ak)+" to "+J.debugLump(Aq))}b(Ac,Aq);if(debugMode){AH("Branch returned for "+Ac.fullID+J.debugLump(Ak)+" to "+J.debugLump(Aq))}}else{if(debugMode){Z("No matching template branch found for branch container with full ID "+Ac.fullID+" rendering from parent template branch "+J.debugLump(Am))}}}else{var Aq=u(Av,Ac);if(!Aq){if(debugMode){Z("Repetitive leaf with full ID "+Ac.fullID+" could not be rendered from parent template branch "+J.debugLump(Am))}continue}var Ar=g(Ag,Ac,Aq);var Aj=Ar<Ah.lumps.lengtn&&Ah.lumps[Ar].nestingdepth>=Aq.nestingdepth;var Af=Ac.children?Ac:Ag;if(Aj){AD(Af,Aq,Ah.lumps[Ar]);Ar=Aq.close_tag.lumpindex+1}if(Ao!==Ab.length-1){if(Ar<Ae.lumpindex){AB(Ah.lumps,Ar,Aq.nestingdepth-1,false,false)}}else{AB(Ah.lumps,Ar,Aq.nestingdepth,true,false)}}}}else{if(debugMode){Z("No branch container with prefix "+An+": found in container "+w(Ag)+" rendering at template position "+J.debugLump(Am)+", skipping")}}Ap=Ae.lumpindex+1;if(debugMode){AH("Stack returned from branch for ID "+Al+" to "+J.debugLump(Am)+": skipping from "+J.debugLump(Ak)+" to "+J.debugLump(Ae))}}else{var Ai;if(Al){Ai=AP(Ag,Al,Ak);if(debugMode&&Ai){At[Ai.fullID]=true}}if(Ai&&Ai.children!==undefined){b(Ai);Ap=Ak.close_tag.lumpindex+1}else{Ap=g(Ag,Ai,Ak)}}if(Ap===Ah.lumps.length){break}}if(debugMode){var Ab=Ag.children;for(var Au=0;Au<Ab.length;++Au){var Ac=Ab[Au];if(!At[Ac.fullID]){Z("Component "+Ac.componentType+" with full ID "+Ac.fullID+" could not be found within template "+J.debugLump(Am))}}}}function U(Ab){d(Ab.parent.lumps,Ab.lumpindex,Ab.close_tag.lumpindex+1)}function Q(){for(var Ad in q){var Ab=q[Ad];for(var Ac=0;Ac<Ab.length;++Ac){U(Ab[Ac])}}}function a(){for(var Ae=0;Ae<AJ.length;++Ae){var Ab=AJ[Ae];var Ag=J.byId(Ab.id,z.document);if(!Ag){J.fail("Error during rendering - component with id "+Ab.id+" which has a queued decorator was not found in the output markup")}if(Ab.type==="jQuery"){var Ad=G(Ag);Ad[Ab.func].apply(Ad,G.makeArray(Ab.args))}else{if(Ab.type==="fluid"){var Ac=Ab.args;if(!Ac){if(!Ab.container){Ab.container=Ag}Ac=[Ab.container,Ab.options]}var Af=J.invokeGlobalFunction(Ab.func,Ac,J);Ab.that=Af}else{if(Ab.type==="event"){Ag[Ab.event]=Ab.handler}}}}}AK.renderTemplates=function(){o=M(o,y.model);var Ab=R[0];m(R.globalmap,o,Ab.rootlump);h={};Q();AD(o,Ab.rootlump,Ab.lumps[Ab.firstdocumentindex]);return AM};AK.processDecoratorQueue=function(){a()};return AK};jQuery.extend(true,J.renderer,L);J.ComponentReference=function(P){this.reference=P};J.explode=function(S,P){var R=[];for(var Q in S){var T=P===undefined?Q:P+"."+Q;R[R.length]={ID:Q,value:S[Q],valuebinding:T}}return R};J.explodeSelectionToInputs=function(P,Q){return J.transform(P,function(S,R){return{ID:Q.rowID,children:[{ID:Q.inputID,parentRelativeID:"..::"+Q.selectID,choiceindex:R},{ID:Q.labelID,parentRelativeID:"..::"+Q.selectID,choiceindex:R}]}})};J.messageLocator=function(Q,P){P=P||J.stringTemplate;return function(R,S){if(typeof (R)==="string"){R=[R]}for(var T=0;T<R.length;++T){var V=R[T];var U=Q[V];if(U===undefined){continue}return P(U,S)}return"[Message string for key "+R[0]+" not found]"}};J.resolveMessageSource=function(P){if(P.type==="data"){if(P.url===undefined){return J.messageLocator(P.messages,P.resolveFunc)}else{}}};J.renderTemplates=function(S,P,Q,R){var T=J.renderer(S,P,Q,R);var U=T.renderTemplates();return U};J.reRender=function(W,R,Y,X){X=X||{};R=J.unwrap(R);var T=J.getLastFocusedElement?J.getLastFocusedElement():null;var P;if(T&&J.dom.isContainer(R,T)){P=T.id}if(G.browser.msie){G(R).empty()}else{R.innerHTML=""}var U={};var V=J.renderer(W,Y,X,U);var Q=V.renderTemplates();if(X.renderRaw){Q=J.XMLEncode(Q);Q=Q.replace(/\n/g,"<br/>")}if(X.model){J.bindFossils(R,X.model,U)}if(G.browser.msie){G(R).html(Q)}else{R.innerHTML=Q}V.processDecoratorQueue();if(P){var S=J.byId(P);if(S){G(S).focus()}}return W};function A(P){var Q=J.dom.iterateDom(P,function(S){return S.nodeType===8||S.nodeType===4?"stop":null},true);var R=Q.nodeValue;if(R.indexOf("[CDATA[")===0){return R.substring(6,R.length-2)}else{return R}}J.extractTemplate=function(Q,P){if(!P){return Q.innerHTML}else{return A(Q)}};J.render=function(U,V,P,R){R=R||{};var T=U;if(typeof (U)==="object"){T=J.extractTemplate(J.unwrap(U.node),U.armouring)}V=J.unwrap(V);var Q={base:{resourceText:T,href:".",resourceKey:".",cutpoints:R.cutpoints}};var S=J.parseTemplates(Q,["base"],R);return J.reRender(S,V,P,R)};J.selfRender=function(R,P,Q){Q=Q||{};return J.render({node:R,armouring:Q.armouring},R,P,Q)}})(jQuery,fluid_1_2);fluid_1_2=fluid_1_2||{};(function(D,B){var F=function(H){var G=D("<a name='"+H.text()+"' />",H[0].ownerDocument);H.before(G)};var E=function(H){var G={ID:H,children:[]};return G};var A=function(K,J){var I=function(M,L,S){if(L.length===0){return }var P=L[0];if(S===P.level){M[M.length-1].push(P.leaf);L.shift();return I(M,L,S)}if(S<P.level){var Q=S>-1?"level"+(S+1)+":":"";var R=S===-1?"s:":"s";var N=Q+"level"+(S+2)+R;var O=E(N);M[M.length-1].push(O);M.push(O.children);return I(M,L,S+1)}if(S>P.level){M.pop();return I(M,L,S-1)}};var G={children:[]};var H=B.transform(K,function(L){var N=D.inArray(L.tagName,J);var M=D(L).text();return{level:N,leaf:{ID:"level"+(N+1)+":item",children:[{ID:"link",linktext:M,target:"#"+M}]}}});I([G.children],H,-1);return G};var C=function(G,K,H,J,L){K.each(function(M,N){F(D(N))});var I={toc:{href:J}};B.fetchResources(I,function(){var M=B.parseTemplates(I,["toc"],{});var N=D("<div></div>",G[0].ownerDocument);B.reRender(M,N,A(K,H),{});G.prepend(N);L.fire(N)})};B.tableOfContents=function(G,H){var I=B.initView("fluid.tableOfContents",G,H);I.events.afterRender.addListener(function(J){I.tocNode=D(J)});C(I.container,I.locate("headings"),I.options.levels,I.options.templateUrl,I.events.afterRender);I.hide=function(){if(I.tocNode){I.tocNode.hide()}};I.show=function(){if(I.tocNode){I.tocNode.show()}};return I};B.defaults("fluid.tableOfContents",{selectors:{headings:":header"},events:{afterRender:null},templateUrl:"../html/TableOfContents.html",levels:["H1","H2","H3","H4","H5","H6"]})})(jQuery,fluid_1_2);if(!this.JSON){JSON=function(){function f(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};
function stringify(value,whitelist){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+value+'"';case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}if(typeof value.toJSON==="function"){return stringify(value.toJSON())}a=[];if(typeof value.length==="number"&&!(value.propertyIsEnumerable("length"))){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i],whitelist)||"null")}return"["+a.join(",")+"]"}if(whitelist){l=whitelist.length;for(i=0;i<l;i+=1){k=whitelist[i];if(typeof k==="string"){v=stringify(value[k],whitelist);if(v){a.push(stringify(k)+":"+v)}}}}else{for(k in value){if(typeof k==="string"){v=stringify(value[k],whitelist);if(v){a.push(stringify(k)+":"+v)}}}}return"{"+a.join(",")+"}"}}return{stringify:stringify,parse:function(text,filter){var j;function walk(k,v){var i,n;if(v&&typeof v==="object"){for(i in v){if(Object.prototype.hasOwnProperty.apply(v,[i])){n=walk(i,v[i]);if(n!==undefined){v[i]=n}}}}return filter(k,v)}if(/^[\],:{}\s]*$/.test(text.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(:?[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof filter==="function"?walk("",j):j}throw new SyntaxError("parseJSON")}}}()}fluid_1_2=fluid_1_2||{};(function(D,F){var J=function(Q,P,S,R){R=R||"";D(P,Q).andSelf().each(function(U){var T=(D.browser.msie===false)?"class":"className";if(this.getAttribute(T)){this.setAttribute(T,this.getAttribute(T).replace(S,R))}})};var N=function(R,Q,T,U){var P=U[Q]||{};var S=P[T];if(S){R.addClass(S)}};var O=function(P){return P&&(P===true||P==="true")};var H=function(P,Q){if(O(Q)){if(P.tableOfContents){P.tableOfContents.show()}else{P.tableOfContents=F.initSubcomponent(P,"tableOfContents",[P.container,F.COMPONENT_OPTIONS])}}else{if(P.tableOfContents){P.tableOfContents.hide()}}};var B=function(P,Q){Q=Q&&Q>0?Q:1;P.css("line-height",Q+"em")};var K=function(P,Q){if(Q&&Q>0){P.css("font-size",Q+"pt");J(P,"[class*=fl-font-size-]",/\bfl-font-size-[0-9]{1,2}\s+/g,"fl-font-size-100")}else{P.css("font-size","")}};var E=function(P,Q,R){N(P,"textFont",Q.textFont,R);N(P,"textSpacing",Q.textSpacing,R);N(P,"theme",Q.theme,R);N(P,"layout",Q.layout,R)};var M=function(Q,P,R){if(P){Q.addClass(R)}else{Q.removeClass(R)}};var A=function(P,R,S){var Q=D("a",P);M(Q,R.linksUnderline,S.linksUnderline);M(Q,R.linksBold,S.linksBold);M(Q,R.linksLarger,S.linksLarger)};var L=function(P,Q,R){M(D("input",P),Q.inputsLarger,R.inputsLarger)};var C=function(P){if(P.options.savedSettings){P.model=P.options.savedSettings;return }P.model=P.settingsStore.fetch()||F.copy(P.defaultSiteSettings)};var G=function(P,Q){var S=["textFont","textSpacing","theme","layout"];var X="fl-noBackgroundImages";var V=".fl-noBackgroundImages";for(var W=0;W<S.length;W++){var T=Q[S[W]];for(var R in T){var U=T[R];if(U){X=X+" "+U;V=V+",."+U}}}D(V,P).removeClass(X);return X};var I=function(P){P.settingsStore=F.initSubcomponent(P,"settingsStore",[F.COMPONENT_OPTIONS]);C(P);P.refreshView()};F.uiEnhancer=function(S,Q){S=S||document;var R=F.initView("fluid.uiEnhancer",S,Q);D(S).data("uiEnhancer",R);R.container=D("body",S);R.defaultSiteSettings=R.options.defaultSiteSettings;var P;R.refreshView=function(){R.container.removeClass(P);E(R.container,R.model,R.options.classnameMap);M(R.container,!O(R.model.backgroundImages),R.options.classnameMap.noBackgroundImages);K(R.container,R.model.textSize);B(R.container,R.model.lineSpacing);H(R,R.model.toc);A(R.container,R.model,R.options.classnameMap);L(R.container,R.model,R.options.classnameMap)};R.updateModel=function(T,U){R.events.modelChanged.fire(T,R.model,U);F.clear(R.model);F.model.copyModel(R.model,T);R.settingsStore.save(R.model);R.refreshView()};P=G(R.container,R.options.classnameMap);I(R);return R};F.defaults("fluid.uiEnhancer",{tableOfContents:{type:"fluid.tableOfContents",options:{templateUrl:"../../tableOfContents/html/TableOfContents.html"}},settingsStore:{type:"fluid.uiEnhancer.cookieStore"},events:{modelChanged:null},classnameMap:{textFont:{serif:"fl-font-serif",sansSerif:"fl-font-sans",arial:"fl-font-arial",verdana:"fl-font-verdana",monospace:"fl-font-monospace",courier:"fl-font-courier",times:"fl-font-times"},textSpacing:{"default":"",wide0:"fl-font-spacing-0",wide1:"fl-font-spacing-1",wide2:"fl-font-spacing-2",wide3:"fl-font-spacing-3",wide4:"fl-font-spacing-4",wide5:"fl-font-spacing-5",wide6:"fl-font-spacing-6"},theme:{mist:"fl-theme-mist",rust:"fl-theme-rust",highContrast:"fl-theme-hc",highContrastInverted:"fl-theme-hci",lowContrast:"fl-theme-slate",mediumContrast:"fl-theme-coal","default":""},layout:{simple:"fl-layout-linear","default":""},noBackgroundImages:"fl-noBackgroundImages",linksUnderline:"fl-text-underline",linksBold:"fl-text-bold",linksLarger:"fl-text-larger",inputsLarger:"fl-text-larger"},defaultSiteSettings:{textFont:"",textSpacing:"",theme:"default",layout:"default",textSize:"",lineSpacing:"",backgroundImages:true,toc:false,linksUnderline:false,linksBold:false,linksLarger:false,inputsLarger:false}});F.uiEnhancer.cookieStore=function(P){var Q={};F.mergeComponentOptions(Q,"fluid.uiEnhancer.cookieStore",P);Q.fetch=function(){var S=document.cookie;var R=Q.options.cookieName+"=";var U,V,T;if(S.length>0){V=S.indexOf(R);if(V>-1){V=V+R.length;T=S.indexOf(";",V);if(T<V){T=S.length}U=JSON.parse(decodeURIComponent(S.substring(V,T)))}}return U};Q.save=function(R){document.cookie=Q.options.cookieName+"="+encodeURIComponent(JSON.stringify(R))};return Q};F.defaults("fluid.uiEnhancer.cookieStore",{cookieName:"fluid-ui-settings"});F.uiEnhancer.tempStore=function(P){var Q={};Q.model=null;Q.fetch=function(){return Q.model};Q.save=function(R){Q.model=R};return Q}})(jQuery,fluid_1_2);fluid_1_2=fluid_1_2||{};(function(G,E){var H=function(I,K){var J={role:"slider","aria-valuenow":K.value,"aria-valuemin":K.min,"aria-valuemax":K.max};I.attr(J)};var F=function(J){var K=J.options.sliderOptions;K.value=J.model;K.min=J.min;K.max=J.max;var I=J.locate("slider").slider(K);H(J.locate("thumb"),K);return I};var A=function(K,J,I){I.bind("slide",function(M,L){J.val(L.value);K.updateModel(L.value,I)})};var C=function(K,J){var I=K.locate("textfield");I.val(K.model);return I};var B=function(K,J,I){J.change(function(){if(K.isValid(this.value)){if(!K.isInRange(this.value)){this.value=(this.value<K.min)?K.min:K.max}I.slider("value",this.value);K.updateModel(this.value,this)}else{this.value=K.model}});J.keypress(function(L){if(L.keyCode!==G.ui.keyCode.ENTER){return true}else{G(L.target).change();G(E.findForm(L.target)).submit();return false}})};var D=function(K){var J=F(K);var I=C(K,J);A(K,I,J);B(K,I,J)};E.textfieldSlider=function(I,J){var K=E.initView("fluid.textfieldSlider",I,J);K.model=K.options.value||K.locate("textfield").val();K.min=K.options.min;K.max=K.options.max;K.isInRange=function(L){return(L>=K.min&&L<=K.max)};K.isValid=function(L){return !(isNaN(parseInt(L,10))||isNaN(L))};K.updateModel=function(L,M){if(K.isInRange(L)){K.events.modelChanged.fire(L,K.model,M);K.model=L;K.locate("thumb").attr("aria-valuenow",K.model)}};D(K);return K};E.defaults("fluid.textfieldSlider",{selectors:{textfield:".flc-textfieldSlider-field",slider:".flc-textfieldSlider-slider",thumb:".ui-slider-handle"},events:{modelChanged:null},sliderOptions:{orientation:"horizontal"},min:0,max:100,value:null})})(jQuery,fluid_1_2);(function(D,G){var J=function(P,M,N,O){return{ID:P,selection:{valuebinding:M},optionlist:{valuebinding:N},optionnames:{valuebinding:O}}};var A=function(N,M){return{ID:N,valuebinding:M}};var K=function(P,R){var O=[];O.push(J("text-font","selections.textFont","labelMap.textFont.values","labelMap.textFont.names"));O.push(J("text-spacing","selections.textSpacing","labelMap.textSpacing.values","labelMap.textSpacing.names"));O.push(J("theme","selections.theme","labelMap.theme.values","labelMap.theme.names"));var N={selectID:"background-images",rowID:"background-images-row:",inputID:"background-images-choice",labelID:"background-images-label"};O.push(J("background-images","selections.backgroundImages","labelMap.backgroundImages.values","labelMap.backgroundImages.names"));O=O.concat(G.explodeSelectionToInputs(P.options.controlValues.backgroundImages,N));var Q={selectID:"layout",rowID:"layout-row:",inputID:"layout-choice",labelID:"layout-label"};O.push(J("layout","selections.layout","labelMap.layout.values","labelMap.layout.names"));O=O.concat(G.explodeSelectionToInputs(P.options.controlValues.layout,Q));var M={selectID:"toc",rowID:"toc-row:",inputID:"toc-choice",labelID:"toc-label"};O.push(J("toc","selections.toc","labelMap.toc.values","labelMap.toc.names"));O=O.concat(G.explodeSelectionToInputs(P.options.controlValues.layout,M));O.push(A("links-underline","selections.linksUnderline"));O.push(A("links-bold","selections.linksBold"));O.push(A("links-larger","selections.linksLarger"));O.push(A("inputs-larger","selections.inputsLarger"));return{children:O}};var H=function(N){var O=N.locate("save");O.click(N.save);N.locate("reset").click(N.reset);N.locate("cancel").click(N.cancel);var M=G.findForm(O);D(M).submit(function(){N.save()})};var I=function(M){var O=M.locate("previewFrame");var N;M.events.modelChanged.addListener(function(P){setTimeout(function(){if(N){N.updateModel(P)}},0)});O.load(function(){var P=O.contents();var Q={savedSettings:M.model,tableOfContents:M.uiEnhancer.options.tableOfContents,settingsStore:{type:"fluid.uiEnhancer.tempStore"}};N=G.uiEnhancer(P,Q)})};var E=function(M){var O={};for(var N in M.controlValues){O[N]={names:M.strings[N],values:M.controlValues[N]}}return O};var C=function(N){N.model.toc=String(N.model.toc);N.model.backgroundImages=String(N.model.backgroundImages);var M=G.assembleModel({selections:{model:N.model,applier:N.applier},labelMap:{model:E(N.options)}});
return{model:M.model,applier:M.applier,autoBind:true}};var F=function(O){var N=function(P){return{listeners:{modelChanged:function(Q){O.applier.requestChange(P,Q)}},value:O.model[P]}};var M=N("textSize");G.merge(null,M,O.options.textMinSize.options);G.initSubcomponents(O,"textMinSize",[O.options.selectors.textMinSizeCtrl,M]);M=N("lineSpacing");G.merge(null,M,O.options.lineSpacing.options);G.initSubcomponents(O,"lineSpacing",[O.options.selectors.lineSpacingCtrl,M])};var B=function(O,S){for(var P in O.controlValues){var Q=String(S[P]);var M=O.controlValues[P];if(Q){var N=D.inArray(Q,M);if(N===-1){var R=D.inArray("default",M);if(R===-1){M.push(Q)}else{M[R]=Q}}}}};var L=function(N){N.applier.modelChanged.addListener("*",function(P,R,Q){N.events.modelChanged.fire(P,R,Q.source)});B(N.options,N.uiEnhancer.defaultSiteSettings);N.events.afterRender.addListener(function(){F(N);H(N);I(N)});var O=C(N);var M=G.selfRender(N.container,K(N,O.model),O);N.events.afterRender.fire();return M};G.uiOptions=function(M,O){var Q=G.initView("fluid.uiOptions",M,O);Q.uiEnhancer=D(document).data("uiEnhancer");Q.model=G.copy(Q.uiEnhancer.model);Q.applier=G.makeChangeApplier(Q.model);var N=Q.uiEnhancer.model;var P;Q.save=function(){Q.events.onSave.fire(Q.model);N=G.copy(Q.model);Q.uiEnhancer.updateModel(N)};Q.reset=function(){Q.events.onReset.fire();Q.updateModel(G.copy(Q.uiEnhancer.defaultSiteSettings),Q);Q.refreshView()};Q.cancel=function(){Q.events.onCancel.fire();Q.updateModel(G.copy(N),Q);Q.refreshView()};Q.refreshView=function(){var R=C(Q);G.reRender(P,Q.container,K(Q,R.model),R);Q.events.afterRender.fire()};Q.updateModel=function(R,S){Q.events.modelChanged.fire(R,Q.model,S);G.clear(Q.model);G.model.copyModel(Q.model,R)};P=L(Q);return Q};G.defaults("fluid.uiOptions",{textMinSize:{type:"fluid.textfieldSlider",options:{min:6,max:30}},lineSpacing:{type:"fluid.textfieldSlider",options:{min:1,max:10}},selectors:{controls:".flc-uiOptions-control",textMinSizeCtrl:".flc-uiOptions-min-text-size",lineSpacingCtrl:".flc-uiOptions-line-spacing",cancel:".flc-uiOptions-cancel",reset:".flc-uiOptions-reset",save:".flc-uiOptions-save",previewFrame:".flc-uiOptions-preview-frame"},events:{modelChanged:null,onSave:null,onCancel:null,onReset:null,afterRender:null},strings:{textFont:["Serif","Sans-Serif","Arial","Verdana","Courier","Times"],textSpacing:["Regular","Wide","Wider","Widest"],theme:["Low Contrast","Medium Contrast","Medium Contrast Grey Scale","High Contrast","High Contrast Inverted"],backgroundImages:["Yes","No"],layout:["Yes","No"],toc:["Yes","No"]},controlValues:{textFont:["serif","sansSerif","arial","verdana","courier","times"],textSpacing:["default","wide1","wide2","wide3"],theme:["lowContrast","default","mediumContrast","highContrast","highContrastInverted"],backgroundImages:["true","false"],layout:["simple","default"],toc:["true","false"]}})})(jQuery,fluid_1_2);var swfobject=function(){var UNDEF="undefined",OBJECT="object",SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash",EXPRESS_INSTALL_ID="SWFObjectExprInst",win=window,doc=document,nav=navigator,domLoadFnArr=[],regObjArr=[],objIdArr=[],listenersArr=[],script,timer=null,storedAltContent=null,storedAltContentId=null,isDomLoaded=false,isExpressInstallActive=false;var ua=function(){var w3cdom=typeof doc.getElementById!=UNDEF&&typeof doc.getElementsByTagName!=UNDEF&&typeof doc.createElement!=UNDEF,playerVersion=[0,0,0],d=null;if(typeof nav.plugins!=UNDEF&&typeof nav.plugins[SHOCKWAVE_FLASH]==OBJECT){d=nav.plugins[SHOCKWAVE_FLASH].description;if(d&&!(typeof nav.mimeTypes!=UNDEF&&nav.mimeTypes[FLASH_MIME_TYPE]&&!nav.mimeTypes[FLASH_MIME_TYPE].enabledPlugin)){d=d.replace(/^.*\s+(\S+\s+\S+$)/,"$1");playerVersion[0]=parseInt(d.replace(/^(.*)\..*$/,"$1"),10);playerVersion[1]=parseInt(d.replace(/^.*\.(.*)\s.*$/,"$1"),10);playerVersion[2]=/r/.test(d)?parseInt(d.replace(/^.*r(.*)$/,"$1"),10):0}}else{if(typeof win.ActiveXObject!=UNDEF){var a=null,fp6Crash=false;try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX+".7")}catch(e){try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX+".6");playerVersion=[6,0,21];a.AllowScriptAccess="always"}catch(e){if(playerVersion[0]==6){fp6Crash=true}}if(!fp6Crash){try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX)}catch(e){}}}if(!fp6Crash&&a){try{d=a.GetVariable("$version");if(d){d=d.split(" ")[1].split(",");playerVersion=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]}}catch(e){}}}}var u=nav.userAgent.toLowerCase(),p=nav.platform.toLowerCase(),webkit=/webkit/.test(u)?parseFloat(u.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,ie=false,windows=p?/win/.test(p):/win/.test(u),mac=p?/mac/.test(p):/mac/.test(u);
/*@cc_on
			ie = true;
			@if (@_win32)
				windows = true;
			@elif (@_mac)
				mac = true;
			@end
		@*/
return{w3cdom:w3cdom,pv:playerVersion,webkit:webkit,ie:ie,win:windows,mac:mac}}();var onDomLoad=function(){if(!ua.w3cdom){return }addDomLoadEvent(main);if(ua.ie&&ua.win){try{doc.write("<script id=__ie_ondomload defer=true src=//:><\/script>");script=getElementById("__ie_ondomload");if(script){addListener(script,"onreadystatechange",checkReadyState)}}catch(e){}}if(ua.webkit&&typeof doc.readyState!=UNDEF){timer=setInterval(function(){if(/loaded|complete/.test(doc.readyState)){callDomLoadFunctions()}},10)}if(typeof doc.addEventListener!=UNDEF){doc.addEventListener("DOMContentLoaded",callDomLoadFunctions,null)}addLoadEvent(callDomLoadFunctions)}();function checkReadyState(){if(script.readyState=="complete"){script.parentNode.removeChild(script);callDomLoadFunctions()}}function callDomLoadFunctions(){if(isDomLoaded){return }if(ua.ie&&ua.win){var s=createElement("span");try{var t=doc.getElementsByTagName("body")[0].appendChild(s);t.parentNode.removeChild(t)}catch(e){return }}isDomLoaded=true;if(timer){clearInterval(timer);timer=null}var dl=domLoadFnArr.length;for(var i=0;i<dl;i++){domLoadFnArr[i]()}}function addDomLoadEvent(fn){if(isDomLoaded){fn()}else{domLoadFnArr[domLoadFnArr.length]=fn}}function addLoadEvent(fn){if(typeof win.addEventListener!=UNDEF){win.addEventListener("load",fn,false)}else{if(typeof doc.addEventListener!=UNDEF){doc.addEventListener("load",fn,false)}else{if(typeof win.attachEvent!=UNDEF){addListener(win,"onload",fn)}else{if(typeof win.onload=="function"){var fnOld=win.onload;win.onload=function(){fnOld();fn()}}else{win.onload=fn}}}}}function main(){var rl=regObjArr.length;for(var i=0;i<rl;i++){var id=regObjArr[i].id;if(ua.pv[0]>0){var obj=getElementById(id);if(obj){regObjArr[i].width=obj.getAttribute("width")?obj.getAttribute("width"):"0";regObjArr[i].height=obj.getAttribute("height")?obj.getAttribute("height"):"0";if(hasPlayerVersion(regObjArr[i].swfVersion)){if(ua.webkit&&ua.webkit<312){fixParams(obj)}setVisibility(id,true)}else{if(regObjArr[i].expressInstall&&!isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)){showExpressInstall(regObjArr[i])}else{displayAltContent(obj)}}}}else{setVisibility(id,true)}}}function fixParams(obj){var nestedObj=obj.getElementsByTagName(OBJECT)[0];if(nestedObj){var e=createElement("embed"),a=nestedObj.attributes;if(a){var al=a.length;for(var i=0;i<al;i++){if(a[i].nodeName=="DATA"){e.setAttribute("src",a[i].nodeValue)}else{e.setAttribute(a[i].nodeName,a[i].nodeValue)}}}var c=nestedObj.childNodes;if(c){var cl=c.length;for(var j=0;j<cl;j++){if(c[j].nodeType==1&&c[j].nodeName=="PARAM"){e.setAttribute(c[j].getAttribute("name"),c[j].getAttribute("value"))}}}obj.parentNode.replaceChild(e,obj)}}function showExpressInstall(regObj){isExpressInstallActive=true;var obj=getElementById(regObj.id);if(obj){if(regObj.altContentId){var ac=getElementById(regObj.altContentId);if(ac){storedAltContent=ac;storedAltContentId=regObj.altContentId}}else{storedAltContent=abstractAltContent(obj)}if(!(/%$/.test(regObj.width))&&parseInt(regObj.width,10)<310){regObj.width="310"}if(!(/%$/.test(regObj.height))&&parseInt(regObj.height,10)<137){regObj.height="137"}doc.title=doc.title.slice(0,47)+" - Flash Player Installation";var pt=ua.ie&&ua.win?"ActiveX":"PlugIn",dt=doc.title,fv="MMredirectURL="+win.location+"&MMplayerType="+pt+"&MMdoctitle="+dt,replaceId=regObj.id;if(ua.ie&&ua.win&&obj.readyState!=4){var newObj=createElement("div");replaceId+="SWFObjectNew";newObj.setAttribute("id",replaceId);obj.parentNode.insertBefore(newObj,obj);obj.style.display="none";var fn=function(){obj.parentNode.removeChild(obj)};addListener(win,"onload",fn)}createSWF({data:regObj.expressInstall,id:EXPRESS_INSTALL_ID,width:regObj.width,height:regObj.height},{flashvars:fv},replaceId)}}function displayAltContent(obj){if(ua.ie&&ua.win&&obj.readyState!=4){var el=createElement("div");obj.parentNode.insertBefore(el,obj);el.parentNode.replaceChild(abstractAltContent(obj),el);obj.style.display="none";var fn=function(){obj.parentNode.removeChild(obj)};addListener(win,"onload",fn)}else{obj.parentNode.replaceChild(abstractAltContent(obj),obj)}}function abstractAltContent(obj){var ac=createElement("div");if(ua.win&&ua.ie){ac.innerHTML=obj.innerHTML}else{var nestedObj=obj.getElementsByTagName(OBJECT)[0];if(nestedObj){var c=nestedObj.childNodes;if(c){var cl=c.length;for(var i=0;i<cl;i++){if(!(c[i].nodeType==1&&c[i].nodeName=="PARAM")&&!(c[i].nodeType==8)){ac.appendChild(c[i].cloneNode(true))}}}}}return ac}function createSWF(attObj,parObj,id){var r,el=getElementById(id);if(el){if(typeof attObj.id==UNDEF){attObj.id=id}if(ua.ie&&ua.win){var att="";for(var i in attObj){if(attObj[i]!=Object.prototype[i]){if(i.toLowerCase()=="data"){parObj.movie=attObj[i]}else{if(i.toLowerCase()=="styleclass"){att+=' class="'+attObj[i]+'"'}else{if(i.toLowerCase()!="classid"){att+=" "+i+'="'+attObj[i]+'"'}}}}}var par="";for(var j in parObj){if(parObj[j]!=Object.prototype[j]){par+='<param name="'+j+'" value="'+parObj[j]+'" />'}}el.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+att+">"+par+"</object>";objIdArr[objIdArr.length]=attObj.id;r=getElementById(attObj.id)}else{if(ua.webkit&&ua.webkit<312){var e=createElement("embed");
e.setAttribute("type",FLASH_MIME_TYPE);for(var k in attObj){if(attObj[k]!=Object.prototype[k]){if(k.toLowerCase()=="data"){e.setAttribute("src",attObj[k])}else{if(k.toLowerCase()=="styleclass"){e.setAttribute("class",attObj[k])}else{if(k.toLowerCase()!="classid"){e.setAttribute(k,attObj[k])}}}}}for(var l in parObj){if(parObj[l]!=Object.prototype[l]){if(l.toLowerCase()!="movie"){e.setAttribute(l,parObj[l])}}}el.parentNode.replaceChild(e,el);r=e}else{var o=createElement(OBJECT);o.setAttribute("type",FLASH_MIME_TYPE);for(var m in attObj){if(attObj[m]!=Object.prototype[m]){if(m.toLowerCase()=="styleclass"){o.setAttribute("class",attObj[m])}else{if(m.toLowerCase()!="classid"){o.setAttribute(m,attObj[m])}}}}for(var n in parObj){if(parObj[n]!=Object.prototype[n]&&n.toLowerCase()!="movie"){createObjParam(o,n,parObj[n])}}el.parentNode.replaceChild(o,el);r=o}}}return r}function createObjParam(el,pName,pValue){var p=createElement("param");p.setAttribute("name",pName);p.setAttribute("value",pValue);el.appendChild(p)}function removeSWF(id){var obj=getElementById(id);if(obj&&(obj.nodeName=="OBJECT"||obj.nodeName=="EMBED")){if(ua.ie&&ua.win){if(obj.readyState==4){removeObjectInIE(id)}else{win.attachEvent("onload",function(){removeObjectInIE(id)})}}else{obj.parentNode.removeChild(obj)}}}function removeObjectInIE(id){var obj=getElementById(id);if(obj){for(var i in obj){if(typeof obj[i]=="function"){obj[i]=null}}obj.parentNode.removeChild(obj)}}function getElementById(id){var el=null;try{el=doc.getElementById(id)}catch(e){}return el}function createElement(el){return doc.createElement(el)}function addListener(target,eventType,fn){target.attachEvent(eventType,fn);listenersArr[listenersArr.length]=[target,eventType,fn]}function hasPlayerVersion(rv){var pv=ua.pv,v=rv.split(".");v[0]=parseInt(v[0],10);v[1]=parseInt(v[1],10)||0;v[2]=parseInt(v[2],10)||0;return(pv[0]>v[0]||(pv[0]==v[0]&&pv[1]>v[1])||(pv[0]==v[0]&&pv[1]==v[1]&&pv[2]>=v[2]))?true:false}function createCSS(sel,decl){if(ua.ie&&ua.mac){return }var h=doc.getElementsByTagName("head")[0],s=createElement("style");s.setAttribute("type","text/css");s.setAttribute("media","screen");if(!(ua.ie&&ua.win)&&typeof doc.createTextNode!=UNDEF){s.appendChild(doc.createTextNode(sel+" {"+decl+"}"))}h.appendChild(s);if(ua.ie&&ua.win&&typeof doc.styleSheets!=UNDEF&&doc.styleSheets.length>0){var ls=doc.styleSheets[doc.styleSheets.length-1];if(typeof ls.addRule==OBJECT){ls.addRule(sel,decl)}}}function setVisibility(id,isVisible){var v=isVisible?"visible":"hidden";if(isDomLoaded&&getElementById(id)){getElementById(id).style.visibility=v}else{createCSS("#"+id,"visibility:"+v)}}function urlEncodeIfNecessary(s){var regex=/[\\\"<>\.;]/;var hasBadChars=regex.exec(s)!=null;return hasBadChars?encodeURIComponent(s):s}var cleanup=function(){if(ua.ie&&ua.win){window.attachEvent("onunload",function(){var ll=listenersArr.length;for(var i=0;i<ll;i++){listenersArr[i][0].detachEvent(listenersArr[i][1],listenersArr[i][2])}var il=objIdArr.length;for(var j=0;j<il;j++){removeSWF(objIdArr[j])}for(var k in ua){ua[k]=null}ua=null;for(var l in swfobject){swfobject[l]=null}swfobject=null})}}();return{registerObject:function(objectIdStr,swfVersionStr,xiSwfUrlStr){if(!ua.w3cdom||!objectIdStr||!swfVersionStr){return }var regObj={};regObj.id=objectIdStr;regObj.swfVersion=swfVersionStr;regObj.expressInstall=xiSwfUrlStr?xiSwfUrlStr:false;regObjArr[regObjArr.length]=regObj;setVisibility(objectIdStr,false)},getObjectById:function(objectIdStr){var r=null;if(ua.w3cdom){var o=getElementById(objectIdStr);if(o){var n=o.getElementsByTagName(OBJECT)[0];if(!n||(n&&typeof o.SetVariable!=UNDEF)){r=o}else{if(typeof n.SetVariable!=UNDEF){r=n}}}}return r},embedSWF:function(swfUrlStr,replaceElemIdStr,widthStr,heightStr,swfVersionStr,xiSwfUrlStr,flashvarsObj,parObj,attObj){if(!ua.w3cdom||!swfUrlStr||!replaceElemIdStr||!widthStr||!heightStr||!swfVersionStr){return }widthStr+="";heightStr+="";if(hasPlayerVersion(swfVersionStr)){setVisibility(replaceElemIdStr,false);var att={};if(attObj&&typeof attObj===OBJECT){for(var i in attObj){if(attObj[i]!=Object.prototype[i]){att[i]=attObj[i]}}}att.data=swfUrlStr;att.width=widthStr;att.height=heightStr;var par={};if(parObj&&typeof parObj===OBJECT){for(var j in parObj){if(parObj[j]!=Object.prototype[j]){par[j]=parObj[j]}}}if(flashvarsObj&&typeof flashvarsObj===OBJECT){for(var k in flashvarsObj){if(flashvarsObj[k]!=Object.prototype[k]){if(typeof par.flashvars!=UNDEF){par.flashvars+="&"+k+"="+flashvarsObj[k]}else{par.flashvars=k+"="+flashvarsObj[k]}}}}addDomLoadEvent(function(){createSWF(att,par,replaceElemIdStr);if(att.id==replaceElemIdStr){setVisibility(replaceElemIdStr,true)}})}else{if(xiSwfUrlStr&&!isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)){isExpressInstallActive=true;setVisibility(replaceElemIdStr,false);addDomLoadEvent(function(){var regObj={};regObj.id=regObj.altContentId=replaceElemIdStr;regObj.width=widthStr;regObj.height=heightStr;regObj.expressInstall=xiSwfUrlStr;showExpressInstall(regObj)})}}},getFlashPlayerVersion:function(){return{major:ua.pv[0],minor:ua.pv[1],release:ua.pv[2]}},hasFlashPlayerVersion:hasPlayerVersion,createSWF:function(attObj,parObj,replaceElemIdStr){if(ua.w3cdom){return createSWF(attObj,parObj,replaceElemIdStr)}else{return undefined}},removeSWF:function(objElemIdStr){if(ua.w3cdom){removeSWF(objElemIdStr)}},createCSS:function(sel,decl){if(ua.w3cdom){createCSS(sel,decl)}},addDomLoadEvent:addDomLoadEvent,addLoadEvent:addLoadEvent,getQueryParamValue:function(param){var q=doc.location.search||doc.location.hash;if(param==null){return urlEncodeIfNecessary(q)}if(q){var pairs=q.substring(1).split("&");for(var i=0;i<pairs.length;i++){if(pairs[i].substring(0,pairs[i].indexOf("="))==param){return urlEncodeIfNecessary(pairs[i].substring((pairs[i].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(isExpressInstallActive&&storedAltContent){var obj=getElementById(EXPRESS_INSTALL_ID);if(obj){obj.parentNode.replaceChild(storedAltContent,obj);if(storedAltContentId){setVisibility(storedAltContentId,true);if(ua.ie&&ua.win){storedAltContent.style.display="block"}}storedAltContent=null;storedAltContentId=null;isExpressInstallActive=false}}}}}();var SWFUpload;if(SWFUpload==undefined){SWFUpload=function(A){this.initSWFUpload(A)}}SWFUpload.prototype.initSWFUpload=function(B){try{this.customSettings={};this.settings=B;this.eventQueue=[];this.movieName="SWFUpload_"+SWFUpload.movieCount++;this.movieElement=null;SWFUpload.instances[this.movieName]=this;this.initSettings();this.loadFlash();this.displayDebugInfo()}catch(A){delete SWFUpload.instances[this.movieName];throw A}};SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="2.2.0 2009-03-25";SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.completeURL=function(A){if(typeof (A)!=="string"||A.match(/^https?:\/\//i)||A.match(/^\//)){return A}var C=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");var B=window.location.pathname.lastIndexOf("/");if(B<=0){path="/"}else{path=window.location.pathname.substr(0,B)+"/"}return path+A};SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(B,A){this.settings[B]=(this.settings[B]==undefined)?A:this.settings[B]};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",false);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",false);this.ensureDefault("requeue_on_error",false);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);this.ensureDefault("file_types","*.*");this.ensureDefault("file_types_description","All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("prevent_swf_caching",true);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",false);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("debug",false);this.settings.debug_enabled=this.settings.debug;this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;if(!!this.settings.prevent_swf_caching){this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+new Date().getTime()
}if(!this.settings.preserve_relative_urls){this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url);this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)}delete this.ensureDefault};SWFUpload.prototype.loadFlash=function(){var A,B;if(document.getElementById(this.movieName)!==null){throw"ID "+this.movieName+" is already in use. The Flash Object could not be added"}A=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(A==undefined){throw"Could not find the placeholder element: "+this.settings.button_placeholder_id}B=document.createElement("div");B.innerHTML=this.getFlashHTML();A.parentNode.replaceChild(B.firstChild,A);if(window[this.movieName]==undefined){window[this.movieName]=this.getMovieElement()}};SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")};SWFUpload.prototype.getFlashVars=function(){var B=this.buildParamString();var A=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(A),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(B),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")};SWFUpload.prototype.getMovieElement=function(){if(this.movieElement==undefined){this.movieElement=document.getElementById(this.movieName)}if(this.movieElement===null){throw"Could not find Flash element"}return this.movieElement};SWFUpload.prototype.buildParamString=function(){var C=this.settings.post_params;var B=[];if(typeof (C)==="object"){for(var A in C){if(C.hasOwnProperty(A)){B.push(encodeURIComponent(A.toString())+"="+encodeURIComponent(C[A].toString()))}}}return B.join("&amp;")};SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,false);var A=null;A=this.getMovieElement();if(A&&typeof (A.CallFunction)==="unknown"){for(var C in A){try{if(typeof (A[C])==="function"){A[C]=null}}catch(E){}}try{A.parentNode.removeChild(A)}catch(B){}}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;delete SWFUpload.instances[this.movieName];this.movieElement=null;this.settings=null;this.customSettings=null;this.eventQueue=null;this.movieName=null;return true}catch(D){return false}};SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","\t","upload_url:               ",this.settings.upload_url,"\n","\t","flash_url:                ",this.settings.flash_url,"\n","\t","use_query_string:         ",this.settings.use_query_string.toString(),"\n","\t","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","\t","http_success:             ",this.settings.http_success.join(", "),"\n","\t","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","\t","file_post_name:           ",this.settings.file_post_name,"\n","\t","post_params:              ",this.settings.post_params.toString(),"\n","\t","file_types:               ",this.settings.file_types,"\n","\t","file_types_description:   ",this.settings.file_types_description,"\n","\t","file_size_limit:          ",this.settings.file_size_limit,"\n","\t","file_upload_limit:        ",this.settings.file_upload_limit,"\n","\t","file_queue_limit:         ",this.settings.file_queue_limit,"\n","\t","debug:                    ",this.settings.debug.toString(),"\n","\t","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","\t","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","\t","button_placeholder:       ",(this.settings.button_placeholder?"Set":"Not Set"),"\n","\t","button_image_url:         ",this.settings.button_image_url.toString(),"\n","\t","button_width:             ",this.settings.button_width.toString(),"\n","\t","button_height:            ",this.settings.button_height.toString(),"\n","\t","button_text:              ",this.settings.button_text.toString(),"\n","\t","button_text_style:        ",this.settings.button_text_style.toString(),"\n","\t","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","\t","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","\t","button_action:            ",this.settings.button_action.toString(),"\n","\t","button_disabled:          ",this.settings.button_disabled.toString(),"\n","\t","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","\t","swfupload_loaded_handler assigned:  ",(typeof this.settings.swfupload_loaded_handler==="function").toString(),"\n","\t","file_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler==="function").toString(),"\n","\t","file_queued_handler assigned:       ",(typeof this.settings.file_queued_handler==="function").toString(),"\n","\t","file_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler==="function").toString(),"\n","\t","upload_start_handler assigned:      ",(typeof this.settings.upload_start_handler==="function").toString(),"\n","\t","upload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler==="function").toString(),"\n","\t","upload_error_handler assigned:      ",(typeof this.settings.upload_error_handler==="function").toString(),"\n","\t","upload_success_handler assigned:    ",(typeof this.settings.upload_success_handler==="function").toString(),"\n","\t","upload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler==="function").toString(),"\n","\t","debug_handler assigned:             ",(typeof this.settings.debug_handler==="function").toString(),"\n"].join(""))};SWFUpload.prototype.addSetting=function(B,C,A){if(C==undefined){return(this.settings[B]=A)}else{return(this.settings[B]=C)}};SWFUpload.prototype.getSetting=function(A){if(this.settings[A]!=undefined){return this.settings[A]}return""};SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement();var returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>");returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}if(returnValue!=undefined&&typeof returnValue.post==="object"){returnValue=this.unescapeFilePostParams(returnValue)}return returnValue};SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")};SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")};SWFUpload.prototype.startUpload=function(A){this.callFlash("StartUpload",[A])};SWFUpload.prototype.cancelUpload=function(A,B){if(B!==false){B=true}this.callFlash("CancelUpload",[A,B])};SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")};SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")};SWFUpload.prototype.setStats=function(A){this.callFlash("SetStats",[A])};SWFUpload.prototype.getFile=function(A){if(typeof (A)==="number"){return this.callFlash("GetFileByIndex",[A])}else{return this.callFlash("GetFile",[A])}};SWFUpload.prototype.addFileParam=function(A,B,C){return this.callFlash("AddFileParam",[A,B,C])};SWFUpload.prototype.removeFileParam=function(A,B){this.callFlash("RemoveFileParam",[A,B])};SWFUpload.prototype.setUploadURL=function(A){this.settings.upload_url=A.toString();this.callFlash("SetUploadURL",[A])};SWFUpload.prototype.setPostParams=function(A){this.settings.post_params=A;this.callFlash("SetPostParams",[A])};SWFUpload.prototype.addPostParam=function(A,B){this.settings.post_params[A]=B;this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.removePostParam=function(A){delete this.settings.post_params[A];this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.setFileTypes=function(A,B){this.settings.file_types=A;this.settings.file_types_description=B;this.callFlash("SetFileTypes",[A,B])
};SWFUpload.prototype.setFileSizeLimit=function(A){this.settings.file_size_limit=A;this.callFlash("SetFileSizeLimit",[A])};SWFUpload.prototype.setFileUploadLimit=function(A){this.settings.file_upload_limit=A;this.callFlash("SetFileUploadLimit",[A])};SWFUpload.prototype.setFileQueueLimit=function(A){this.settings.file_queue_limit=A;this.callFlash("SetFileQueueLimit",[A])};SWFUpload.prototype.setFilePostName=function(A){this.settings.file_post_name=A;this.callFlash("SetFilePostName",[A])};SWFUpload.prototype.setUseQueryString=function(A){this.settings.use_query_string=A;this.callFlash("SetUseQueryString",[A])};SWFUpload.prototype.setRequeueOnError=function(A){this.settings.requeue_on_error=A;this.callFlash("SetRequeueOnError",[A])};SWFUpload.prototype.setHTTPSuccess=function(A){if(typeof A==="string"){A=A.replace(" ","").split(",")}this.settings.http_success=A;this.callFlash("SetHTTPSuccess",[A])};SWFUpload.prototype.setAssumeSuccessTimeout=function(A){this.settings.assume_success_timeout=A;this.callFlash("SetAssumeSuccessTimeout",[A])};SWFUpload.prototype.setDebugEnabled=function(A){this.settings.debug_enabled=A;this.callFlash("SetDebugEnabled",[A])};SWFUpload.prototype.setButtonImageURL=function(A){if(A==undefined){A=""}this.settings.button_image_url=A;this.callFlash("SetButtonImageURL",[A])};SWFUpload.prototype.setButtonDimensions=function(C,A){this.settings.button_width=C;this.settings.button_height=A;var B=this.getMovieElement();if(B!=undefined){B.style.width=C+"px";B.style.height=A+"px"}this.callFlash("SetButtonDimensions",[C,A])};SWFUpload.prototype.setButtonText=function(A){this.settings.button_text=A;this.callFlash("SetButtonText",[A])};SWFUpload.prototype.setButtonTextPadding=function(B,A){this.settings.button_text_top_padding=A;this.settings.button_text_left_padding=B;this.callFlash("SetButtonTextPadding",[B,A])};SWFUpload.prototype.setButtonTextStyle=function(A){this.settings.button_text_style=A;this.callFlash("SetButtonTextStyle",[A])};SWFUpload.prototype.setButtonDisabled=function(A){this.settings.button_disabled=A;this.callFlash("SetButtonDisabled",[A])};SWFUpload.prototype.setButtonAction=function(A){this.settings.button_action=A;this.callFlash("SetButtonAction",[A])};SWFUpload.prototype.setButtonCursor=function(A){this.settings.button_cursor=A;this.callFlash("SetButtonCursor",[A])};SWFUpload.prototype.queueEvent=function(B,C){if(C==undefined){C=[]}else{if(!(C instanceof Array)){C=[C]}}var A=this;if(typeof this.settings[B]==="function"){this.eventQueue.push(function(){this.settings[B].apply(this,C)});setTimeout(function(){A.executeNextEvent()},0)}else{if(this.settings[B]!==null){throw"Event handler "+B+" is unknown or is not a function"}}};SWFUpload.prototype.executeNextEvent=function(){var A=this.eventQueue?this.eventQueue.shift():null;if(typeof (A)==="function"){A.apply(this)}};SWFUpload.prototype.unescapeFilePostParams=function(C){var E=/[$]([0-9a-f]{4})/i;var F={};var D;if(C!=undefined){for(var A in C.post){if(C.post.hasOwnProperty(A)){D=A;var B;while((B=E.exec(D))!==null){D=D.replace(B[0],String.fromCharCode(parseInt("0x"+B[1],16)))}F[D]=C.post[A]}}C.post=F}return C};SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(A){return false}};SWFUpload.prototype.flashReady=function(){var A=this.getMovieElement();if(!A){this.debug("Flash called back ready but the flash movie can't be found.");return }this.cleanUp(A);this.queueEvent("swfupload_loaded_handler")};SWFUpload.prototype.cleanUp=function(A){try{if(this.movieElement&&typeof (A.CallFunction)==="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var C in A){try{if(typeof (A[C])==="function"){A[C]=null}}catch(B){}}}}catch(D){}window.__flash__removeCallback=function(E,F){try{if(E){E[F]=null}}catch(G){}}};SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};SWFUpload.prototype.fileQueued=function(A){A=this.unescapeFilePostParams(A);this.queueEvent("file_queued_handler",A)};SWFUpload.prototype.fileQueueError=function(A,C,B){A=this.unescapeFilePostParams(A);this.queueEvent("file_queue_error_handler",[A,C,B])};SWFUpload.prototype.fileDialogComplete=function(B,C,A){this.queueEvent("file_dialog_complete_handler",[B,C,A])};SWFUpload.prototype.uploadStart=function(A){A=this.unescapeFilePostParams(A);this.queueEvent("return_upload_start_handler",A)};SWFUpload.prototype.returnUploadStart=function(A){var B;if(typeof this.settings.upload_start_handler==="function"){A=this.unescapeFilePostParams(A);B=this.settings.upload_start_handler.call(this,A)}else{if(this.settings.upload_start_handler!=undefined){throw"upload_start_handler must be a function"}}if(B===undefined){B=true}B=!!B;this.callFlash("ReturnUploadStart",[B])};SWFUpload.prototype.uploadProgress=function(A,C,B){A=this.unescapeFilePostParams(A);this.queueEvent("upload_progress_handler",[A,C,B])};SWFUpload.prototype.uploadError=function(A,C,B){A=this.unescapeFilePostParams(A);this.queueEvent("upload_error_handler",[A,C,B])};SWFUpload.prototype.uploadSuccess=function(B,A,C){B=this.unescapeFilePostParams(B);this.queueEvent("upload_success_handler",[B,A,C])};SWFUpload.prototype.uploadComplete=function(A){A=this.unescapeFilePostParams(A);this.queueEvent("upload_complete_handler",A)};SWFUpload.prototype.debug=function(A){this.queueEvent("debug_handler",A)};SWFUpload.prototype.debugMessage=function(C){if(this.settings.debug){var A,D=[];if(typeof C==="object"&&typeof C.name==="string"&&typeof C.message==="string"){for(var B in C){if(C.hasOwnProperty(B)){D.push(B+": "+C[B])}}A=D.join("\n")||"";D=A.split("\n");A="EXCEPTION: "+D.join("\nEXCEPTION: ");SWFUpload.Console.writeLine(A)}else{SWFUpload.Console.writeLine(C)}}};SWFUpload.Console={};SWFUpload.Console.writeLine=function(D){var B,A;try{B=document.getElementById("SWFUpload_Console");if(!B){A=document.createElement("form");document.getElementsByTagName("body")[0].appendChild(A);B=document.createElement("textarea");B.id="SWFUpload_Console";B.style.fontFamily="monospace";B.setAttribute("wrap","off");B.wrap="off";B.style.overflow="auto";B.style.width="700px";B.style.height="350px";B.style.margin="5px";A.appendChild(B)}B.value+=D+"\n";B.scrollTop=B.scrollHeight-B.clientHeight}catch(C){alert("Exception: "+C.name+" Message: "+C.message)}};fluid_1_2=fluid_1_2||{};(function(F,G){var E=function(R,Q,P){Q=(Q)?Q:P;R.animate(Q.params,Q.duration,Q.callback)};var L=function(R,P,Q){R.queue("fx",[]);R.animate({width:P,queue:false},Q)};var I=function(P,Q){if(Q===false){P.displayElement.show()}else{E(P.displayElement,Q,P.options.showAnimation)}};var A=function(R,Q,S){Q=(Q===null||isNaN(Q))?R.options.delay:Q;if(Q){var P=setTimeout(function(){A(R,0,S)},Q)}else{if(S===false){R.displayElement.hide()}else{E(R.displayElement,S,R.options.hideAnimation)}}};var O=function(R,Q,T){T=T||false;var P=R.indicator.width();var S=R.options.animate;if((Q>P)&&(S==="both"||S==="forward")&&!T){L(R.indicator,Q,R.options.speed)}else{if((Q<P)&&(S==="both"||S==="backward")&&!T){L(R.indicator,Q,R.options.speed)}else{R.indicator.width(Q)}}};var J=function(Q,P){return Math.round((Math.min(P,100)*Q.progressBar.width())/100)};var N=function(P){var Q=Math.max(J(P,parseFloat(P.storedPercent)),P.options.minWidth);O(P,Q,true)};var K=function(P){P.attr("role","progressbar");P.attr("aria-valuemin","0");P.attr("aria-valuemax","100");P.attr("aria-valuenow","0");P.attr("aria-valuetext","");P.attr("aria-busy","false")};var H=function(S,R){var Q=R<100&&R>0;S.ariaElement.attr("aria-busy",Q);S.ariaElement.attr("aria-valuenow",R);if(Q){var P=G.stringTemplate(S.options.ariaBusyText,{percentComplete:R});S.ariaElement.attr("aria-valuetext",P)}else{if(R===100){S.ariaElement.attr("aria-valuetext",S.options.ariaDoneText)}}};var D=function(P,Q){P.html(Q)};var M=function(P){P.indicator.css("top",P.progressBar.position().top).css("left",0).height(P.progressBar.height());N(P)};var B=function(R,Q,P,T){I(R,T);if(Q!==null){R.storedPercent=Q;var S=Math.max(J(R,parseFloat(Q)),R.options.minWidth);O(R,S)}if(P!==null){D(R.label,P)}if(R.ariaElement){H(R,Q)}};var C=function(P){P.displayElement=P.locate("displayElement");if(P.options.initiallyHidden){P.displayElement.hide()}P.progressBar=P.locate("progressBar");P.label=P.locate("label");P.indicator=P.locate("indicator");P.ariaElement=P.locate("ariaElement");P.indicator.width(P.options.minWidth);P.storedPercent=0;if(P.ariaElement){K(P.ariaElement)}};G.progress=function(P,Q){var R=G.initView("fluid.progress",P,Q);C(R);R.show=function(S){I(R,S)};R.hide=function(S,T){A(R,S,T)};R.update=function(S,T,U){B(R,S,T,U)};R.refreshView=function(){M(R)};return R};G.defaults("fluid.progress",{selectors:{displayElement:".flc-progress",progressBar:".flc-progress-bar",indicator:".flc-progress-indicator",label:".flc-progress-label",ariaElement:".flc-progress-bar"},showAnimation:{params:{opacity:"show"},duration:"slow",callback:null},hideAnimation:{params:{opacity:"hide"},duration:"slow",callback:null},minWidth:5,delay:0,speed:200,animate:"forward",initiallyHidden:true,updatePosition:false,ariaBusyText:"Progress is %percentComplete percent complete",ariaDoneText:"Progress is complete."})})(jQuery,fluid_1_2);fluid_1_2=fluid_1_2||{};(function(E,F){var A=function(N,M,O,K){if(!K){return }var L=Math.min(O.chunkSize,N.size);O.bytesUploaded=Math.min(O.bytesUploaded+L,N.size);M.onFileProgress.fire(N,O.bytesUploaded,N.size)};var H=function(L,K){if(L.swfUploadSettings){L.swfUploadSettings.upload_complete_handler(K)}else{L.events.afterFileComplete.fire(K)}};var D=function(L,K){L.queueManager.finishFile(K);if(L.queueManager.shouldUploadNextFile()){I(L)}else{L.queueManager.complete()}};var C=function(L){if(!L.queue.isUploading){return }var K=L.demoState.currentFile;K.filestatus=F.uploader.fileStatusConstants.COMPLETE;L.events.onFileSuccess.fire(K);L.demoState.fileIdx++;D(L,K)};var G=function(L){if(!L.queue.isUploading){return }var K=L.demoState.currentFile;if(L.demoState.bytesUploaded<K.size){L.invokeAfterRandomDelay(function(){A(K,L.events,L.demoState,L.queue.isUploading);
G(L)})}else{C(L)}};var I=function(K){K.demoState.currentFile=K.queue.files[K.demoState.fileIdx];K.demoState.chunksForCurrentFile=Math.ceil(K.demoState.currentFile/K.demoState.chunkSize);K.demoState.bytesUploaded=0;K.queue.isUploading=true;K.events.onFileStart.fire(K.demoState.currentFile);K.demoState.currentFile.filestatus=F.uploader.fileStatusConstants.IN_PROGRESS;G(K)};var J=function(L){var K=L.demoState.currentFile;K.filestatus=F.uploader.fileStatusConstants.CANCELLED;L.queue.shouldStop=true;L.events.onFileError.fire(K,F.uploader.errorConstants.UPLOAD_STOPPED,"The demo upload was paused by the user.");D(L,K);L.events.onUploadStop.fire()};var B=function(K){if(K.options.simulateDelay===undefined||K.options.simulateDelay===null){K.options.simulateDelay=true}K.demoState={fileIdx:0,chunkSize:200000};return K};F.demoUploadManager=function(K){var L=K;L.start=function(){L.queueManager.start();I(L)};L.stop=function(){J(L)};L.invokeAfterRandomDelay=function(N){var M;if(L.options.simulateDelay){M=Math.floor(Math.random()*1000+100);setTimeout(N,M)}else{N()}};B(L);return L}})(jQuery,fluid_1_2);fluid_1_2=fluid_1_2||{};(function(E,F){var H=function(N,O){var K=[];for(var M=0;M<N.length;M++){var L=N[M];if(O(L)===true){K.push(L)}}return K};var C=function(K){return H(K.files,function(L){return(L.filestatus===F.uploader.fileStatusConstants.COMPLETE)})};var I=function(K){return H(K.files,function(L){return(L.filestatus===F.uploader.fileStatusConstants.QUEUED||L.filestatus===F.uploader.fileStatusConstants.CANCELLED)})};var J=function(K){return H(K.files,function(L){return(L.filestatus===F.uploader.fileStatusConstants.ERROR)})};var B=function(M,L){var K=E.inArray(L,M.files);M.files.splice(K,1)};var G=function(K){K.currentBatch={fileIdx:-1,files:[],totalBytes:0,numFilesCompleted:0,numFilesErrored:0,bytesUploadedForFile:0,previousBytesUploadedForFile:0,totalBytesUploaded:0}};var A=function(K){var L=K.getReadyFiles();K.currentBatch.files=L;K.currentBatch.totalBytes=F.fileQueue.sizeOfFiles(L)};var D=function(K){G(K);A(K)};F.fileQueue=function(){var K={};K.files=[];K.isUploading=false;K.addFile=function(L){K.files.push(L)};K.removeFile=function(L){B(K,L)};K.totalBytes=function(){return F.fileQueue.sizeOfFiles(K.files)};K.getReadyFiles=function(){return I(K)};K.getErroredFiles=function(){return J(K)};K.sizeOfReadyFiles=function(){return F.fileQueue.sizeOfFiles(K.getReadyFiles())};K.getUploadedFiles=function(){return C(K)};K.sizeOfUploadedFiles=function(){return F.fileQueue.sizeOfFiles(K.getUploadedFiles())};K.setupCurrentBatch=function(){D(K)};K.clearCurrentBatch=function(){G(K)};K.updateCurrentBatch=function(){A(K)};return K};F.fileQueue.sizeOfFiles=function(M){var N=0;for(var L=0;L<M.length;L++){var K=M[L];N+=K.size}return N};F.fileQueue.manager=function(K,L){var M={};M.queue=K;M.events=L;M.start=function(){M.queue.setupCurrentBatch();M.queue.isUploading=true;M.queue.shouldStop=false;M.events.onUploadStart.fire(M.queue.currentBatch.files)};M.startFile=function(){M.queue.currentBatch.fileIdx++;M.queue.currentBatch.bytesUploadedForFile=0;M.queue.currentBatch.previousBytesUploadedForFile=0};M.finishFile=function(O){var N=M.queue.currentBatch;N.numFilesCompleted++;M.events.afterFileComplete.fire(O)};M.shouldUploadNextFile=function(){return !M.queue.shouldStop&&M.queue.isUploading&&M.queue.currentBatch.numFilesCompleted<M.queue.currentBatch.files.length};M.complete=function(){M.events.afterUploadComplete.fire(M.queue.currentBatch.files);M.queue.clearCurrentBatch()};return M}})(jQuery,fluid_1_2);fluid_1_2=fluid_1_2||{};(function(F,D){var A=function(I){var H=I.options.maxHeight;var J=(I.scrollingElm.children().eq(0).height()>H);var G=(J)?H:"";I.scrollingElm.height(G)};var E=function(G){G.scrollingElm[0].scrollTop=G.scrollingElm[0].scrollHeight};var C=function(K,J){if(!J||J.length<1){return }var L=0;var H=0;var P=J[0].offsetTop;var I=J.height();var M=K.scrollingElm[0].scrollTop;var O=K.scrollingElm.height();if(K.options.padScroll){var G=J.prev().height();L=(G+I<=O)?G:0;var N=J.next().height();H=(N+I<=O)?N:0}if((P-L)<M){K.scrollingElm[0].scrollTop=P-L}if(((P+I)+H)>(M+O)){I=(I<O)?I:O;K.scrollingElm[0].scrollTop=(P-O+I+H)}};var B=function(G){G.scrollingElm=G.container.parents(G.options.selectors.wrapper);if(!G.scrollingElm.length){D.fail({name:"Missing Scroller",message:"The scroller wrapper element was not found."})}if(!F.browser.msie||F.browser.version>6){G.scrollingElm.css("max-height",G.options.maxHeight)}};D.scroller=function(G,H){var I=D.initView("fluid.scroller",G,H);B(I);I.scrollTo=function(J){C(I,J)};I.scrollBottom=function(){E(I)};I.refreshView=function(){if(F.browser.msie&&F.browser.version<7){A(I)}};I.refreshView();return I};D.defaults("fluid.scroller",{selectors:{wrapper:".flc-scroller"},maxHeight:180,padScroll:true})})(jQuery,fluid_1_2);fluid_1_2=fluid_1_2||{};(function(H,J){var B=function(){var R=function(){};SWFUpload.prototype.selectFile=R;SWFUpload.prototype.selectFiles=R};var F=function(R,S){R.returnedOptions={uploadManager:{type:S.options.uploadManager.type||S.options.uploadManager}}};var G=function(S){var R=H("<div><span></span></div>");R.addClass(S.options.styles.flash9Container);H("body").append(R);return R};var A=function(R){var S=G(R);R.returnedOptions.uploadManager.options={flashURL:R.options.flash9URL||undefined,flashButtonPeerId:J.allocateSimpleId(S.children().eq(0))}};var C=function(S,R){R.wrap("<div class='"+S.options.styles.uploaderWrapperFlash10+"'></div>");var T=H("<div><span></span></div>");T.addClass(S.options.styles.browseButtonOverlay);R.after(T);B();return T};var O=function(S,U){var V=S.options,T=C(S,U.container),R=U.locate("browseButton");J.tabindex(R,-1);S.isTransparent=V.flashButtonAlwaysVisible?false:(!H.browser.msie||V.transparentEvenInIE);S.returnedOptions.uploadManager.options={flashURL:V.flash10URL||undefined,flashButtonImageURL:S.isTransparent?undefined:V.flashButtonImageURL,flashButtonPeerId:J.allocateSimpleId(T.children().eq(0)),flashButtonHeight:V.flashButtonHeight||R.outerHeight(),flashButtonWidth:V.flashButtonWidth||R.outerWidth(),flashButtonWindowMode:S.isTransparent?SWFUpload.WINDOW_MODE.TRANSPARENT:SWFUpload.WINDOW_MODE.OPAQUE,flashButtonCursorEffect:SWFUpload.CURSOR.HAND,listeners:{onUploadStart:function(){U.uploadManager.swfUploader.setButtonDisabled(true)},afterUploadComplete:function(){U.uploadManager.swfUploader.setButtonDisabled(false)}}}};J.swfUploadSetupDecorator=function(T,R){var S={};J.mergeComponentOptions(S,"fluid.swfUploadSetupDecorator",R);S.flashVersion=swfobject.getFlashPlayerVersion().major;F(S,T);if(S.flashVersion===9){A(S,T)}else{O(S,T)}return S};J.defaults("fluid.swfUploadSetupDecorator",{flashButtonAlwaysVisible:false,transparentEvenInIE:true,flashButtonImageURL:"../images/browse.png",styles:{browseButtonOverlay:"fl-uploader-browse-overlay",flash9Container:"fl-uploader-flash9-container",uploaderWrapperFlash10:"fl-uploader-flash10-wrapper"}});var M={uploadURL:"upload_url",flashURL:"flash_url",postParams:"post_params",fileSizeLimit:"file_size_limit",fileTypes:"file_types",fileTypesDescription:"file_types_description",fileUploadLimit:"file_upload_limit",fileQueueLimit:"file_queue_limit",flashButtonPeerId:"button_placeholder_id",flashButtonImageURL:"button_image_url",flashButtonHeight:"button_height",flashButtonWidth:"button_width",flashButtonWindowMode:"button_window_mode",flashButtonCursorEffect:"button_cursor",debug:"debug"};var Q={afterReady:"swfupload_loaded_handler",onFileDialog:"file_dialog_start_handler",afterFileQueued:"file_queued_handler",onQueueError:"file_queue_error_handler",afterFileDialog:"file_dialog_complete_handler",onFileStart:"upload_start_handler",onFileProgress:"upload_progress_handler",onFileError:"upload_error_handler",onFileSuccess:"upload_success_handler"};var P=function(W,U,V){var R=V||{};for(var S in U){var T=W[S];if(T){R[T]=U[S]}}return R};var K=function(V,X,W){var S=W||{};for(var T in V.events){var R=V.events[T].fire;var U=X[T];if(U){S[U]=R}}S.upload_complete_handler=function(Y){V.queueManager.finishFile(Y);if(V.queueManager.shouldUploadNextFile()){V.swfUploader.startUpload()}else{if(V.queueManager.queue.shouldStop){V.swfUploader.stopUpload()}V.queueManager.complete()}};return S};var L=function(R){if(R.queue.isUploading){return }if(R.options.fileQueueLimit===1){R.swfUploader.selectFile()}else{R.swfUploader.selectFiles()}};var I=function(R){R.queue.shouldStop=true;R.events.onUploadStop.fire()};var E=function(R){var S=function(T){J.find(R.queue.files,function(U){if(U.id===T.id){U.filestatus=T.filestatus;return true}})};R.events.afterFileQueued.addListener(function(T){R.queue.addFile(T)});R.events.onFileStart.addListener(function(T){R.queueManager.startFile();S(T)});R.events.onFileProgress.addListener(function(U,X,V){var T=R.queue.currentBatch;var W=X-T.previousBytesUploadedForFile;T.totalBytesUploaded+=W;T.bytesUploadedForFile+=W;T.previousBytesUploadedForFile=X;S(U)});R.events.onFileError.addListener(function(U,T){if(T===J.uploader.errorConstants.UPLOAD_STOPPED){R.queue.isUploading=false}else{if(R.queue.isUploading){R.queue.currentBatch.totalBytesUploaded+=U.size;R.queue.currentBatch.numFilesErrored++}}S(U)});R.events.onFileSuccess.addListener(function(T){if(R.queue.currentBatch.bytesUploadedForFile===0){R.queue.currentBatch.totalBytesUploaded+=T.size}S(T)});R.events.afterUploadComplete.addListener(function(){R.queue.isUploading=false})};var D=function(S,R){S.queue.removeFile(R);S.swfUploader.cancelUpload(R.id);S.events.afterFileRemoved.fire(R)};var N=function(S,R){S.events=R;S.queue=J.fileQueue();S.queueManager=J.fileQueue.manager(S.queue,S.events);S.swfUploadSettings=P(M,S.options);K(S,Q,S.swfUploadSettings);S.swfUploader=new SWFUpload(S.swfUploadSettings);E(S)};J.swfUploadManager=function(S,R){var T={};J.mergeComponentOptions(T,"fluid.swfUploadManager",R);J.mergeListeners(S,T.options.listeners);T.browseForFiles=function(){L(T)};T.removeFile=function(U){D(T,U)};T.start=function(){T.queueManager.start();T.swfUploader.startUpload()};T.stop=function(){I(T)
};N(T,S);return T};J.defaults("fluid.swfUploadManager",{uploadURL:"",flashURL:"../../../lib/swfupload/flash/swfupload.swf",flashButtonPeerId:"",postParams:{},fileSizeLimit:"20480",fileTypes:"*",fileTypesDescription:null,fileUploadLimit:0,fileQueueLimit:0,debug:false})})(jQuery,fluid_1_2);fluid_1_2=fluid_1_2||{};(function(G,I){var d=function(g,f){return g.locate("fileQueue").find("#"+f.id)};var F=function(g,f){return G("#"+f.id+"_error",g.container)};var E=function(j,k){var h=j.uploadManager.queue.files;for(var g=0;g<h.length;g++){var f=h[g];if(f.id.toString()===k.attr("id")){return f}}return null};var U=function(g,f){var h=f.id+"_progress";return g.fileProgressors[h]};var a=function(h,f){var g=d(h,f);h.scroller.scrollTo(g);var i=U(h,f);i.refreshView();i.show()};var R=function(i,g,h,f){var j=I.uploader.derivePercent(h,f);var k=j+"%";U(i,g).update(j,k)};var N=function(h,f){var g=d(h,f);U(h,f).hide();if(f.filestatus===I.uploader.fileStatusConstants.COMPLETE){h.locate("fileIconBtn",g).removeClass(h.options.styles.dim)}};var C=function(h,g){var i=U(h,g);if(!i){return }var f=i.displayElement;f.remove()};var b=function(f,g){g.fadeOut("fast",function(){g.remove();f.refreshView()})};var e=function(g,f){if(f.filestatus===I.uploader.fileStatusConstants.ERROR){b(g,F(g,f))}};var B=function(g,f,h){C(g,f);e(g,f);g.uploadManager.removeFile(f);b(g,h)};var L=function(g,h){var f=E(g,h);if(!f||f.filestatus===I.uploader.fileStatusConstants.COMPLETE){return }B(g,f,h)};var W=function(g,f){var h=d(g,f);B(g,f,h)};var K=function(i,g){var h=function(){if(i.hasClass(g.ready)&&!i.hasClass(g.uploading)){i.addClass(g.hover)}};var f=function(){if(i.hasClass(g.ready)&&!i.hasClass(g.uploading)){i.removeClass(g.hover)}};i.hover(h,f)};var J=function(f,h){var g=function(){L(f,h)};I.activatable(h,null,{additionalBindings:[{key:G.ui.keyCode.DELETE,activateHandler:g}]})};var M=function(f,g){if(G.browser.msie&&G.browser.version<7){K(g,f.options.styles)}f.locate("fileIconBtn",g).click(function(){L(f,g)});J(f,g)};var Q=function(g,f){var h=g.rowTemplate.clone();h.removeClass(g.options.styles.hiddenTemplate);g.locate("fileName",h).text(f.name);g.locate("fileSize",h).text(I.uploader.formatFileSize(f.size));g.locate("fileIconBtn",h).addClass(g.options.styles.remove);h.attr("id",f.id);h.addClass(g.options.styles.ready);M(g,h);return h};var S=function(g,j){var f=g.rowProgressorTemplate.clone();var h=j.attr("id");var i=h+"_progress";f.attr("id",i);f.css("top",j.position().top);f.height(j.height()).width(5);g.container.after(f);g.fileProgressors[i]=I.progress(g.uploadContainer,{selectors:{progressBar:"#"+h,displayElement:"#"+i,label:"#"+i+" .fl-uploader-file-progress-text",indicator:"#"+i}})};var V=function(g,f){var h=Q(g,f);if(!(G.browser.msie&&(G.browser.version>=8))){h.hide()}g.container.append(h);h.fadeIn("slow");g.scroller.scrollBottom();S(g,h);g.refreshView()};var Z=function(f){var g=f.locate("fileIconBtn",f.locate("fileRows"));g.attr("disabled","disabled");g.addClass(f.options.styles.dim)};var H=function(f){var g=f.locate("fileIconBtn",f.locate("fileRows"));g.removeAttr("disabled");g.removeClass(f.options.styles.dim)};var P=function(f,h,g){h.removeClass(f.options.styles.ready).removeClass(f.options.styles.error).addClass(g)};var A=function(h,g){var i=d(h,g);P(h,i,h.options.styles.uploaded);i.attr("title",h.options.strings.status.success);I.enabled(i,false);var f=h.locate("fileIconBtn",i);f.unbind("click");f.removeClass(h.options.styles.remove);f.attr("title",h.options.strings.status.success)};var X=function(i,k,f){var h=i.errorInfoRowTemplate.clone();h.attr("id",k.attr("id")+"_error");var j=I.keyForValue(I.uploader.errorConstants,f);var g=i.options.strings.errors[j];i.locate("errorText",h).text(g);k.after(h);i.scroller.scrollTo(h)};var c=function(i,g,f){N(i,g);if(g.filestatus===I.uploader.fileStatusConstants.ERROR){var h=d(i,g);P(i,h,i.options.styles.error);X(i,h,f)}};var T=function(f){f.returnedOptions={listeners:{afterFileQueued:f.addFile,onUploadStart:f.prepareForUpload,onFileStart:f.showFileProgress,onFileProgress:f.updateFileProgress,onFileSuccess:f.markFileComplete,onFileError:f.showErrorForFile,afterFileComplete:f.hideFileProgress,afterUploadComplete:f.refreshAfterUpload}}};var Y=function(f){I.tabbable(f.container);f.selectableContext=I.selectable(f.container,{selectableSelector:f.options.selectors.fileRows,onSelect:function(g){G(g).addClass(f.options.styles.selected)},onUnselect:function(g){G(g).removeClass(f.options.styles.selected)}})};var O=function(f){f.rowTemplate=f.locate("rowTemplate").remove();f.errorInfoRowTemplate=f.locate("errorInfoRowTemplate").remove();f.errorInfoRowTemplate.removeClass(f.options.styles.hiddenTemplate);f.rowProgressorTemplate=f.locate("rowProgressorTemplate",f.uploadContainer).remove()};var D=function(g,f){g.uploadManager=f;g.scroller=I.scroller(g.container);O(g);Y(g);T(g)};I.fileQueueView=function(g,j,f,h){var i=I.initView("fluid.fileQueueView",g,h);i.uploadContainer=j;i.fileProgressors={};i.addFile=function(k){V(i,k)};i.removeFile=function(k){W(i,k)};i.prepareForUpload=function(){Z(i)};i.refreshAfterUpload=function(){H(i)};i.showFileProgress=function(k){a(i,k)};i.updateFileProgress=function(l,m,k){R(i,l,m,k)};i.markFileComplete=function(k){U(i,k).update(100,"100%");A(i,k)};i.showErrorForFile=function(l,k){c(i,l,k)};i.hideFileProgress=function(k){N(i,k)};i.refreshView=function(){i.scroller.refreshView();i.selectableContext.refresh()};D(i,f);return i};I.defaults("fluid.fileQueueView",{selectors:{fileRows:".flc-uploader-file",fileName:".flc-uploader-file-name",fileSize:".flc-uploader-file-size",fileIconBtn:".flc-uploader-file-action",errorText:".flc-uploader-file-error",rowTemplate:".flc-uploader-file-tmplt",errorInfoRowTemplate:".flc-uploader-file-error-tmplt",rowProgressorTemplate:".flc-uploader-file-progressor-tmplt"},styles:{hover:"fl-uploader-file-hover",selected:"fl-uploader-file-focus",ready:"fl-uploader-file-state-ready",uploading:"fl-uploader-file-state-uploading",uploaded:"fl-uploader-file-state-uploaded",error:"fl-uploader-file-state-error",remove:"fl-uploader-file-action-remove",dim:"fl-uploader-dim",hiddenTemplate:"fl-uploader-hidden-templates"},strings:{progress:{toUploadLabel:"To upload: %fileCount %fileLabel (%totalBytes)",singleFile:"file",pluralFiles:"files"},status:{success:"File Uploaded",error:"File Upload Error"},errors:{HTTP_ERROR:"File upload error: a network error occured or the file was rejected (reason unknown).",IO_ERROR:"File upload error: a network error occured.",UPLOAD_LIMIT_EXCEEDED:"File upload error: you have uploaded as many files as you are allowed during this session",UPLOAD_FAILED:"File upload error: the upload failed for an unknown reason.",QUEUE_LIMIT_EXCEEDED:"You have as many files in the queue as can be added at one time. Removing files from the queue may allow you to add different files.",FILE_EXCEEDS_SIZE_LIMIT:"One or more of the files that you attempted to add to the queue exceeded the limit of %fileSizeLimit.",ZERO_BYTE_FILE:"One or more of the files that you attempted to add contained no data.",INVALID_FILETYPE:"One or more files were not added to the queue because they were of the wrong type."}}})})(jQuery,fluid_1_2);(function(H,L){var N=function(d,e){return(e===1)?d.options.strings.progress.singleFile:d.options.strings.progress.pluralFiles};var U=function(d,e){e.removeAttr("disabled");e.removeClass(d.options.styles.dim)};var O=function(d,e){e.attr("disabled","disabled");e.addClass(d.options.styles.dim)};var A=function(d,e){e.removeClass(d.options.styles.hidden)};var F=function(d,e){e.addClass(d.options.styles.hidden)};var a=function(f,e){e=e||false;var d=f.totalProgress.indicator;d.toggleClass(f.options.styles.totalProgress,!e);d.toggleClass(f.options.styles.totalProgressError,e)};var G=function(d){O(d,d.locate("uploadButton"));if(d.uploadManager.queue.files.length===0){d.locate("browseButton").text(d.options.strings.buttons.browse);A(d,d.locate("instructions"))}};var C=function(d){O(d,d.locate("uploadButton"));U(d,d.locate("browseButton"));F(d,d.locate("pauseButton"));A(d,d.locate("uploadButton"))};var M=function(d){d.locate("browseButton").text(d.options.strings.buttons.addMore);F(d,d.locate("pauseButton"));A(d,d.locate("uploadButton"));U(d,d.locate("uploadButton"));U(d,d.locate("browseButton"));F(d,d.locate("instructions"));d.totalProgress.hide()};var D=function(d){d.totalProgress.hide(false,false);a(d);F(d,d.locate("uploadButton"));O(d,d.locate("browseButton"));U(d,d.locate("pauseButton"));A(d,d.locate("pauseButton"));d.locate(d.options.focusWithEvent.afterUploadStart).focus()};var X=function(g){var e=g.uploadManager.queue.getReadyFiles().length;var h=g.uploadManager.queue.sizeOfReadyFiles();var d=N(g,e);var f=L.stringTemplate(g.options.strings.progress.toUploadLabel,{fileCount:e,fileLabel:d,totalBytes:L.uploader.formatFileSize(h)});g.locate("totalFileStatusText").html(f)};var B=function(i){var g=i.uploadManager.queue.currentBatch;var d=L.uploader.derivePercent(g.totalBytesUploaded,g.totalBytes);var f=g.files.length;var h=N(i,f);var e=L.stringTemplate(i.options.strings.progress.totalProgressLabel,{curFileN:g.fileIdx+1,totalFilesN:f,fileLabel:h,currBytes:L.uploader.formatFileSize(g.totalBytesUploaded),totalBytes:L.uploader.formatFileSize(g.totalBytes)});i.totalProgress.update(d,e)};var S=function(h){var j=h.uploadManager.queue.getErroredFiles().length;var i=h.uploadManager.queue.files.length;var f=N(h,i);var g="";if(j>0){var e=(j===1)?h.options.strings.progress.singleError:h.options.strings.progress.pluralErrors;a(h,true);g=L.stringTemplate(h.options.strings.progress.numberOfErrors,{errorsN:j,errorLabel:e})}var d=L.stringTemplate(h.options.strings.progress.completedLabel,{curFileN:h.uploadManager.queue.getUploadedFiles().length,totalFilesN:i,errorString:g,fileLabel:f,totalCurrBytes:L.uploader.formatFileSize(h.uploadManager.queue.sizeOfUploadedFiles())});h.totalProgress.update(100,d)};var T=function(d){d.locate("browseButton").click(function(e){d.uploadManager.browseForFiles();
e.preventDefault()});d.locate("uploadButton").click(function(){d.uploadManager.start()});d.locate("pauseButton").click(function(){d.uploadManager.stop()})};var c=function(d){if(d.uploadManager.queue.getReadyFiles().length>0){M(d);X(d);d.locate(d.options.focusWithEvent.afterFileDialog).focus()}};var I=function(d){if(d.uploadManager.queue.getReadyFiles().length===0){G(d)}X(d)};var J=function(d){};var P=function(e){var d=e.uploadManager.queue.shouldStop;if(e.uploadManager.queue.getReadyFiles().length===0){C(e)}else{M(e)}S(e)};var W=function(d){d.events.afterFileDialog.addListener(function(){c(d)});d.events.afterFileRemoved.addListener(function(){I(d)});d.events.onUploadStart.addListener(function(){D(d)});d.events.onUploadStop.addListener(function(){d.locate(d.options.focusWithEvent.afterUploadStop).focus()});d.events.onFileProgress.addListener(function(){B(d)});d.events.onFileSuccess.addListener(function(){B(d)});d.events.onFileError.addListener(function(f,e,g){if(e===L.uploader.errorConstants.UPLOAD_STOPPED){J(d)}});d.events.afterUploadComplete.addListener(function(){P(d)})};var Z=function(e){var d=L.initSubcomponent(e,"uploadManager",[e.events,L.COMPONENT_OPTIONS]);return e.options.demo?L.demoUploadManager(d):d};var K=function(d){d.decorators=L.initSubcomponents(d,"decorators",[d,L.COMPONENT_OPTIONS]);d.uploadManager=Z(d);d.fileQueueView=L.initSubcomponent(d,"fileQueueView",[d.locate("fileQueue"),d.container,d.uploadManager,L.COMPONENT_OPTIONS]);d.totalProgress=L.initSubcomponent(d,"totalProgressBar",[d.container,L.COMPONENT_OPTIONS]);O(d,d.locate("uploadButton"));T(d);W(d)};L.uploader=function(d,e){var f=L.initView("fluid.uploader",d,e);K(f);return f};L.progressiveEnhanceableUploader=function(d,f,e){f=L.container(f);d=L.container(d);if(swfobject.getFlashPlayerVersion().major<9){f.show()}else{d.show();return L.uploader(d,e)}};L.uploader.formatFileSize=function(d){if(typeof d==="number"){if(d===0){return"0.0 KB"}else{if(d>0){if(d<1048576){return(Math.ceil(d/1024*10)/10).toFixed(1)+" KB"}else{return(Math.ceil(d/1048576*10)/10).toFixed(1)+" MB"}}}}return""};L.uploader.derivePercent=function(d,e){return Math.round((d*100)/e)};L.defaults("fluid.uploader",{demo:false,decorators:[{type:"fluid.swfUploadSetupDecorator"},{type:"fluid.manuallyDegrade",options:{selectors:{enhanceable:".fl-uploader.fl-progEnhance-basic"}}}],uploadManager:{type:"fluid.swfUploadManager"},fileQueueView:{type:"fluid.fileQueueView"},totalProgressBar:{type:"fluid.progress",options:{selectors:{progressBar:".flc-uploader-queue-footer",displayElement:".flc-uploader-total-progress",label:".flc-uploader-total-progress-text",indicator:".flc-uploader-total-progress",ariaElement:".flc-uploader-total-progress"}}},selectors:{fileQueue:".flc-uploader-queue",browseButton:".flc-uploader-button-browse",uploadButton:".flc-uploader-button-upload",pauseButton:".flc-uploader-button-pause",totalFileStatusText:".flc-uploader-total-progress-text",instructions:".flc-uploader-browse-instructions"},focusWithEvent:{afterFileDialog:"uploadButton",afterUploadStart:"pauseButton",afterUploadStop:"uploadButton"},styles:{disabled:"fl-uploader-disabled",hidden:"fl-uploader-hidden",dim:"fl-uploader-dim",totalProgress:"fl-uploader-total-progress-okay",totalProgressError:"fl-uploader-total-progress-errored"},events:{afterReady:null,onFileDialog:null,afterFileQueued:null,afterFileRemoved:null,onQueueError:null,afterFileDialog:null,onUploadStart:null,onUploadStop:null,onFileStart:null,onFileProgress:null,onFileError:null,onFileSuccess:null,afterFileComplete:null,afterUploadComplete:null},strings:{progress:{toUploadLabel:"To upload: %fileCount %fileLabel (%totalBytes)",totalProgressLabel:"Uploading: %curFileN of %totalFilesN %fileLabel (%currBytes of %totalBytes)",completedLabel:"Uploaded: %curFileN of %totalFilesN %fileLabel (%totalCurrBytes)%errorString",numberOfErrors:", %errorsN %errorLabel",singleFile:"file",pluralFiles:"files",singleError:"error",pluralErrors:"errors"},buttons:{browse:"Browse Files",addMore:"Add More",stopUpload:"Stop Upload",cancelRemaning:"Cancel remaining Uploads",resumeUpload:"Resume Upload"}}});L.uploader.errorConstants={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};L.uploader.fileStatusConstants={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};var b=function(d,h,e,g){var f=H("<a href='#'>"+h+"</a>");f.addClass(e);if(d==="before"){g.before(f)}else{g.after(f)}return f};var E=function(d,e){if(window.opera){d.show().removeClass("hideUploaderForOpera");e.show().addClass("hideUploaderForOpera")}else{d.show();e.hide()}};var Y=function(d){var f=b(d.options.defaultRenderLocation,d.options.strings.degradeLinkText,d.options.styles.degradeLinkClass,d.enhancedContainer);f.addClass("flc-manuallyDegrade-degrade");var e=b(d.options.defaultRenderLocation,d.options.strings.enhanceLinkText,d.options.styles.enhanceLinkClass,d.degradedContainer);e.addClass("flc-manuallyDegrade-enhance")};var V=function(d){d.degradeControl=d.locate("degradeControl");d.enhanceControl=d.locate("enhanceControl")};var R=function(d){if(!d.degradedContainer.length){return }V(d);if(!d.degradeControl.length&&!d.enhanceControl.length){d.options.controlRenderer(d);V(d)}d.degradeControl.click(d.degrade);d.enhanceControl.click(d.enhance);d.enhanceControl.hide()};var Q=function(d){var e=L.defaults("fluid.manuallyDegrade");return(d&&d.container)?d.container:e.container};L.manuallyDegrade=function(f,e){var d=Q(e);var h=L.initView("fluid.manuallyDegrade",d,e);var g=false;h.enhancedContainer=f.container;h.degradedContainer=h.locate("enhanceable");h.degrade=function(){E(h.enhanceControl,h.degradeControl);E(h.degradedContainer,h.enhancedContainer);g=true};h.enhance=function(){E(h.degradeControl,h.enhanceControl);E(h.enhancedContainer,h.degradedContainer);g=false};h.isDegraded=function(){return g};R(h);return h};L.defaults("fluid.manuallyDegrade",{container:"body",controlRenderer:Y,defaultRenderLocation:"before",strings:{degradeLinkText:"Switch to the standard single-file Uploader",enhanceLinkText:"Switch to the Flash-based multi-file Uploader"},selectors:{enhanceable:".fl-ProgEnhance-basic",degradeControl:".flc-manuallyDegrade-degrade",enhanceControl:".flc-manuallyDegrade-enhance"},styles:{degradeLinkClass:"fl-uploader-manually-degrade",enhanceLinkClass:"fl-uploader-manually-enhance"}})})(jQuery,fluid_1_2);(function(A){A.fn.bgIframe=A.fn.bgiframe=function(C){if(A.browser.msie&&parseInt(A.browser.version)<=6){C=A.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:true,src:"javascript:false;"},C||{});var D=function(E){return E&&E.constructor==Number?E+"px":E},B='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+C.src+'"style="display:block;position:absolute;z-index:-1;'+(C.opacity!==false?"filter:Alpha(Opacity='0');":"")+"top:"+(C.top=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":D(C.top))+";left:"+(C.left=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":D(C.left))+";width:"+(C.width=="auto"?"expression(this.parentNode.offsetWidth+'px')":D(C.width))+";height:"+(C.height=="auto"?"expression(this.parentNode.offsetHeight+'px')":D(C.height))+';"/>';return this.each(function(){if(A("> iframe.bgiframe",this).length==0){this.insertBefore(document.createElement(B),this.firstChild)}})}return this};if(!A.browser.version){A.browser.version=navigator.userAgent.toLowerCase().match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)[1]}})(jQuery);(function(E){var B={},K,M,O,J=E.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),A=false;E.tooltip={blocked:false,defaults:{delay:200,showURL:true,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){E.tooltip.blocked=!E.tooltip.blocked}};E.fn.extend({tooltip:function(P){P=E.extend({},E.tooltip.defaults,P);H(P);return this.each(function(){E.data(this,"tooltip-settings",P);this.tooltipText=this.title;E(this).removeAttr("title");this.alt=""}).hover(L,F).click(F)},fixPNG:J?function(){return this.each(function(){var P=E(this).css("backgroundImage");if(P.match(/^url\(["']?(.*\.png)["']?\)$/i)){P=RegExp.$1;E(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+P+"')"}).each(function(){var Q=E(this).css("position");if(Q!="absolute"&&Q!="relative"){E(this).css("position","relative")}})}})}:function(){return this},unfixPNG:J?function(){return this.each(function(){E(this).css({filter:"",backgroundImage:""})})}:function(){return this},hideWhenEmpty:function(){return this.each(function(){E(this)[E(this).html()?"show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}});function H(P){if(B.parent){return }B.parent=E('<div id="'+P.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body).hide();if(E.fn.bgiframe){B.parent.bgiframe()}B.title=E("h3",B.parent);B.body=E("div.body",B.parent);B.url=E("div.url",B.parent)}function C(P){return E.data(P,"tooltip-settings")}function G(P){if(C(this).delay){O=setTimeout(N,C(this).delay)}else{N()}A=!!C(this).track;E(document.body).bind("mousemove",D);D(P)}function L(){if(E.tooltip.blocked||this==K||(!this.tooltipText&&!C(this).bodyHandler)){return }K=this;M=this.tooltipText;if(C(this).bodyHandler){B.title.hide();var S=C(this).bodyHandler.call(this);if(S.nodeType||S.jquery){B.body.empty().append(S)}else{B.body.html(S)}B.body.show()}else{if(C(this).showBody){var R=M.split(C(this).showBody);B.title.html(R.shift()).show();B.body.empty();for(var Q=0,P;P=R[Q];Q++){if(Q>0){B.body.append("<br/>")}B.body.append(P)}B.body.hideWhenEmpty()}else{B.title.html(M).show();B.body.hide()}}if(C(this).showURL&&E(this).url()){B.url.html(E(this).url().replace("http://","")).show()}else{B.url.hide()}B.parent.addClass(C(this).extraClass);if(C(this).fixPNG){B.parent.fixPNG()
}G.apply(this,arguments)}function N(){O=null;B.parent.show();D()}function D(R){if(E.tooltip.blocked){return }if(!A&&B.parent.is(":visible")){E(document.body).unbind("mousemove",D)}if(K==null||!C(K)){return }B.parent.removeClass("viewport-right").removeClass("viewport-bottom");var T=B.parent[0].offsetLeft;var S=B.parent[0].offsetTop;if(R){T=R.pageX+C(K).left;S=R.pageY+C(K).top;B.parent.css({left:T+"px",top:S+"px"})}var P=I(),Q=B.parent[0];if(P.x+P.cx<Q.offsetLeft+Q.offsetWidth){T-=Q.offsetWidth+20+C(K).left;B.parent.css({left:T+"px"}).addClass("viewport-right")}if(P.y+P.cy<Q.offsetTop+Q.offsetHeight){S-=Q.offsetHeight+20+C(K).top;B.parent.css({top:S+"px"}).addClass("viewport-bottom")}}function I(){return{x:E(window).scrollLeft(),y:E(window).scrollTop(),cx:E(window).width(),cy:E(window).height()}}function F(P){if(E.tooltip.blocked){return }if(O){clearTimeout(O)}K=null;B.parent.hide().removeClass(C(this).extraClass);if(C(this).fixPNG){B.parent.unfixPNG()}}E.fn.Tooltip=E.fn.tooltip})(jQuery);fluid_1_2=fluid_1_2||{};(function(H,F){var D="state_initial",C="state_changed",B="state_reverted";function G(L,J){var M=L.options.strings;var I="<span class='flc-undo'><a href='#' class='flc-undo-undoControl'>"+M.undo+"</a><a href='#' class='flc-undo-redoControl'>"+M.redo+"</a></span>";var K=H(I).attr({role:"region","aria-live":"polite","aria-relevant":"all"});J.append(K);return K}function A(I){if(I.state===D){I.locate("undoContainer").hide();I.locate("redoContainer").hide()}else{if(I.state===C){I.locate("undoContainer").show();I.locate("redoContainer").hide()}else{if(I.state===B){I.locate("undoContainer").hide();I.locate("redoContainer").show()}}}}var E=function(I){I.locate("undoControl").click(function(){if(I.state!==B){F.model.copyModel(I.extremalModel,I.component.model);I.component.updateModel(I.initialModel,I);I.state=B;A(I);I.locate("redoControl").focus()}return false});I.locate("redoControl").click(function(){if(I.state!==C){I.component.updateModel(I.extremalModel,I);I.state=C;A(I);I.locate("undoControl").focus()}return false});return{modelChanged:function(J,L,K){if(K!==I){I.state=C;F.model.copyModel(I.initialModel,L);A(I)}}}};F.undoDecorator=function(I,L){var K=F.initView("undo",null,L);K.container=K.options.renderer(K,I.container);F.initDomBinder(K);F.tabindex(K.locate("undoControl"),0);F.tabindex(K.locate("redoControl"),0);K.component=I;K.initialModel={};K.extremalModel={};F.model.copyModel(K.initialModel,I.model);F.model.copyModel(K.extremalModel,I.model);K.state=D;A(K);var J=E(K);K.returnedOptions={listeners:J};return K};F.defaults("undo",{selectors:{undoContainer:".flc-undo-undoControl",undoControl:".flc-undo-undoControl",redoContainer:".flc-undo-redoControl",redoControl:".flc-undo-redoControl"},strings:{undo:"undo edit",redo:"redo edit"},renderer:G})})(jQuery,fluid_1_2);fluid_1_2=fluid_1_2||{};(function(I,K){function N(h,g,d,f){var e=document.createEvent("KeyEvents");e.initKeyEvent(g,1,1,null,0,0,0,0,d,f);h.dispatchEvent(e)}K.setCaretToEnd=function(h,f){var i=f?f.length:0;try{h.focus();if(h.setSelectionRange){h.setSelectionRange(i,i);if(I.browser.mozilla&&i>0){N(h,"keypress",92,92);N(h,"keydown",8,0);N(h,"keypress",8,0)}}else{if(h.createTextRange){var d=h.createTextRange();d.move("character",i);d.select()}}}catch(g){}};K.deadMansBlur=function(h,e,g){var d=false;I(h).blur(function(){d=true;setTimeout(function(){if(d){g(h)}},150)});var f=function(){d=false};e.focus(f);e.click(f)};var D=function(e,f){e.editContainer=e.locate("editContainer");e.editField=e.locate("edit");if(e.editContainer.length!==1){if(e.editField.length===1){e.editContainer=e.editField}else{if(e.editContainer.length>1){K.fail("InlineEdit did not find a unique container for selector "+e.options.selectors.editContainer+": "+K.dumpEl(e.editContainer))}}}if(e.editContainer.length===1&&!e.editField){e.editField=e.locate("edit",e.editContainer)}if(!f){return }var d=e.options.editModeRenderer(e);if(d){e.editContainer=d.container;e.editField=d.field}if(e.editField.length===0){K.fail("InlineEdit improperly initialised - editField could not be located (selector "+e.options.selectors.edit+")")}};var L=function(d){d.editContainer.hide();d.viewEl.show()};var E=function(d){if(d.isEditing()){setTimeout(function(){d.editView.value(d.model.value)},1);L(d);d.events.afterFinishEdit.fire(d.model.value,d.model.value,d.editField[0],d.viewEl[0])}};var R=function(h){var i=h.editView.value();var f=h.model.value;var d=h.viewEl[0];var g=h.editField[0];var e=h.events.onFinishEdit.fire(i,f,g,d);if(e===false){return }h.updateModelValue(i);h.events.afterFinishEdit.fire(i,f,g,d);L(h)};var W=function(f){if(f.options.submitOnEnter===undefined){f.options.submitOnEnter="textarea"!==K.unwrap(f.editField).nodeName.toLowerCase()}function g(h){return h.keyCode?h.keyCode:(h.which?h.which:0)}var d=function(h){var i=g(h);if(i===I.ui.keyCode.ESCAPE){E(f);return false}};var e=function(h){var i=g(h);if(i!==I.ui.keyCode.ENTER){return true}R(f);f.viewEl.focus();return false};if(f.options.submitOnEnter){f.editContainer.keypress(e)}f.editContainer.keydown(d)};var H=function(d){if(d.options.blurHandlerBinder){d.options.blurHandlerBinder(d)}else{var e=function(f){if(d.isEditing()){R(d)}return false};d.editField.blur(e)}};var Y=function(e,d){if(!e.editInitialized){D(e,!e.options.lazyEditView||!d);if(!e.options.lazyEditView||!d){e.editView=K.initSubcomponent(e,"editView",e.editField);I.extend(true,e.editView,K.initSubcomponent(e,"editAccessor",e.editField));W(e);H(e);e.editView.refreshView(e);e.editInitialized=true}}};var P=function(e){Y(e,false);var d=e.viewEl;var f=e.displayView.value();e.updateModelValue(e.model.value===""?"":f);if(e.options.applyEditPadding){e.editField.width(Math.max(d.width()+e.options.paddings.edit,e.options.paddings.minimumEdit))}d.removeClass(e.options.styles.invitation);d.removeClass(e.options.styles.focus);d.hide();e.editContainer.show();if(e.tooltipEnabled()){I("#"+e.options.tooltipId).hide()}setTimeout(function(){e.editField.focus();K.setCaretToEnd(e.editField[0],e.editView.value());if(e.options.selectOnEdit){e.editField[0].select()}},0);e.events.afterBeginEdit.fire()};var a=function(e,d,f){e.removeClass(d);e.css("padding-right",f)};var T=function(d){d.displayView.value(d.options.defaultViewText);d.viewEl.css("padding-right",d.existingPadding);d.viewEl.addClass(d.options.styles.defaultViewStyle)};var X=function(d){d.displayView.value("");if(I.browser.msie){if(d.viewEl.css("display")==="inline"){d.viewEl.css("display","inline-block")}}};var O=function(d){d.displayView.value(d.model.value);a(d.viewEl,d.options.styles.defaultViewStyle,d.existingPadding)};var S=function(d,e){d.displayView.refreshView(d,e);if(d.editView){d.editView.refreshView(d,e)}};var Z=function(d,e){d.model.value=e;d.refreshView()};var B=function(e,g,f){var d=e.options.modelComparator;var h=d?d(e.model.value,g):e.model.value===g;if(!h){var i=I.extend(true,{},e.model);e.model.value=g;e.events.modelChanged.fire(e.model,i,f);e.refreshView(f)}};var U=function(e,g){var f=function(h){e.addClass(g)};var d=function(h){e.removeClass(g)};e.hover(f,d)};var c=function(d){return function(){var e=d.events.onBeginEdit.fire();if(e===false){return false}P(d);return true}};function G(e){var d=K.unwrap(e.viewEl);return function(g){var f=K.findAncestor(g.target,function(h){if(/input|select|textarea|button|a/i.test(h.nodeName)||h===d){return true}});if(f===d){e.edit();return false}}}var b=function(d){U(d.viewEl,d.options.styles.invitation);d.viewEl.click(G(d))};var A=function(f,d,g){var h=function(){f.addClass(d);f.addClass(g)};var e=function(){f.removeClass(d);f.removeClass(g)};f.focus(h);f.blur(e)};var M=function(e){K.tabbable(e.viewEl);var d=G(e);K.activatable(e.viewEl,function(f){return d(f)})};var F=function(d,e){d.attr("role","button")};var V=function(h){if(h.editContainer.length>0&&h.editField.length>0){return{container:h.editContainer,field:h.editField}}var e="<span><input type='text' class='flc-inlineEdit-edit fl-inlineEdit-edit'/></span>";var j=I(e);var d=I("input",j);var g=h.container.attr("id");if(g){var i=g+"-edit-container";var f=g+"-edit";j.attr("id",i);d.attr("id",f)}h.viewEl.after(j);return{container:j,field:d}};var Q=function(e){var d=false;e.events.onBeginEdit.addListener(function(){d=true});e.events.afterFinishEdit.addListener(function(){d=false});return function(){return d}};var C=function(d,e){var f=e.viewEl.css("padding-right");e.existingPadding=f?parseFloat(f):0;Z(e,e.displayView.value());b(e);M(e);A(e.viewEl,e.options.styles.focus,e.options.styles.invitation);F(e.viewEl);if(e.editContainer){e.editContainer.hide()}var g=function(){if(e.tooltipEnabled()){e.viewEl.tooltip({delay:e.options.tooltipDelay,extraClass:e.options.styles.tooltip,bodyHandler:function(){return e.options.tooltipText},id:e.options.tooltipId})}};I(g);e.decorators=K.initSubcomponents(e,"componentDecorators",[e,K.COMPONENT_OPTIONS])};var J=function(f,d){var e=[];f.each(function(g,h){e.push(K.inlineEdit(I(h),d))});return e};K.inlineEdit=function(d,f){var e=K.initView("inlineEdit",d,f);e.viewEl=e.locate("text");e.displayView=K.initSubcomponent(e,"displayView",e.viewEl);I.extend(true,e.displayView,K.initSubcomponent(e,"displayAccessor",e.viewEl));e.model={value:""};e.edit=c(e);e.isEditing=Q(e);e.finish=function(){R(e)};e.cancel=function(){E(e)};e.tooltipEnabled=function(){return e.options.useTooltip&&I.fn.tooltip};e.refreshView=function(g){S(e,g)};e.updateModelValue=function(h,g){B(e,h,g)};e.updateModel=function(g,h){B(e,g.value,h)};Y(e,true);C(d,e);return e};K.inlineEdit.standardAccessor=function(d){var f=d.nodeName.toLowerCase();var e="input"===f||"textarea"===f?"val":"text";return{value:function(g){return I(d)[e](g)}}};K.inlineEdit.richTextViewAccessor=function(d){return{value:function(e){return I(d).html(e)}}};K.inlineEdit.standardDisplayView=function(e){var d={refreshView:function(f,g){if(f.model.value){O(f)}else{if(f.options.defaultViewText){T(f)}else{X(f)}}if((I.trim(f.viewEl.text()).length===0)&&(f.existingPadding<f.options.paddings.minimumView)){f.viewEl.css("padding-right",f.options.paddings.minimumView)
}}};return d};K.inlineEdit.standardEditView=function(d){var e={refreshView:function(f,g){if(!g||f.editField&&f.editField.index(g)===-1){f.editView.value(f.model.value)}}};I.extend(true,e,K.inlineEdit.standardAccessor(d));return e};K.inlineEdits=function(e,f){f=f||{};var g=I.extend({},K.defaults("inlineEdits").selectors,f.selectors);var d=K.container(e);var h=I(g.editables,d);return J(h,f)};K.defaults("inlineEdit",{selectors:{text:".flc-inlineEdit-text",editContainer:".flc-inlineEdit-editContainer",edit:".flc-inlineEdit-edit"},styles:{text:"fl-inlineEdit-text",edit:"fl-inlineEdit-edit",invitation:"fl-inlineEdit-invitation",defaultViewStyle:"fl-inlineEdit-invitation-text",tooltip:"fl-inlineEdit-tooltip",focus:"fl-inlineEdit-focus"},events:{modelChanged:null,onBeginEdit:"preventable",afterBeginEdit:null,onFinishEdit:"preventable",afterFinishEdit:null,afterInitEdit:null},paddings:{edit:10,minimumEdit:80,minimumView:60},applyEditPadding:true,blurHandlerBinder:null,submitOnEnter:undefined,modelComparator:null,displayAccessor:{type:"fluid.inlineEdit.standardAccessor"},displayView:{type:"fluid.inlineEdit.standardDisplayView"},editAccessor:{type:"fluid.inlineEdit.standardAccessor"},editView:{type:"fluid.inlineEdit.standardEditView"},editModeRenderer:V,lazyEditView:false,defaultViewText:"Click here to edit",tooltipText:"Click item to edit",tooltipId:"tooltip",useTooltip:false,tooltipDelay:1000,selectOnEdit:false});K.defaults("inlineEdits",{selectors:{editables:".flc-inlineEditable"}})})(jQuery,fluid_1_2);fluid_1_2=fluid_1_2||{};(function(D,C){C.inlineEdit.makeViewAccessor=function(G,H,I){return function(J){return{value:function(L){var K=G(J);if(!K){if(L){D(J).val(L)}return""}if(L){H(J,K,L)}else{return I(K)}}}}};var A=function(K,G,H){var J=C.defaults(K);var I=C.merge(J?J.mergePolicy:null,{},J,H);return C.inlineEdit(G,I)};C.inlineEdit.normalizeHTML=function(H){var G=D.trim(H.replace(/\s+/g," "));G=G.replace(/\s+<\//g,"</");G=G.replace(/\<(\S+)[^\>\s]*\>/g,function(I){return I.toLowerCase()});return G};C.inlineEdit.htmlComparator=function(H,G){return C.inlineEdit.normalizeHTML(H)===C.inlineEdit.normalizeHTML(G)};C.inlineEdit.tinyMCE=function(G,H){var I=A("fluid.inlineEdit.tinyMCE",G,H);tinyMCE.init(I.options.tinyMCE);return I};C.inlineEdit.tinyMCE.getEditor=function(G){return tinyMCE.get(G.id)};C.inlineEdit.tinyMCE.setValue=function(G,H,I){D(G).val(I);H.setContent(I,{format:"raw"})};C.inlineEdit.tinyMCE.getValue=function(G){return G.getContent()};var F=C.inlineEdit.tinyMCE;F.viewAccessor=C.inlineEdit.makeViewAccessor(F.getEditor,F.setValue,F.getValue);C.inlineEdit.tinyMCE.blurHandlerBinder=function(G){function H(I){setTimeout(function(){tinyMCE.execCommand("mceFocus",false,G.editField[0].id);if(D.browser.mozilla&&D.browser.version.substring(0,3)==="1.8"){return }I.selection.select(I.getBody(),1);I.selection.collapse(0)},10)}G.events.afterInitEdit.addListener(function(I){H(I);var J=I.getBody();C.deadMansBlur(G.editField,D(J),function(){G.cancel()})});G.events.afterBeginEdit.addListener(function(){var I=tinyMCE.get(G.editField[0].id);if(I){H(I)}})};C.inlineEdit.tinyMCE.editModeRenderer=function(I){var H=I.options.tinyMCE;H.elements=C.allocateSimpleId(I.editField);var G=H.init_instance_callback;H.init_instance_callback=function(J){I.events.afterInitEdit.fire(J);if(G){G()}};tinyMCE.init(H)};C.defaults("fluid.inlineEdit.tinyMCE",{tinyMCE:{mode:"exact",theme:"simple"},useTooltip:true,selectors:{edit:"textarea"},styles:{invitation:"fl-inlineEdit-richText-invitation"},displayAccessor:{type:"fluid.inlineEdit.richTextViewAccessor"},editAccessor:{type:"fluid.inlineEdit.tinyMCE.viewAccessor"},lazyEditView:true,modelComparator:C.inlineEdit.htmlComparator,blurHandlerBinder:C.inlineEdit.tinyMCE.blurHandlerBinder,editModeRenderer:C.inlineEdit.tinyMCE.editModeRenderer});C.inlineEdit.FCKEditor=function(G,H){return A("fluid.inlineEdit.FCKEditor",G,H)};C.inlineEdit.FCKEditor.getEditor=function(G){var H=typeof (FCKeditorAPI)==="undefined"?null:FCKeditorAPI.GetInstance(G.id);return H};C.inlineEdit.FCKEditor.complete=C.event.getEventFirer();C.inlineEdit.FCKEditor.complete.addListener(function(H){var G=H.LinkedField;var I=D.data(G,"fluid.inlineEdit.FCKEditor");if(I&&I.events){I.events.afterInitEdit.fire(H)}});C.inlineEdit.FCKEditor.blurHandlerBinder=function(G){function H(I){I.Focus()}G.events.afterInitEdit.addListener(function(I){H(I)});G.events.afterBeginEdit.addListener(function(){var I=C.inlineEdit.FCKEditor.getEditor(G.editField[0]);if(I){H(I)}})};C.inlineEdit.FCKEditor.editModeRenderer=function(I){var J=C.allocateSimpleId(I.editField);D.data(C.unwrap(I.editField),"fluid.inlineEdit.FCKEditor",I);var H=new FCKeditor(J);var G=C.copy(I.options.FCKEditor);G.BasePath=G.BasePath+"editor/";D.extend(true,H.Config,G);D.extend(true,H,I.options.FCKEditor);H.Config.fluidInstance=I;H.ReplaceTextarea()};C.inlineEdit.FCKEditor.setValue=function(G,H,I){H.SetHTML(I)};C.inlineEdit.FCKEditor.getValue=function(G){return G.GetHTML()};var E=C.inlineEdit.FCKEditor;E.viewAccessor=C.inlineEdit.makeViewAccessor(E.getEditor,E.setValue,E.getValue);C.defaults("fluid.inlineEdit.FCKEditor",{selectors:{edit:"textarea"},styles:{invitation:"fl-inlineEdit-richText-invitation"},displayAccessor:{type:"fluid.inlineEdit.richTextViewAccessor"},editAccessor:{type:"fluid.inlineEdit.FCKEditor.viewAccessor"},lazyEditView:true,modelComparator:C.inlineEdit.htmlComparator,blurHandlerBinder:C.inlineEdit.FCKEditor.blurHandlerBinder,editModeRenderer:C.inlineEdit.FCKEditor.editModeRenderer,FCKEditor:{BasePath:"fckeditor/"}});C.inlineEdit.CKEditor=function(G,H){return A("fluid.inlineEdit.CKEditor",G,H)};C.inlineEdit.CKEditor.getEditor=function(G){return CKEDITOR.instances[G.id]};C.inlineEdit.CKEditor.setValue=function(G,H,I){H.setData(I)};C.inlineEdit.CKEditor.getValue=function(G){return G.getData()};var B=C.inlineEdit.CKEditor;B.viewAccessor=C.inlineEdit.makeViewAccessor(B.getEditor,B.setValue,B.getValue);C.inlineEdit.CKEditor.focus=function(G){setTimeout(function(){G.focus()},0)};C.inlineEdit.CKEditor.normalizeHTML=function(I){var H=C.inlineEdit.normalizeHTML(I);var G=H.indexOf(">");if(G!==-1&&G<H.length-1){if(H.charAt(G+1)!==" "){H=H.substring(0,G+1)+" "+H.substring(G+1)}}return H};C.inlineEdit.CKEditor.htmlComparator=function(H,G){return C.inlineEdit.CKEditor.normalizeHTML(H)===C.inlineEdit.CKEditor.normalizeHTML(G)};C.inlineEdit.CKEditor.blurHandlerBinder=function(G){G.events.afterInitEdit.addListener(C.inlineEdit.CKEditor.focus);G.events.afterBeginEdit.addListener(function(){var H=C.inlineEdit.CKEditor.getEditor(G.editField[0]);if(H){C.inlineEdit.CKEditor.focus(H)}})};C.inlineEdit.CKEditor.editModeRenderer=function(H){var I=C.allocateSimpleId(H.editField);D.data(C.unwrap(H.editField),"fluid.inlineEdit.CKEditor",H);var G=CKEDITOR.replace(I,H.options.CKEditor);G.on("instanceReady",function(J){C.inlineEdit.CKEditor.focus(J.editor);H.events.afterInitEdit.fire(J.editor)})};C.defaults("fluid.inlineEdit.CKEditor",{selectors:{edit:"textarea"},styles:{invitation:"fl-inlineEdit-richText-invitation"},displayAccessor:{type:"fluid.inlineEdit.richTextViewAccessor"},editAccessor:{type:"fluid.inlineEdit.CKEditor.viewAccessor"},lazyEditView:true,modelComparator:C.inlineEdit.CKEditor.htmlComparator,blurHandlerBinder:C.inlineEdit.CKEditor.blurHandlerBinder,editModeRenderer:C.inlineEdit.CKEditor.editModeRenderer,CKEditor:{}});C.inlineEdit.dropdown=function(G,H){return A("fluid.inlineEdit.dropdown",G,H)};C.inlineEdit.dropdown.editModeRenderer=function(G){var H=C.allocateSimpleId(G.editField);G.editField.selectbox({finishHandler:function(){G.finish()}});return{container:G.editContainer,field:D("input.selectbox",G.editContainer)}};C.inlineEdit.dropdown.blurHandlerBinder=function(G){C.deadMansBlur(G.editField,D("div.selectbox-wrapper li",G.editContainer),function(){G.cancel()})};C.defaults("fluid.inlineEdit.dropdown",{applyEditPadding:false,blurHandlerBinder:C.inlineEdit.dropdown.blurHandlerBinder,editModeRenderer:C.inlineEdit.dropdown.editModeRenderer})})(jQuery,fluid_1_2);function FCKeditor_OnComplete(A){fluid.inlineEdit.FCKEditor.complete.fire(A)}var fluid_1_2=fluid_1_2||{};(function(B,A){A.dom.computeAbsolutePosition=function(C){var E=0,D=0;if(C.offsetParent){do{E+=C.offsetLeft;D+=C.offsetTop;C=C.offsetParent}while(C);return[E,D]}};A.dom.cleanseScripts=function(C){var D=B.data(C,A.dom.cleanseScripts.MARKER);if(!D){A.dom.iterateDom(C,function(E){return E.tagName.toLowerCase()==="script"?"delete":null});B.data(C,A.dom.cleanseScripts.MARKER,true)}};A.dom.cleanseScripts.MARKER="fluid-scripts-cleansed";A.dom.insertAfter=function(C,D){var E=D.nextSibling;if(!E){D.parentNode.appendChild(C)}else{D.parentNode.insertBefore(C,E)}};A.dom.isWhitespaceNode=function(C){return !(/[^\t\n\r ]/.test(C.data))};A.dom.isIgnorableNode=function(C){return(C.nodeType===8)||((C.nodeType===3)&&A.dom.isWhitespaceNode(C))}})(jQuery,fluid_1_2);var fluid_1_2=fluid_1_2||{};(function(F,G){G.orientation={HORIZONTAL:4,VERTICAL:1};G.rectSides={4:["left","right"],1:["top","bottom"],8:"top",12:"bottom",2:"left",3:"right"};G.position={BEFORE:-1,AFTER:1,INSIDE:2,REPLACE:3};G.direction={NEXT:1,PREVIOUS:-1,UP:8,DOWN:12,LEFT:2,RIGHT:3};G.directionSign=function(K){return K===G.direction.UP||K===G.direction.LEFT?G.direction.PREVIOUS:G.direction.NEXT};G.directionAxis=function(K){return K===G.direction.LEFT||K===G.direction.RIGHT?0:1};G.directionOrientation=function(K){return G.directionAxis(K)?G.orientation.VERTICAL:G.orientation.HORIZONTAL};G.keycodeDirection={up:G.direction.UP,down:G.direction.DOWN,left:G.direction.LEFT,right:G.direction.RIGHT};G.moveDom=function(M,N,K){M=G.unwrap(M);N=G.unwrap(N);var L;if(K===G.position.INSIDE){N.appendChild(M)}else{if(K===G.position.BEFORE){for(L=N.previousSibling;;L=L.previousSibling){if(!L||!G.dom.isIgnorableNode(L)){if(L!==M){G.dom.cleanseScripts(M);N.parentNode.insertBefore(M,N)}break}}}else{if(K===G.position.AFTER){for(L=N.nextSibling;;L=L.nextSibling){if(!L||!G.dom.isIgnorableNode(L)){if(L!==M){G.dom.cleanseScripts(M);
G.dom.insertAfter(M,N)}break}}}else{G.fail("Unrecognised position supplied to fluid.moveDom: "+K)}}}};G.normalisePosition=function(L,N,K,M){if(L===G.position.REPLACE){L=N&&K>=M?G.position.AFTER:G.position.BEFORE}return L};G.permuteDom=function(N,R,Q,L,O){N=G.unwrap(N);R=G.unwrap(R);var P=F.inArray(N,L);if(P===-1){G.fail("Error in permuteDom: source element "+G.dumpEl(N)+" not found in source list "+G.dumpEl(L))}var V=F.inArray(R,O);if(V===-1){G.fail("Error in permuteDom: target element "+G.dumpEl(R)+" not found in source list "+G.dumpEl(O))}var K=L===O;Q=G.normalisePosition(Q,K,V,P);var U={};U[G.position.AFTER]=N.nextSibling;U[G.position.BEFORE]=N.previousSibling;G.moveDom(L[P],O[V],Q);var T=K?V-1:L.length-2;var M;if(Q===G.position.BEFORE&&K){T--}if(!K||V>P){for(M=T;M>P;--M){G.moveDom(L[M+1],L[M],G.position.AFTER)}if(P+1<L.length){G.moveDom(L[P+1],U[G.position.AFTER],G.position.BEFORE)}}var S=K?P-1:O.length-1;if(Q===G.position.AFTER){V++}if(!K||V<P){for(M=V;M<S;++M){G.moveDom(O[M],O[M+1],G.position.BEFORE)}if(S>=0&&S<O.length-1){G.moveDom(O[S],U[G.position.BEFORE],G.position.AFTER)}}};var B=function(K,L){return window.getComputedStyle?window.getComputedStyle(K,null).getPropertyValue(L):K.currentStyle[L]};var H=function(K){while(K&&K.nodeName){if(K.nodeName==="BODY"){return true}K=K.parentNode}return false};var J=function(K){return"hidden"===K.type||B(K,"display")==="none"||B(K,"visibility")==="hidden"||!H(K)};var E=function(M,L,Q){var O={};O.element=M;O.orientation=L;if(Q===G.position.INSIDE){O.position=Q}if(J(M)){O.clazz="hidden"}var P=G.dom.computeAbsolutePosition(M)||[0,0];var N=M.offsetWidth;var K=M.offsetHeight;O.rect={left:P[0],top:P[1]};O.rect.right=P[0]+N;O.rect.bottom=P[1]+K;return O};var C=10000;function D(K){return"Rect top: "+K.top+" left: "+K.left+" bottom: "+K.bottom+" right: "+K.right}function I(K){if(!K||!K.rect){return"null"}else{return D(K.rect)+" position: "+K.position+" for "+G.dumpEl(K.element)}}G.dropManager=function(){var S=[];var L={};var R={};var N;function T(X){return G.allocateSimpleId(X)}function U(X,c,a,b,d,Z){var Y=F.extend(true,{},a);Y.rect[c[b]]=Y.rect[c[1-b]]+(b?1:-1);Y.rect[c[1-b]]=(b?-1:1)*C;Y.position=d===G.position.INSIDE?d:(b?G.position.BEFORE:G.position.AFTER);Y.clazz=Z;X[X.length]=Y}function Q(a,Y,Z,X,c,b){var f=F.extend(true,{},Z);var d=F.extend(true,{},Z);var e=(f.rect[Y[0]]+f.rect[Y[1]])/2;f.rect[Y[1]]=e;f.position=G.position.BEFORE;d.rect[Y[0]]=e;d.position=G.position.AFTER;f.clazz=c;d.clazz=b;a[a.length]=f;a[a.length]=d}function P(Z,Y,a,X,b){Y+=a;if(Y<0&&X==="locked"){return"locked"}if(Y>=Z.length||b===null){return null}else{a=Z[Y];return b(a)==="locked"&&X==="locked"?"locked":null}}var O;var M,K;R.updateGeometry=function(g){O=g;S=[];L={};var X=g.elementMapper;for(var f=0;f<g.extents.length;++f){var b=g.extents[f];var Y=b.orientation;var Z=G.rectSides[Y];var a=function(m,i,p,q,l){var k=E(m,Y,q);k.owner=b;if(k.clazz!=="hidden"&&X){k.clazz=X(m)}L[T(m)]=k;var n=P(b.elements,l,G.position.BEFORE,k.clazz,X);var o=P(b.elements,l,G.position.AFTER,k.clazz,X);if(q===G.position.INSIDE){S[S.length]=k}else{Q(S,Z,k,q,n,o)}if(i&&g.sentinelize){U(S,Z,k,1,q,n)}if(p&&g.sentinelize){U(S,Z,k,0,q,o)}return k};var h=true;for(var c=0;c<b.elements.length;++c){var e=b.elements[c];var d=a(e,c===0,c===b.elements.length-1,G.position.INTERLEAVED,c);if(d.clazz!=="hidden"){h=false}}if(h&&b.parentElement){a(b.parentElement,true,true,G.position.INSIDE)}}};R.startDrag=function(c,b,Z,a){var e=b[0]+Z/2;var d=b[1]+a/2;var Y=e-c.pageX;var X=d-c.pageY;R.updateGeometry(O);N=null;M=Y;K=X;F("body").bind("mousemove.fluid-dropManager",R.mouseMove)};R.lastPosition=function(){return N};R.endDrag=function(){F("body").unbind("mousemove.fluid-dropManager")};R.mouseMove=function(Y){var X=Y.pageX+M;var a=Y.pageY+K;var Z=R.closestTarget(X,a,N);if(Z&&Z!==G.dropManager.NO_CHANGE){N=Z;R.dropChangeFirer.fire(Z)}};R.dropChangeFirer=G.event.getEventFirer();var V={element:null};R.closestTarget=function(g,e,b){var a=Number.MAX_VALUE;var Y=V;var X=Number.MAX_VALUE;var f=V;for(var d=0;d<S.length;++d){var c=S[d];if(c.clazz==="hidden"){continue}var Z=G.geom.minPointRectangle(g,e,c.rect);if(c.clazz==="locked"){if(Z<X){X=Z;f=c}}else{if(Z<a){a=Z;Y=c}if(Z===0){break}}}if(!Y){return Y}if(X>=a){f=V}if(b&&b.position===Y.position&&G.unwrap(b.element)===G.unwrap(Y.element)&&G.unwrap(b.lockedelem)===G.unwrap(f.element)){return G.dropManager.NO_CHANGE}return{position:Y.position,element:Y.element,lockedelem:f.element}};R.shuffleProjectFrom=function(X,a,Z){var Y=R.projectFrom(X,a,Z);if(Y){Y.position=G.position.REPLACE}return Y};R.projectFrom=function(a,c,b){R.updateGeometry(O);var Z=L[T(a)];var Y=G.geom.projectFrom(Z.rect,c,S,b);if(!Y.cacheelem){return null}var X=Y.cacheelem.position;return{element:Y.cacheelem.element,position:X?X:G.position.BEFORE}};function W(Y,a,Z){var b=G.directionSign(a);var X=F(Z).index(Y)+b;if(X<0){X+=Z.length}X%=Z.length;return Z[X]}R.logicalFrom=function(Y,a,Z){var X=R.getOwningSpan(Y,G.position.INTERLEAVED,Z);return{element:W(Y,a,X),position:G.position.REPLACE}};R.lockedWrapFrom=function(Z,d,c){var b=R.logicalFrom(Z,d,c);var X=R.getOwningSpan(Z,G.position.INTERLEAVED,c);var a=L[T(Z)].owner.elements;if(c||X[0]===a[0]){return b}var Y=W(Z,d,a);if(O.elementMapper(Y)==="locked"){b.element=null;b.clazz="locked"}return b};R.getOwningSpan=function(Z,Y,b){var X=L[T(Z)].owner;var a=Y===G.position.INSIDE?[X.parentElement]:X.elements;if(!b&&O.elementMapper){a=F.makeArray(a);G.remove_if(a,function(c){return O.elementMapper(c)==="locked"})}return a};R.geometricMove=function(a,b,X){var Y=R.getOwningSpan(a,null,true);var Z=R.getOwningSpan(b,X,true);G.permuteDom(a,b,X,Y,Z)};return R};G.dropManager.NO_CHANGE="no change";G.geom=G.geom||{};G.geom.minPointRectangle=function(K,O,N){var M=K<N.left?(N.left-K):(K>N.right?(K-N.right):0);var L=O<N.top?(N.top-O):(O>N.bottom?(O-N.bottom):0);return M*M+L*L};G.geom.minRectRect=function(N,L){var M=N.right<L.left?L.left-N.right:L.right<N.left?N.left-L.right:0;var K=N.bottom<L.top?L.top-N.bottom:L.bottom<N.top?N.top-L.bottom:0;return M*M+K*K};var A=function(){return{mindist:Number.MAX_VALUE,minrdist:Number.MAX_VALUE}};G.geom.projectFrom=function(O,a,b,U){var M=G.directionAxis(a);var X=G.rectSides[a];var V=G.rectSides[M*15+5-a];var R=G.directionSign(a);var K={left:(7*O.left+1*O.right)/8,right:(5*O.left+3*O.right)/8,top:(7*O.top+1*O.bottom)/8,bottom:(5*O.top+3*O.bottom)/8};K[X]=R*C;K[V]=-K[X];function c(g,e,h){var f=e.rect;var i=G.geom.minRectRect(K,f);var d=-R*h*(O[h===1?X:V]-f[h===1?V:X]);if(i<=g.mindist&&d>=0){if(i===g.mindist&&d*h>g.minrdist){return }g.minrdist=d*h;g.mindist=i;g.minelem=e}}var S=A();var W=A();var N=A();for(var Y=0;Y<b.length;++Y){var Z=b[Y];var L=Z.owner&&Z.element===Z.owner.parentElement;if(Z.clazz==="hidden"||U&&L){continue}else{if(!U&&Z.clazz==="locked"){c(N,Z,1)}else{c(S,Z,1);c(W,Z,-1)}}}var Q=!S.minelem||W.mindist<S.mindist;var T=Q?W:S;var P={wrapped:Q,cacheelem:T.minelem};if(N.mindist<T.mindist){P.lockedelem=N.minelem}return P}})(jQuery,fluid_1_2);fluid_1_2=fluid_1_2||{};(function(C,D){var B=function(N,K,L){D.dom.cleanseScripts(D.unwrap(N));var M=C(N).clone();D.dom.iterateDom(M.get(0),function(O){O.removeAttribute("id");if(O.tagName.toLowerCase()==="input"){O.setAttribute("disabled","disabled")}});M.removeAttr("id");M.removeClass("ui-droppable");M.addClass(K);if(L){var J=C(document.createElement("div"));J.append(M);J.append(L);M=J}C("body").append(M);if(!C.browser.safari){M.css("display","block").width(N.offsetWidth).height(N.offsetHeight)}if(C.browser.opera){M.hide()}return M};function F(K,M,N,J){var L=M;var O=false;if(C.browser.opera){K.keypress(function(P){if(O){O=false;P.preventDefault();return false}});L=function(Q){var P=M(Q);if(P===false){O=true}}}K.keydown(L);K.keyup(N)}function I(J){J.container.attr("role",J.options.containerRole.container);J.container.attr("aria-multiselectable","false");J.container.attr("aria-readonly","false");J.container.attr("aria-disabled","false")}function A(J){return J+"_avatar"}var H=function(J){if(J.keysets&&!(J.keysets instanceof Array)){J.keysets=[J.keysets]}};D.reorderer=function(Y,L){if(!Y){D.fail("Reorderer initialised with no container")}var Z=D.initView("fluid.reorderer",Y,L);L=Z.options;var S=D.dropManager();Z.layoutHandler=D.initSubcomponent(Z,"layoutHandler",[Z.container,L,S,Z.dom]);Z.activeItem=undefined;H(L);var J=Z.locate("dropWarning");var W;if(J){W=J.clone()}var b=function(e){var g=L.keysets;for(var f=0;f<g.length;f++){if(g[f].modifier(e)){return true}}return false};var K=function(){return C.inArray(Z.activeItem,Z.dom.fastLocate("movables"))>=0};var M=function(e){Z.dom.fastLocate("dropTargets").attr("aria-dropeffect",e)};var T=L.styles;var U=function(e){return(!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey)};var c=function(m){var o=Z.activeItem;if(!o){return true}var e=L.keysets;for(var h=0;h<e.length;h++){var g=e[h];var l=D.keyForValue(g,m.keyCode);if(!l){continue}var n=g.modifier(m);var f=D.keycodeDirection[l];var j=Z.layoutHandler.getRelativePosition(o,f,!n);if(!j){continue}if(n){var k=Z.events.onBeginMove.fire(o);if(k===false){return false}if(J.length>0){if(j.clazz==="locked"){Z.events.onShowKeyboardDropWarning.fire(o,J);J.show()}else{J.hide()}}if(j.element){Z.requestMovement(j,o)}}else{if(U(m)){o.blur();C(j.element).focus()}}return false}return true};Z.handleKeyDown=function(e){if(!Z.activeItem||Z.activeItem!==e.target){return true}var f=C(Z.activeItem);if(!f.hasClass(T.dragging)&&b(e)){if(K()){f.removeClass(T.selected);f.addClass(T.dragging);f.attr("aria-grabbed","true");M("move")}return false}return c(e)};Z.handleKeyUp=function(e){if(!Z.activeItem||Z.activeItem!==e.target){return true}var f=C(Z.activeItem);if(f.hasClass(T.dragging)&&!b(e)){if(J){J.hide()}f.removeClass(T.dragging);f.addClass(T.selected);f.attr("aria-grabbed","false");M("none");return false}return false};var N;var O=function(f){var e=C(document.createElement(f));e.addClass(L.styles.dropMarker);e.hide();return e};D.logEnabled=true;Z.requestMovement=function(f,e){if(!f||D.unwrap(f.element)===D.unwrap(e)){return 
}Z.events.onMove.fire(e,f);S.geometricMove(e,f.element,f.position);C(Z.activeItem).focus();Z.refresh();S.updateGeometry(Z.layoutHandler.getGeometricInfo());Z.events.afterMove.fire(e,f,Z.dom.fastLocate("movables"))};var X=function(e,f){Z.dom.fastLocate("grabHandle",e)[f?"addClass":"removeClass"](T.hover)};function R(g){var f=L.styles;g.attr("aria-grabbed","false");g.mouseover(function(){Z.events.onHover.fire(g,true)});g.mouseout(function(){Z.events.onHover.fire(g,false)});var e;Z.dom.fastLocate("grabHandle",g).draggable({refreshPositions:false,scroll:true,helper:function(){var h;if(W){h=W[0]}e=C(L.avatarCreator(g[0],f.avatar,h));e.attr("id",A(Z.container.id));return e},start:function(n,m){var i=Z.events.onBeginMove.fire(g);if(i===false){return false}var l=Z.dom.fastLocate("grabHandle",g)[0];var k=D.dom.computeAbsolutePosition(l);var h=l.offsetWidth;var j=l.offsetHeight;g.focus();g.removeClass(L.styles.selected);g.addClass(L.styles.mouseDrag);g.attr("aria-grabbed","true");M("move");S.startDrag(n,k,h,j);e.show()},stop:function(j,i){g.removeClass(L.styles.mouseDrag);g.addClass(L.styles.selected);C(Z.activeItem).attr("aria-grabbed","false");var h=D.unwrap(N);if(h.parentNode){h.parentNode.removeChild(h)}e.hide();i.helper=null;M("none");S.endDrag();Z.requestMovement(S.lastPosition(),g);Z.activeItem.focus()},handle:Z.dom.fastLocate("grabHandle",g)})}function d(e,f){e.removeClass(f.selected);e.removeClass(f.dragging);e.addClass(f.defaultStyle);e.attr("aria-selected","false")}var Q=function(g){Z.events.onSelect.fire(g);var f=L.styles;if(Z.activeItem&&Z.activeItem!==g){d(C(Z.activeItem),f)}Z.activeItem=g;var e=C(g);e.removeClass(f.defaultStyle);e.addClass(f.selected);e.attr("aria-selected","true")};var a=function(){var h=function(i){d(C(this),L.styles);return i.stopPropagation()};var j=function(i){Q(this);return i.stopPropagation()};var e=Z.dom.fastLocate("selectables");for(var g=0;g<e.length;++g){var f=C(e[g]);if(!C.data(f[0],"fluid.reorderer.selectable-initialised")){f.addClass(T.defaultStyle);f.blur(h);f.focus(j);f.click(function(i){var k=D.unwrap(Z.dom.fastLocate("grabHandle",this));if(D.dom.isContainer(k,i.target)){C(this).focus()}});f.attr("role",L.containerRole.item);f.attr("aria-selected","false");f.attr("aria-disabled","false");C.data(f[0],"fluid.reorderer.selectable-initialised",true)}}if(!Z.selectableContext){Z.selectableContext=D.selectable(Z.container,{selectableElements:e,selectablesTabindex:Z.options.selectablesTabindex,direction:null})}};var V=function(e){D.moveDom(N,e.element,e.position);N.css("display","");if(W){if(e.lockedelem){W.show()}else{W.hide()}}};var P=function(){var h=Z.dom.fastLocate("movables");var g=Z.dom.fastLocate("dropTargets");a();for(var e=0;e<h.length;e++){var f=h[e];if(!C.data(f,"fluid.reorderer.movable-initialised")){R(C(f));C.data(f,"fluid.reorderer.movable-initialised",true)}}if(h.length>0&&!N){N=O(h[0].tagName)}S.updateGeometry(Z.layoutHandler.getGeometricInfo());S.dropChangeFirer.addListener(V,"fluid.Reorderer");g.attr("aria-dropeffect","none")};if(Z.container){F(Z.container,Z.handleKeyDown,Z.handleKeyUp);I(Z);D.tabbable(Z.container);P()}if(L.afterMoveCallbackUrl){Z.events.afterMove.addListener(function(){var e=Z.layoutHandler;var f=e.getModel?e.getModel():L.acquireModel(Z);C.post(L.afterMoveCallbackUrl,JSON.stringify(f))},"postModel")}Z.events.onHover.addListener(X,"style");Z.refresh=function(){Z.dom.refresh("movables");Z.dom.refresh("selectables");Z.dom.refresh("grabHandle",Z.dom.fastLocate("movables"));Z.dom.refresh("stylisticOffset",Z.dom.fastLocate("movables"));Z.dom.refresh("dropTargets");Z.events.onRefresh.fire();P();Z.selectableContext.selectables=Z.dom.fastLocate("selectables");Z.selectableContext.selectablesUpdated(Z.activeItem)};Z.refresh();return Z};D.reorderer.keys={TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:19,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,i:73,j:74,k:75,m:77};D.reorderer.defaultKeysets=[{modifier:function(J){return J.ctrlKey},up:D.reorderer.keys.UP,down:D.reorderer.keys.DOWN,right:D.reorderer.keys.RIGHT,left:D.reorderer.keys.LEFT},{modifier:function(J){return J.ctrlKey},up:D.reorderer.keys.i,down:D.reorderer.keys.m,right:D.reorderer.keys.k,left:D.reorderer.keys.j}];D.reorderer.roles={GRID:{container:"grid",item:"gridcell"},LIST:{container:"list",item:"listitem"},REGIONS:{container:"main",item:"article"}};var E=function(J,K,L){L=L||{};L.layoutHandler=K;return D.reorderer(J,L)};D.reorderList=function(J,K){return E(J,"fluid.listLayoutHandler",K)};D.reorderGrid=function(J,K){return E(J,"fluid.gridLayoutHandler",K)};D.reorderer.SHUFFLE_GEOMETRIC_STRATEGY="shuffleProjectFrom";D.reorderer.GEOMETRIC_STRATEGY="projectFrom";D.reorderer.LOGICAL_STRATEGY="logicalFrom";D.reorderer.WRAP_LOCKED_STRATEGY="lockedWrapFrom";D.reorderer.NO_STRATEGY=null;D.reorderer.relativeInfoGetter=function(K,M,L,J,N){return function(P,R,O){var Q=D.directionOrientation(R);var S=Q===K?M:L;return S!==null?J[S](P,R,O):null}};D.defaults("fluid.reorderer",{styles:{defaultStyle:"fl-reorderer-movable-default",selected:"fl-reorderer-movable-selected",dragging:"fl-reorderer-movable-dragging",mouseDrag:"fl-reorderer-movable-dragging",hover:"fl-reorderer-movable-hover",dropMarker:"fl-reorderer-dropMarker",avatar:"fl-reorderer-avatar"},selectors:{dropWarning:".flc-reorderer-dropWarning",movables:".flc-reorderer-movable",grabHandle:"",stylisticOffset:""},avatarCreator:B,keysets:D.reorderer.defaultKeysets,layoutHandler:{type:"fluid.listLayoutHandler"},events:{onShowKeyboardDropWarning:null,onSelect:null,onBeginMove:"preventable",onMove:null,afterMove:null,onHover:null,onRefresh:null},mergePolicy:{keysets:"replace","selectors.selectables":"selectors.movables","selectors.dropTargets":"selectors.movables"}});function G(J,L,K){return function(){return{sentinelize:L,extents:[{orientation:J,elements:K.fastLocate("dropTargets")}],elementMapper:function(M){return C.inArray(M,K.fastLocate("movables"))===-1?"locked":null}}}}D.defaults(true,"fluid.listLayoutHandler",{orientation:D.orientation.VERTICAL,containerRole:D.reorderer.roles.LIST,selectablesTabindex:-1,sentinelize:true});D.listLayoutHandler=function(K,L,J,N){var M={};M.getRelativePosition=D.reorderer.relativeInfoGetter(L.orientation,D.reorderer.LOGICAL_STRATEGY,null,J,N);M.getGeometricInfo=G(L.orientation,L.sentinelize,N);return M};D.defaults(true,"fluid.gridLayoutHandler",{orientation:D.orientation.HORIZONTAL,containerRole:D.reorderer.roles.GRID,selectablesTabindex:-1,sentinelize:false});D.gridLayoutHandler=function(K,L,J,N){var M={};M.getRelativePosition=D.reorderer.relativeInfoGetter(L.orientation,D.reorderer.LOGICAL_STRATEGY,D.reorderer.SHUFFLE_GEOMETRIC_STRATEGY,J,N);M.getGeometricInfo=G(L.orientation,L.sentinelize,N);return M}})(jQuery,fluid_1_2);fluid_1_2=fluid_1_2||{};(function(D,F){var K=function(L,M){return L+"lightbox-cell:"+M+":"};var J=function(L){var M=function(N){if(N.which===F.reorderer.keys.ENTER){var O=D("a",N.target);document.location=O.attr("href")}};L.keypress(M)};var B=function(P,R,N){var L=P.getElementsByTagName(R);var Q=[];for(var O=0;O<L.length;O+=1){var M=L[O];var S=M.id;if(S&&S.match(N)){Q.push(M)}}return Q};var H=function(L,M){L=F.unwrap(L);var N="^"+K(M,"[0-9]+")+"$";return function(){return B(L,"div",N)}};var A=function(L){return F.findAncestor(L,function(M){return D(M).is("form")})};var E=function(L,M){return B(M,"input","^"+K(L.attr("id"),"[^:]*")+"reorder-index$")};var C=function(M,Q){var L=E(M,Q);for(var P=0;P<L.length;P++){var N=L[P];var O=N.name;N.name=O||N.id}};var I=function(L){var M=A(L);C(L,M);return function(){var O,P;O=E(L,M);for(P=0;P<O.length;P+=1){O[P].value=P}if(M&&M.action){var N=D(M).serialize();D.post(M.action,N,function(R,S,Q){})}}};var G=function(P,O,N){var M=F.model.getBeanValue(P,O);var L=M||N;F.model.setBeanValue(P,O,L)};F.reorderImages=function(L,N){var O=F.initView("fluid.reorderImages",L,N);G(O,"options.listeners.afterMove",O.options.afterMoveCallback||I(O.container));G(O,"options.selectors.movables",H(O.container,O.container.attr("id")));var M=F.reorderer(O.container,O.options);F.transform(M.locate("movables"),function(P){F.reorderImages.addAriaRoles(O.options.selectors.imageTitle,P)});F.tabindex(D("a",O.container),-1);J(O.container);return M};F.reorderImages.addAriaRoles=function(M,L){L=D(L);L.attr("role","img");var P=D(M,L);if(P[0]===L[0]||P[0]===document){F.fail("Could not locate cell title using selector "+M+" in context "+F.dumpEl(L))}var N=F.allocateSimpleId(P);L.attr("aria-labelledby",N);var O=D("img",L);O.attr("role","presentation");O.attr("alt","")};F.lightbox=F.reorderImages;F.defaults("fluid.reorderImages",{layoutHandler:"fluid.gridLayoutHandler",selectors:{imageTitle:".flc-reorderer-imageTitle"}})})(jQuery,fluid_1_2);fluid_1_2=fluid_1_2||{};(function(C,B){B.moduleLayout=B.moduleLayout||{};var E=function(G,F){return B.find(F.columns,function(J,I){var H=C.inArray(G,J.elements);return H===-1?null:{columnIndex:I,itemIndex:H}},{columnIndex:-1,itemIndex:-1})};var A=function(G,F){return B.find(F.columns,function(I,H){return G===I.container?H:null},-1)};B.moduleLayout.updateLayout=function(I,K,G,H){I=B.unwrap(I);K=B.unwrap(K);var F=E(I,H);H.columns[F.columnIndex].elements.splice(F.itemIndex,1);var M;if(G===B.position.INSIDE){M=H.columns[A(K,H)].elements;M.splice(M.length,0,I)}else{var L=E(K,H);M=H.columns[L.columnIndex].elements;G=B.normalisePosition(G,F.columnIndex===L.columnIndex,L.itemIndex,F.itemIndex);var J=G===B.position.BEFORE?0:1;M.splice(L.itemIndex+J,0,I)}};B.moduleLayout.layoutFromFlat=function(F,H,G){var I={};I.container=F;I.columns=B.transform(H,function(J){return{container:J,elements:C.makeArray(G.filter(function(){return B.dom.isContainer(J,this)}))}});return I};B.moduleLayout.layoutFromIds=function(F){return{container:B.byId(F.id),columns:B.transform(F.columns,function(G){return{container:B.byId(G.id),elements:B.transform(G.children,B.byId)}})}};B.moduleLayout.layoutToIds=function(F){return{id:B.getId(F.container),columns:B.transform(F.columns,function(G){return{id:B.getId(G.container),children:B.transform(G.elements,B.getId)}
})}};var D=function(G,F){if(F){var H=C(G).offset();F=C(F);F.css("position","absolute");F.css("top",H.top);F.css("left",H.left)}};B.defaults(true,"fluid.moduleLayoutHandler",{orientation:B.orientation.VERTICAL,containerRole:B.reorderer.roles.REGIONS,selectablesTabindex:0,sentinelize:true});B.moduleLayoutHandler=function(G,N,J,H){var K={};function M(){var P;if(N.selectors.modules){P=B.moduleLayout.layoutFromFlat(G,H.locate("columns"),H.locate("modules"))}if(!P){var O=B.model.getBeanValue(N,"moduleLayout.layout");B.moduleLayout.layoutFromIds(O)}return P}var I=M();K.layout=I;function F(O){var P=N.selectors.lockedModules?H.fastLocate("lockedModules"):[];return C.inArray(O,P)!==-1}K.getRelativePosition=B.reorderer.relativeInfoGetter(N.orientation,B.reorderer.WRAP_LOCKED_STRATEGY,B.reorderer.GEOMETRIC_STRATEGY,J,H);K.getGeometricInfo=function(){var S=[];var R={extents:S,sentinelize:N.sentinelize};R.elementMapper=function(T){return F(T)?"locked":null};for(var O=0;O<I.columns.length;O++){var Q=I.columns[O];var P={orientation:N.orientation,elements:C.makeArray(Q.elements),parentElement:Q.container};S.push(P)}return R};function L(O){return function(){var P=B.accumulate(I.columns,function(Q,R){return R.concat(Q.elements)},[]);if(!O){B.remove_if(P,F)}return P}}K.returnedOptions={selectors:{movables:L(false),dropTargets:L(false),selectables:L(true)},listeners:{onMove:function(O,P){B.moduleLayout.updateLayout(O,P.element,P.position,I)},onRefresh:function(){I=M();K.layout=I},"onShowKeyboardDropWarning.setPosition":D}};K.getModel=function(){return B.moduleLayout.layoutToIds(I)};return K}})(jQuery,fluid_1_2);fluid_1_2=fluid_1_2||{};(function(B,A){A.reorderLayout=function(C,F){var E={layoutHandler:"fluid.moduleLayoutHandler",selectors:{columns:".flc-reorderer-column",modules:".flc-reorderer-module"}};var D=B.extend(true,E,F);return A.reorderer(C,D)}})(jQuery,fluid_1_2);fluid_1_2=fluid_1_2||{};(function(D,H){function S(Y,Z,b){if(!Y.pageLinks){return }if(b.pageIndex!==undefined){var a=Y.pageLinks.eq(b.pageIndex);a.removeClass(Y.options.styles.currentPage)}var X=Y.pageLinks.eq(Z.pageIndex);X.addClass(Y.options.styles.currentPage)}function J(Y,X,Z){Y.unbind("click.fluid.pager");Y.bind("click.fluid.pager",function(){X.initiatePageChange.fire(Z)})}function B(X){X.pageCount=Math.max(1,Math.floor((X.totalRange-1)/X.pageSize)+1)}function L(X){return Math.min(X.totalRange,(X.pageIndex+1)*X.pageSize)}H.pager=function(){return H.pagerImpl.apply(null,arguments)};H.pager.directPageList=function(X,b,Z){var c=H.initView("fluid.pager.directPageList",X,Z);c.pageLinks=c.locate("pageLinks");for(var a=0;a<c.pageLinks.length;++a){var Y=c.pageLinks.eq(a);J(Y,b,{pageIndex:a})}b.onModelChange.addListener(function(d,e){S(c,d,e)});c.defaultModel={pageIndex:undefined,pageSize:1,totalRange:c.pageLinks.length};return c};H.iota=function(Z,a){a=a||0;var Y=[];for(var X=0;X<Z;++X){Y[Y.length]=a++}return Y};H.pager.everyPageStrategy=H.iota;H.pager.gappedPageStrategy=function(X,Y){if(!X){X=3}if(!Y){Y=X}return function(e,f,a){var d=[];var Z=0;var c=false;for(var b=0;b<e;++b){if(b<X||(e-b-1)<X||(b>=a-Y&&b<=a+Y)){d[Z++]=b;c=false}else{if(!c){d[Z++]=-1;c=true}}}return d}};H.pager.renderedPageList=function(X,f,Z,g,e){g=D.extend(true,Z,g);var b=H.initView("fluid.pager.renderedPageList",X,g);g=b.options;var Y={cutpoints:[{id:"page-link:link",selector:Z.selectors.pageLinks},{id:"page-link:skip",selector:Z.selectors.pageLinkSkip},{id:"page-link:disabled",selector:Z.selectors.pageLinkDisabled}]};if(g.linkBody){Y.cutpoints[Y.cutpoints.length]={id:"payload-component",selector:g.linkBody}}function a(h){return function(i){return i===-1?{ID:"page-link:skip"}:{ID:i===h?"page-link:link":"page-link:link",localID:i+1,value:i+1,pageIndex:i,decorators:[{type:"jQuery",func:"click",args:function(){f.initiatePageChange.fire({pageIndex:i})}},{type:i===h?"addClass":"",classes:b.options.styles.currentPage}]}}}var c=b.locate("root");H.expectFilledSelector(c,"Error finding root template for fluid.pager.renderedPageList");var d=H.selfRender(c,{},Y);f.onModelChange.addListener(function(i,k){var h=b.options.pageStrategy(i.pageCount,0,i.pageIndex);var j=H.transform(h,a(i.pageIndex));j[j.length-1].value=j[j.length-1].value+e.last;f.onRenderPageLinks.fire(j,i);H.reRender(d,c,j,Y);S(b,i,k)});return b};H.defaults("fluid.pager.renderedPageList",{selectors:{root:".flc-pager-links"},linkBody:"a",pageStrategy:H.pager.everyPageStrategy});var K=function(Z,X,Y){if(Y.pageIndex===0){Z.previous.addClass(X.styles.disabled)}else{Z.previous.removeClass(X.styles.disabled)}if(Y.pageIndex===Y.pageCount-1){Z.next.addClass(X.styles.disabled)}else{Z.next.removeClass(X.styles.disabled)}};H.pager.previousNext=function(X,Z,Y){var a=H.initView("fluid.pager.previousNext",X,Y);a.previous=a.locate("previous");J(a.previous,Z,{relativePage:-1});a.next=a.locate("next");J(a.next,Z,{relativePage:+1});Z.onModelChange.addListener(function(b,d,c){K(a,Y,b)});return a};H.pager.pagerBar=function(a,Y,Z,X){var b=H.initView("fluid.pager.pagerBar",Y,Z);b.pageList=H.initSubcomponent(b,"pageList",[Y,a,b.options,H.COMPONENT_OPTIONS,X]);b.previousNext=H.initSubcomponent(b,"previousNext",[Y,a,b.options,H.COMPONENT_OPTIONS,X]);return b};H.defaults("fluid.pager.pagerBar",{previousNext:{type:"fluid.pager.previousNext"},pageList:{type:"fluid.pager.directPageList"},selectors:{pageLinks:".flc-pager-pageLink",pageLinkSkip:".flc-pager-pageLink-skip",pageLinkDisabled:".flc-pager-pageLink-disabled",previous:".flc-pager-previous",next:".flc-pager-next"},styles:{currentPage:"fl-pager-currentPage",disabled:"fl-pager-disabled"}});function A(X){return X.options.columnDefs}H.pager.findColumnDef=function(Z,Y){var X=D.grep(Z,function(a){return a.key===Y})[0];return X};function R(a,Z,X){var Y=(Z.options.dataOffset?Z.options.dataOffset+".":"");a.shortRoot=X;a.longRoot=Y+a.shortRoot}function E(Y,Z,X){if(Y.charAt(0)==="*"){return X+Y.substring(1)}else{return Y.replace("*",Z)}}H.pager.fetchValue=function(a,Z,Y,c,X){R(X,a,Y);var b=E(c,X.shortRoot,X.longRoot);return H.model.getBeanValue(Z,b)};H.pager.basicSorter=function(g,Z){var d=g.options.dataModel;var f={};var a=A(g);var b=H.pager.findColumnDef(a,Z.sortKey);var X=[];for(var Y=0;Y<Z.totalRange;++Y){X[Y]={index:Y,value:H.pager.fetchValue(g,d,Y,b.valuebinding,f)}}var e=typeof X[0].value;function c(k,j){var i=k.value;var h=j.value;return i===h?0:(i>h?Z.sortDir:-Z.sortDir)}X.sort(c);return H.transform(X,function(h){return h.index})};H.pager.directModelFilter=function(a,Z,c){var d=[];var X=L(Z);for(var b=Z.pageIndex*Z.pageSize;b<X;++b){var Y=c?c[b]:b;d[d.length]={index:Y,row:a[Y]}}return d};function C(d,c){var b="";var Y=0;while(true){var Z=d.indexOf("${",Y);if(Z===-1){b+=d.substring(Y);break}else{b+=d.substring(Y,Z);var X=d.indexOf("}",Z+2);var a=d.substring(Z+2,X);if(a==="VALUE"){a=c.EL}else{a=E(a,c.shortRoot,c.longRoot)}var e=H.model.getBeanValue(c.dataModel,a);b+=e;Y=X+1}}return b}function U(a,X,Z){for(var Y in X){var b=X[Y];if(b===H.VALUE){if(Y==="valuebinding"){a[Y]=Z.EL}else{a[Y]={valuebinding:Z.EL}}}else{if(Y==="valuebinding"){a[Y]=E(X[Y],Z)}else{if(typeof (b)==="object"){a[Y]=b.length!==undefined?[]:{};U(a[Y],b,Z)}else{if(typeof (b)==="string"){a[Y]=C(b,Z)}else{a[Y]=X[Y]}}}}}return a}function P(Z,d){var a=d.options;var c=Z.valuebinding;var b=Z.key;if(!c){H.fail("Error in definition for column with key "+b+": valuebinding is not set")}d.EL=E(c,d.shortRoot,d.longRoot);if(!b){var Y=H.model.parseEL(c);b=Y[Y.length-1]}var X=(a.keyPrefix?a.keyPrefix:"")+b;return X}function M(Y,Z){var X=H.transform(Z.columnDefs,function(b){var a=P(b,Z);var c;if(!b.components){return{ID:a,valuebinding:Z.EL}}else{if(typeof b.components==="function"){c=b.components(Y.row,Y.index)}else{c=b.components}}c=U({},c,Z);c.ID=a;return c});return X}function W(X){return H.model.getBeanValue(X.options.dataModel,X.options.dataOffset)}function Q(X,Z){var c=Z.options.renderOptions.idMap["header:"+X];var a=H.jById(c);if(a.length===0){return null}var b=Z.overallOptions.selectors.headerSortStylisticOffset;var Y=H.findAncestor(a,function(d){return D(d).is(b)});return Y}function N(Z,Y,X){Y=D(Y);Y.removeClass(Z.ascendingHeader);Y.removeClass(Z.descendingHeader);if(X!==0){Y.addClass(X===1?Z.ascendingHeader:Z.descendingHeader)}}function T(Z,Y){var X=Y.sortKey?H.pager.findColumnDef(Z,Y.sortKey):null;return X?X.sortable:false}function V(Y,a){var Z=a.overallOptions.styles;var X=T(a.columnDefs,Y)?Y.sortDir:0;N(Z,Q(Y.sortKey,a),X)}function O(a,Z,Y){B(Z);if(Z.pageIndex>=Z.pageCount){Z.pageIndex=Z.pageCount-1}if(Y||Z.pageIndex!==a.model.pageIndex||Z.pageSize!==a.model.pageSize||Z.sortKey!==a.model.sortKey||Z.sortDir!==a.model.sortDir){var X=T(A(a),Z)?a.options.sorter(a,Z):null;a.permutation=X;a.events.onModelChange.fire(Z,a.model,a);H.model.copyModel(a.model,Z)}}function G(Z,X,Y){return function(){if(X.sortable===true){var a=Z.model;var c=H.copy(a);var d=Z.options.styles;var e=a.sortKey;if(X.key!==a.sortKey){c.sortKey=X.key;c.sortDir=1;var b=Q(e,Y);if(b){N(d,b,0)}}else{if(c.sortKey===X.key){c.sortDir=-1*c.sortDir}else{return false}}c.pageIndex=0;O(Z,c,true);V(c,Y)}return false}}function F(Y,X){return Y[X.sortable?"sortableHeader":"unsortableHeader"]}function I(Z,X,a,Y){return{children:H.transform(a,function(b){return{ID:P(b,Y),value:b.label,decorators:[{jQuery:["click",G(Z,b,Y)]},{identify:"header:"+b.key}].concat(F(Y.overallOptions.decorators,b))}})}}H.pager.selfRender=function(f,Y){var a=H.initView("fluid.pager.selfRender",f.container,Y);var g=a.options;g.renderOptions.idMap=g.renderOptions.idMap||{};var e=g.renderOptions.idMap;var b=a.locate("root");var d=H.selfRender(b,{},g.renderOptions);b.addClass(g.styles.root);var Z=A(f);var X={options:g,columnDefs:Z,overallOptions:f.options,dataModel:f.options.dataModel,idMap:e};var c=W(f);return{returnedOptions:{listeners:{onModelChange:function(j,l){var i=f.options.modelFilter(c,j,f.permutation);var h=H.transform(i,function(m){var n=R(X,f,m.index);if(Z==="explode"){return H.explode(m.row,b)}else{if(Z.length){return M(m,X)}}});
var k={};k[g.row]=h;if(typeof (Z)==="object"){k[g.header]=I(f,j,Z,X)}g.renderOptions=g.renderOptions||{};g.renderOptions.model=X.dataModel;H.reRender(d,b,k,g.renderOptions);V(j,X)}}}}};H.defaults("fluid.pager.selfRender",{selectors:{root:".flc-pager-body-template"},styles:{root:"fl-pager"},keyStrategy:"id",keyPrefix:"",row:"row:",header:"header:",renderOptions:{}});H.pager.summary=function(Z,X){var Y=Z.locate("summary");return{returnedOptions:{listeners:{onModelChange:function(a,c){var b=H.stringTemplate(X.message,{first:a.pageIndex*a.pageSize+1,last:L(a),total:a.totalRange});if(Y.length>0){Y.text(b)}}}}}};H.pager.directPageSize=function(Y){var X=Y.locate("pageSize");if(X.length>0){Y.events.onModelChange.addListener(function(Z,a){if(X.val()!==Z.pageSize){X.val(Z.pageSize)}});X.change(function(){Y.events.initiatePageSizeChange.fire(X.val())})}return Y};H.pager.rangeAnnotator=function(Z,Y){var X={};Z.events.onRenderPageLinks.addListener(function(a,d){var f=Z.options.annotateColumnRange;var c=Z.options.dataModel;var h=A(Z);if(!f||!c||!h){return }var b=H.pager.findColumnDef(h,f);function g(i){i=Z.permutation?Z.permutation[i]:i;return H.pager.fetchValue(Z,c,i,b.valuebinding,X)}var e={};H.model.copyModel(e,d);H.transform(a,function(i){if(i.ID==="page-link:link"){var m=i.pageIndex;var p=m*e.pageSize;e.pageIndex=m;var j=L(e);var o=g(p);var l=g(j-1);var n="<b>"+o+"</b><br/>&mdash;<br/><b>"+l+"</b>";var k={type:"jQuery",func:"tooltip",args:{delay:Z.options.tooltipDelay,extraClass:Z.options.styles.tooltip,bodyHandler:function(){return n},showURL:false,id:Z.options.tooltipId}};i.decorators.push(k)}})})};H.pagerImpl=function(X,Y){var a=H.initView("fluid.pager",X,Y);var c=function(e,f){if(f.value<0){f.value=0}};a.events.initiatePageChange.addListener(function(e){var f=H.copy(a.model);if(e.relativePage!==undefined){f.pageIndex=a.model.pageIndex+e.relativePage}else{f.pageIndex=e.pageIndex}if(f.pageIndex===undefined||f.pageIndex<0){f.pageIndex=0}O(a,f,e.forceUpdate)});a.events.initiatePageSizeChange.addListener(function(e){var f=H.copy(a.model);f.pageSize=e;O(a,f)});var b=a.locate("pagerBar");if(b.length>0){a.pagerBar=H.initSubcomponent(a,"pagerBar",[a.events,b,H.COMPONENT_OPTIONS,a.options.strings])}var d=a.locate("pagerBarSecondary");if(d.length>0){a.pagerBarSecondary=H.initSubcomponent(a,"pagerBar",[a.events,d,H.COMPONENT_OPTIONS,a.options.strings])}a.bodyRenderer=H.initSubcomponent(a,"bodyRenderer",[a,H.COMPONENT_OPTIONS]);a.summary=H.initSubcomponent(a,"summary",[a.dom,H.COMPONENT_OPTIONS]);a.pageSize=H.initSubcomponent(a,"pageSize",[a]);a.rangeAnnotator=H.initSubcomponent(a,"rangeAnnotator",[a,H.COMPONENT_OPTIONS]);a.model=H.copy(a.options.model);var Z=W(a);if(Z){a.model.totalRange=Z.length}if(a.model.totalRange===undefined){if(!a.pagerBar){H.fail("Error in Pager configuration - cannot determine total range,  since not configured in model.totalRange and no PagerBar is configured")}a.model=a.pagerBar.pageList.defaultModel}a.applier=H.makeChangeApplier(a.model);a.events.initiatePageChange.fire({pageIndex:a.model.pageIndex?a.model.pageIndex:0,forceUpdate:true});return a};H.defaults("fluid.pager",{pagerBar:{type:"fluid.pager.pagerBar",options:null},summary:{type:"fluid.pager.summary",options:{message:"%first-%last of %total items"}},pageSize:{type:"fluid.pager.directPageSize"},modelFilter:H.pager.directModelFilter,sorter:H.pager.basicSorter,bodyRenderer:{type:"fluid.emptySubcomponent"},model:{pageIndex:undefined,pageSize:10,totalRange:undefined},dataModel:undefined,dataOffset:"",columnDefs:"explode",annotateColumnRange:undefined,tooltipDelay:300,tooltipId:"tooltip",rangeAnnotator:{type:"fluid.pager.rangeAnnotator"},selectors:{pagerBar:".flc-pager-top",pagerBarSecondary:".flc-pager-bottom",summary:".flc-pager-summary",pageSize:".flc-pager-page-size",headerSortStylisticOffset:".flc-pager-sort-header"},styles:{tooltip:"fl-pager-tooltip",ascendingHeader:"fl-pager-asc",descendingHeader:"fl-pager-desc"},decorators:{sortableHeader:[],unsortableHeader:[]},strings:{last:" (last)"},events:{initiatePageChange:null,initiatePageSizeChange:null,onModelChange:null,onRenderPageLinks:null}})})(jQuery,fluid_1_2);